(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{6245:function(e,i,l){Promise.resolve().then(l.bind(l,3952))},3952:function(e,i,l){"use strict";l.r(i),l.d(i,{default:function(){return v}});var n=l(7437),s=l(1279),d=l(2759),r=l(1396),t=l.n(r),a=l(2749),c=l(6525),o=l(9222),u=l(6716),h=l(6526);function v(e){var i,l,r;let{params:v}=e,{data:x,status:j}=(0,a.useSession)(),m=null==x?void 0:x.user.id,{data:p,error:f,isLoading:g}=(0,c.ZP)("/api/profile/".concat(m),async()=>{let e=await o.Z.get("/api/profile/".concat(m));return e.data},{refreshInterval:100});if(g)return(0,n.jsx)("p",{children:"Loading..."});if(f)return console.log(f),(0,n.jsx)("p",{children:"Something went wrong. Try to reload page"});let w=[];return null===(i=p[1])||void 0===i||i.filter(e=>{e.likes.length>0&&w.push(...e.likes)}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"row",style:{marginTop:"80px"},children:[(0,n.jsxs)("div",{className:"col col-md-3 mb-4",style:{minWidth:"260px"},children:[(0,n.jsx)("h3",{className:"mb-4",children:"Your profile"}),(0,n.jsxs)("div",{className:"p-4 shadow rounded",children:[(0,n.jsx)("p",{children:null==x?void 0:x.user.name}),(0,n.jsx)("p",{children:null==x?void 0:x.user.email}),(0,n.jsxs)("p",{children:["Reviews:\xa0",(0,n.jsxs)("strong",{children:[" ",null===(l=p[1])||void 0===l?void 0:l.length," "]})]}),(0,n.jsxs)("p",{children:["Likes:\xa0",(0,n.jsx)("strong",{children:w.length}),"\xa0",(0,n.jsx)(s.G,{icon:d.m6i})]}),m===(null==x?void 0:x.user.id)&&(0,n.jsx)(u.Z,{variant:"outline-danger",onClick:()=>(0,a.signOut)(),children:"Log Out"})]})]}),(0,n.jsxs)("div",{className:"col",style:{minWidth:"70%"},children:[(0,n.jsxs)("div",{className:"mb-4 d-flex justify-content-between",children:[(0,n.jsx)("h3",{children:"Your reviews"}),m===(null==x?void 0:x.user.id)&&(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsxs)(t(),{href:"/review/add",className:"btn btn-primary",children:[(0,n.jsx)(s.G,{icon:d.r8p,style:{width:"14px",height:"16px"}}),"\xa0 Add new"]})})]}),0===p[1].length&&(0,n.jsx)("p",{children:"There are no reviews here yet"}),null===(r=p[1])||void 0===r?void 0:r.map(e=>(0,n.jsx)(h.Z,{reviewData:e,id:m}))]})]})})}},6526:function(e,i,l){"use strict";l.d(i,{Z:function(){return u}});var n=l(7437),s=l(9222),d=l(2749),r=l(1396),t=l.n(r),a=l(2265),c=l(4850),o=l(9588);function u(e){var i,l;let{reviewData:r,id:u}=e,{data:h,status:v}=(0,d.useSession)(),[x,j]=(0,a.useState)(JSON.parse(JSON.stringify(null==r?void 0:r.tags)));return(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)(t(),{href:"/review/".concat(null==r?void 0:r._id),className:"col text-decoration-none text-body d-flex ",children:[(0,n.jsx)("div",{className:"mt-2 me-3",style:{maxWidth:"150px"},children:(0,n.jsx)("img",{src:null==r?void 0:r.img,alt:"",className:"object-fit-cover w-100 h-auto",style:{minWidth:"70px"}})}),(0,n.jsxs)("div",{style:{minWidth:"180px"},children:[(0,n.jsx)("h2",{children:null==r?void 0:r.titleReview}),(0,n.jsx)("h4",{children:null==r?void 0:r.titleItem}),(0,n.jsx)("p",{children:null==r?void 0:null===(i=r.category)||void 0===i?void 0:i.name}),(0,n.jsx)("p",{children:null==x?void 0:x.map(e=>{let i=JSON.parse(e);return i.name+" "})}),(0,n.jsx)(o.D,{children:(null==r?void 0:null===(l=r.desc)||void 0===l?void 0:l.substring(0,200))+"..."}),(0,n.jsxs)("p",{children:["Rate: ",null==r?void 0:r.rating]}),(0,n.jsx)("div",{className:"d-flex justify-content-between",children:(0,n.jsxs)("p",{children:["Review likes: ",null==r?void 0:r.likes.length]})})]})]}),(u===(null==h?void 0:h.user.id)||(null==h?void 0:h.user.admin))&&(0,n.jsxs)(c.Z,{className:"col col-auto",children:[(0,n.jsx)(c.Z.Toggle,{variant:"secondary",id:"dropdown-basic",children:"More actions"}),(0,n.jsxs)(c.Z.Menu,{children:[(0,n.jsx)(c.Z.Item,{href:"/review/edit/".concat(null==r?void 0:r._id),children:"Edit"}),(0,n.jsx)(c.Z.Divider,{}),(0,n.jsx)(c.Z.Item,{className:"text-danger",onClick:()=>s.Z.delete("/api/review/delete/".concat(null==r?void 0:r._id)),children:"Delete"})]})]})]})}),(0,n.jsx)("hr",{className:"w-100"})]},null==r?void 0:r._id)}}},function(e){e.O(0,[676,726,222,749,588,175,162,333,850,971,596,744],function(){return e(e.s=6245)}),_N_E=e.O()}]);