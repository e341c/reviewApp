(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{6926:function(e,s,a){Promise.resolve().then(a.bind(a,1222))},1222:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return y}});var l=a(7437),r=a(9222),t=a(2333),n=a(1396),i=a.n(n),o=a(8595),c=a(6716),d=a(1279),m=a(1988),u=a(2759),h=a(4883),x=a(2265),p=a(2749);function v(e){let{id:s}=e,{data:a,isLoading:n,error:m}=(0,t.ZP)("/api/comment",async()=>{let e=await r.Z.get("/api/comment/".concat(s));return e.data},{refreshInterval:100}),{data:u}=(0,p.useSession)(),[v,f]=(0,x.useState)(""),[j,N]=(0,x.useState)("");if((null==a?void 0:a.length)===0)return(0,l.jsx)("div",{className:"shadow py-5 px-1 rounded",children:(0,l.jsx)("h5",{className:"m-0 ms-5",children:"No comments yet"})});let y=(e,s)=>{f(e),N(s)},g=async()=>{N(""),f("")},b={comment:j,reviewId:s,authorId:null==u?void 0:u.user.id},w=async()=>{await r.Z.post("/api/comment/edit/".concat(v),b),N(""),f("")};return(0,l.jsxs)("div",{className:"shadow rounded p-3",children:[(0,l.jsx)("p",{className:"px-3",children:(0,l.jsxs)("strong",{children:[null==a?void 0:a.length," Comments"]})}),(0,l.jsxs)("div",{className:"px-3",children:[(0,l.jsx)("h4",{className:"mb-4",children:"User comments"}),(0,l.jsx)("div",{className:"px-3",children:null==a?void 0:a.map(e=>(0,l.jsxs)("div",{className:"mb-5 row",children:[(0,l.jsxs)("div",{className:"col",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)(i(),{href:"/profile/".concat(e.authorId._id),className:"col text-decoration-none",children:(0,l.jsx)("strong",{children:e.authorId.name})}),(null==u?void 0:u.user.id)===e.authorId._id&&(0,l.jsxs)(o.Z,{className:"col col-auto",children:[(0,l.jsx)(o.Z.Toggle,{variant:"outline-secondary",id:"dropdown-basic",children:(0,l.jsx)(d.G,{icon:"fa-solid fa-bars",className:"me-1"})}),(0,l.jsxs)(o.Z.Menu,{children:[(0,l.jsx)(o.Z.Item,{onClick:()=>y(e._id,e.comment),children:"Edit"}),(0,l.jsx)(o.Z.Divider,{}),(0,l.jsx)(o.Z.Item,{className:"text-danger",children:"Delete"})]})]})]}),(0,l.jsx)("p",{className:"mt-3 mb-3",children:e.comment}),v===e._id&&(0,l.jsxs)(h.Z.Group,{className:"mb-3",controlId:"desc",children:[(0,l.jsxs)(h.Z.Label,{className:"d-flex justify-content-between align-items-center",children:[(0,l.jsx)("strong",{children:"Edit comment"}),(0,l.jsxs)(c.Z,{variant:"danger",onClick:g,children:[(0,l.jsx)(d.G,{icon:"fa-solid fa-xmark"})," Close"]})]}),(0,l.jsx)(h.Z.Control,{name:"comment",value:j,as:"textarea",className:"mb-3",rows:3,style:{resize:"none"},maxLength:400,placeholder:"Enter your comment",onChange:e=>N(e.target.value)}),(0,l.jsx)(c.Z,{variant:"primary",onClick:w,children:"Edit comment"})]})]}),(0,l.jsx)("hr",{})]}))})]})]})}function f(e){let{id:s}=e,[a,t]=(0,x.useState)(""),{data:n}=(0,p.useSession)(),o={comment:a,reviewId:s,authorId:null==n?void 0:n.user.id},d=async()=>{await r.Z.post("/api/comment/".concat(s),o),t("")};return(0,l.jsxs)("div",{className:"shadow p-3 rounded mb-3",children:[n&&(0,l.jsxs)(h.Z.Group,{className:"mb-3 p-3",controlId:"desc",children:[(0,l.jsx)(h.Z.Label,{children:"Your comment"}),(0,l.jsx)(h.Z.Control,{name:"commentValue",value:a,as:"textarea",className:"mb-3",rows:3,style:{resize:"none"},maxLength:400,placeholder:"Enter your comment",onChange:e=>t(e.target.value)}),(0,l.jsx)(c.Z,{variant:"primary",onClick:d,children:"Send comment"})]}),!n&&(0,l.jsxs)("div",{className:"p-3 d-flex me-5",children:[(0,l.jsx)("p",{className:"m-0",children:"Only registered users can leave a comment."}),"\xa0",(0,l.jsx)(i(),{href:"/register",className:"nav-link text-primary",children:(0,l.jsx)("strong",{children:"Sign up"})}),(0,l.jsx)("p",{className:"m-0",children:"\xa0or\xa0"}),(0,l.jsx)(i(),{href:"/login",className:"nav-link text-primary",children:(0,l.jsx)("strong",{children:"Login"})})]})]})}m.vI.add(u.xiG);var j=a(4033),N=a(9588);function y(e){var s,a;let{params:n}=e,{id:o}=n,c=(0,j.useRouter)(),[d,m]=(0,x.useState)([]),{data:u,error:h,isLoading:p}=(0,t.ZP)("/api/review/".concat(o),async()=>{let e=await r.Z.get("/api/review/".concat(o));return m(JSON.parse(JSON.stringify(e.data.tags))),e.data},{refreshInterval:100});return p?(0,l.jsx)("p",{children:"Loading..."}):h?(console.log(h),(0,l.jsx)("p",{children:h.message})):(u||c.push("/"),(0,l.jsxs)("div",{className:"mb-5",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col col-auto mb-3",style:{maxWidth:"150px"},children:(0,l.jsx)("img",{src:null==u?void 0:u.img,alt:"",className:"object-fit-cover w-100 h-auto",style:{minWidth:"70px"}})}),(0,l.jsxs)("div",{className:"col w-75",style:{minWidth:"240px"},children:[(0,l.jsx)("h2",{children:null==u?void 0:u.titleReview}),(0,l.jsx)("h4",{children:null==u?void 0:u.titleItem}),(0,l.jsxs)("p",{children:["Category:\xa0",null==u?void 0:u.category.name]}),(0,l.jsx)("p",{children:null==d?void 0:d.map(e=>{let s=JSON.parse(e);return s.name+" "})}),(0,l.jsxs)("p",{children:["Author rate: ",null==u?void 0:u.rating]}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("p",{className:"col col-auto me-auto",children:["Likes: ",null==u?void 0:u.likes]}),(0,l.jsxs)("p",{className:"col col-auto",children:["Review written by\xa0",(0,l.jsx)(i(),{href:"/profile/".concat(null==u?void 0:null===(s=u.author)||void 0===s?void 0:s._id),className:"text-primary",children:null==u?void 0:null===(a=u.author)||void 0===a?void 0:a.name})]})]})]})]}),(0,l.jsx)("h4",{children:"Review:"}),(0,l.jsx)(N.D,{className:"mt-4",children:null==u?void 0:u.desc}),(0,l.jsx)("hr",{className:"w-100"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f,{id:o}),(0,l.jsx)(v,{id:o})]})]}))}},4883:function(e,s,a){"use strict";a.d(s,{Z:function(){return R}});var l=a(4440),r=a.n(l),t=a(4275),n=a.n(t),i=a(2265),o=a(7437);let c={type:n().string,tooltip:n().bool,as:n().elementType},d=i.forwardRef(({as:e="div",className:s,type:a="valid",tooltip:l=!1,...t},n)=>(0,o.jsx)(e,{...t,ref:n,className:r()(s,`${a}-${l?"tooltip":"feedback"}`)}));d.displayName="Feedback",d.propTypes=c;var m=a(6681),u=a(7516),h=a(7127);let x=i.forwardRef(({bsPrefix:e,className:s,htmlFor:a,...l},t)=>{let{controlId:n}=(0,i.useContext)(u.Z);return e=(0,h.vE)(e,"form-check-label"),(0,o.jsx)("label",{...l,ref:t,htmlFor:a||n,className:r()(s,e)})});x.displayName="FormCheckLabel";let p=i.forwardRef(({id:e,bsPrefix:s,bsSwitchPrefix:a,inline:l=!1,reverse:t=!1,disabled:n=!1,isValid:c=!1,isInvalid:p=!1,feedbackTooltip:v=!1,feedback:f,feedbackType:j,className:N,style:y,title:g="",type:b="checkbox",label:w,children:Z,as:C="input",...k},$)=>{s=(0,h.vE)(s,"form-check"),a=(0,h.vE)(a,"form-switch");let{controlId:I}=(0,i.useContext)(u.Z),E=(0,i.useMemo)(()=>({controlId:e||I}),[I,e]),F=!Z&&null!=w&&!1!==w||i.Children.toArray(Z).some(e=>i.isValidElement(e)&&e.type===x),R=(0,o.jsx)(m.Z,{...k,type:"switch"===b?"checkbox":b,ref:$,isValid:c,isInvalid:p,disabled:n,as:C});return(0,o.jsx)(u.Z.Provider,{value:E,children:(0,o.jsx)("div",{style:y,className:r()(N,F&&s,l&&`${s}-inline`,t&&`${s}-reverse`,"switch"===b&&a),children:Z||(0,o.jsxs)(o.Fragment,{children:[R,F&&(0,o.jsx)(x,{title:g,children:w}),f&&(0,o.jsx)(d,{type:j,tooltip:v,children:f})]})})})});p.displayName="FormCheck";var v=Object.assign(p,{Input:m.Z,Label:x});a(267);let f=i.forwardRef(({bsPrefix:e,type:s,size:a,htmlSize:l,id:t,className:n,isValid:c=!1,isInvalid:d=!1,plaintext:m,readOnly:x,as:p="input",...v},f)=>{let j;let{controlId:N}=(0,i.useContext)(u.Z);return e=(0,h.vE)(e,"form-control"),j=m?{[`${e}-plaintext`]:!0}:{[e]:!0,[`${e}-${a}`]:a},(0,o.jsx)(p,{...v,type:s,size:l,ref:f,readOnly:x,id:t||N,className:r()(n,j,c&&"is-valid",d&&"is-invalid","color"===s&&`${e}-color`)})});f.displayName="FormControl";var j=Object.assign(f,{Feedback:d}),N=(0,a(2510).Z)("form-floating");let y=i.forwardRef(({controlId:e,as:s="div",...a},l)=>{let r=(0,i.useMemo)(()=>({controlId:e}),[e]);return(0,o.jsx)(u.Z.Provider,{value:r,children:(0,o.jsx)(s,{...a,ref:l})})});y.displayName="FormGroup";let g=i.forwardRef((e,s)=>{let[{className:a,...l},{as:t="div",bsPrefix:n,spans:i}]=function({as:e,bsPrefix:s,className:a,...l}){s=(0,h.vE)(s,"col");let t=(0,h.pi)(),n=(0,h.zG)(),i=[],o=[];return t.forEach(e=>{let a,r,t;let c=l[e];delete l[e],"object"==typeof c&&null!=c?{span:a,offset:r,order:t}=c:a=c;let d=e!==n?`-${e}`:"";a&&i.push(!0===a?`${s}${d}`:`${s}${d}-${a}`),null!=t&&o.push(`order${d}-${t}`),null!=r&&o.push(`offset${d}-${r}`)}),[{...l,className:r()(a,...i,...o)},{as:e,bsPrefix:s,spans:i}]}(e);return(0,o.jsx)(t,{...l,ref:s,className:r()(a,!i.length&&n)})});g.displayName="Col";let b=i.forwardRef(({as:e="label",bsPrefix:s,column:a=!1,visuallyHidden:l=!1,className:t,htmlFor:n,...c},d)=>{let{controlId:m}=(0,i.useContext)(u.Z);s=(0,h.vE)(s,"form-label");let x="col-form-label";"string"==typeof a&&(x=`${x} ${x}-${a}`);let p=r()(t,s,l&&"visually-hidden",a&&x);return(n=n||m,a)?(0,o.jsx)(g,{ref:d,as:"label",className:p,htmlFor:n,...c}):(0,o.jsx)(e,{ref:d,className:p,htmlFor:n,...c})});b.displayName="FormLabel";let w=i.forwardRef(({bsPrefix:e,className:s,id:a,...l},t)=>{let{controlId:n}=(0,i.useContext)(u.Z);return e=(0,h.vE)(e,"form-range"),(0,o.jsx)("input",{...l,type:"range",ref:t,className:r()(s,e),id:a||n})});w.displayName="FormRange";let Z=i.forwardRef(({bsPrefix:e,size:s,htmlSize:a,className:l,isValid:t=!1,isInvalid:n=!1,id:c,...d},m)=>{let{controlId:x}=(0,i.useContext)(u.Z);return e=(0,h.vE)(e,"form-select"),(0,o.jsx)("select",{...d,size:a,ref:m,className:r()(l,e,s&&`${e}-${s}`,t&&"is-valid",n&&"is-invalid"),id:c||x})});Z.displayName="FormSelect";let C=i.forwardRef(({bsPrefix:e,className:s,as:a="small",muted:l,...t},n)=>(e=(0,h.vE)(e,"form-text"),(0,o.jsx)(a,{...t,ref:n,className:r()(s,e,l&&"text-muted")})));C.displayName="FormText";let k=i.forwardRef((e,s)=>(0,o.jsx)(v,{...e,ref:s,type:"switch"}));k.displayName="Switch";var $=Object.assign(k,{Input:v.Input,Label:v.Label});let I=i.forwardRef(({bsPrefix:e,className:s,children:a,controlId:l,label:t,...n},i)=>(e=(0,h.vE)(e,"form-floating"),(0,o.jsxs)(y,{ref:i,className:r()(s,e),controlId:l,...n,children:[a,(0,o.jsx)("label",{htmlFor:l,children:t})]})));I.displayName="FloatingLabel";let E={_ref:n().any,validated:n().bool,as:n().elementType},F=i.forwardRef(({className:e,validated:s,as:a="form",...l},t)=>(0,o.jsx)(a,{...l,ref:t,className:r()(e,s&&"was-validated")}));F.displayName="Form",F.propTypes=E;var R=Object.assign(F,{Group:y,Control:j,Floating:N,Check:v,Switch:$,Label:b,Text:C,Range:w,Select:Z,FloatingLabel:I})},6681:function(e,s,a){"use strict";var l=a(4440),r=a.n(l),t=a(2265),n=a(7516),i=a(7127),o=a(7437);let c=t.forwardRef(({id:e,bsPrefix:s,className:a,type:l="checkbox",isValid:c=!1,isInvalid:d=!1,as:m="input",...u},h)=>{let{controlId:x}=(0,t.useContext)(n.Z);return s=(0,i.vE)(s,"form-check-input"),(0,o.jsx)(m,{...u,ref:h,type:l,id:e||x,className:r()(a,s,c&&"is-valid",d&&"is-invalid")})});c.displayName="FormCheckInput",s.Z=c},7516:function(e,s,a){"use strict";var l=a(2265);let r=l.createContext({});s.Z=r}},function(e){e.O(0,[676,414,222,749,279,929,588,471,480,971,596,744],function(){return e(e.s=6926)}),_N_E=e.O()}]);