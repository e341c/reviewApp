(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5440:function(e,t,a){Promise.resolve().then(a.bind(a,4976))},4976:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var l=a(7437),i=a(9222),n=a(6525),s=a(2115),r=a(2265),o=a(3270),c=a(3795);let d="http://localhost:3000";function u(){let[e,t]=(0,r.useState)([]),[a,u]=(0,r.useState)(""),[h,v]=(0,r.useState)(),{data:x,error:p,isLoading:m}=(0,n.ZP)(d+"/api/review/",async()=>{let e=await i.Z.get(d+"/api/review/");return t(e.data),e.data},{revalidateOnMount:!0,revalidateOnFocus:!1});return m?(0,l.jsx)("p",{children:"Loading..."}):p?(console.log(p),(0,l.jsx)("p",{children:"Something went wrong. Try to reload page"})):(0,l.jsx)("div",{className:"vh-100",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"row mb-4",children:[(0,l.jsx)("h1",{className:"display-3 col col-auto",children:"HOME PAGE"}),(0,l.jsx)("div",{className:"col col-auto",children:(0,l.jsx)(o.Z,{url:"/api/review",getQuery:e=>{u(e)},getReviews:e=>{t(e)}})}),(0,l.jsx)(c.Z,{reviews:e,getSort:e=>{v(e)}})]}),(null==h?void 0:h.length)===0&&(0,l.jsx)("p",{children:"There are no reviews here yet"}),h&&(null==h?void 0:h.map(e=>(0,l.jsx)(s.Z,{main:!0,data:e,highlight:a},e._id)))]})})}},3270:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var l=a(7437),i=a(6716),n=a(4883),s=a(9222),r=a(6525),o=a(3075);function c(e){let{url:t,getCategory:a}=e,{data:i,error:c,isLoading:d}=(0,r.ZP)("http://localhost:3000/api/category",async()=>{let e=await s.Z.get("/api/category");return e.data},{revalidateOnMount:!0,revalidateOnFocus:!1});return(0,l.jsxs)(n.Z.Group,{className:"col col-auto mb-3",children:[(0,l.jsx)(n.Z.Label,{children:"Choice category"}),(0,l.jsx)(o.Z,{children:(0,l.jsxs)(n.Z.Select,{name:"category",placeholder:"Choice category","aria-label":"category",onChange:e=>{a(e.target.value)},children:[(0,l.jsx)("option",{value:"",children:"All categories"}),null==i?void 0:i.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e._id))]})})]})}var d=a(504),u=a(2265),h=a(2759);function v(e){let{url:t,getSearch:a}=e,[s,r]=(0,u.useState)("");return a(s),(0,l.jsxs)(n.Z.Group,{className:"col col-auto mb-3",children:[(0,l.jsx)(n.Z.Label,{children:"Enter review title, text, author or comment"}),(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(o.Z.Text,{className:"text-secondary",children:(0,l.jsx)(d.G,{icon:h.Y$T})}),(0,l.jsx)(n.Z.Control,{placeholder:"Find a review",value:s,"aria-label":"Find a review","aria-describedby":"basic-addon2",onChange:e=>r(e.target.value)}),(0,l.jsx)(i.Z,{variant:"outline-secondary",className:"input-group-text ",id:"basic-addon3",onClick:()=>{r("")},children:(0,l.jsx)(d.G,{icon:h.g82})})]})]})}a(6282);var x=a(3538);function p(e){let{url:t,getTags:a}=e,[i,o]=(0,u.useState)([]),[c,d]=(0,u.useState)([]),{data:h,error:v,isLoading:p}=(0,r.ZP)("http://localhost:3000/api/tags",async()=>{let e=await s.Z.get("/api/tags");return d(e.data.map(e=>e.name)),e.data},{revalidateOnMount:!0,revalidateOnFocus:!1});return a(i),(0,l.jsxs)(n.Z.Group,{className:"col col-auto mb-3",children:[(0,l.jsx)(n.Z.Label,{children:"Choice tags"}),(0,l.jsx)(x.pY,{id:"basic-typeahead-multiple",labelKey:"name",multiple:!0,onChange:o,options:c,placeholder:"Choose several tags...",selected:i,className:"text-body"})]})}function m(e){let{url:t,getReviews:a,getQuery:r}=e,[o,d]=(0,u.useState)(""),[h,x]=(0,u.useState)(""),[m,j]=(0,u.useState)([]),g=async e=>{e.preventDefault();let l=await s.Z.get("http://localhost:3000"+"".concat(t,"?category=").concat(o,"&search=").concat(h,"&tags=").concat(m));a(l.data),r(h)};return(0,l.jsx)("div",{className:"col col-auto mb-3",children:(0,l.jsxs)(n.Z,{onSubmit:g,className:"row",children:[(0,l.jsx)(p,{getTags:e=>{j(e)}}),(0,l.jsx)(c,{getCategory:e=>{d(e)}}),(0,l.jsx)(v,{getSearch:e=>{x(e)}}),(0,l.jsx)(n.Z.Group,{children:(0,l.jsx)(i.Z,{variant:"primary",type:"submit",children:"Search"})})]})})}},2115:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var l=a(7437),i=a(2749),n=a(1396),s=a.n(n),r=a(8829),o=a.n(r),c=a(9588);function d(e){var t,a,n,r,d,u,h;let{main:v,data:x,highlight:p}=e,{data:m,status:j}=(0,i.useSession)();return(0,l.jsxs)("div",{className:"mb-5",children:[(0,l.jsxs)("div",{className:"d-flex",children:[(0,l.jsx)(s(),{href:"/review/".concat(null==x?void 0:x._id),className:"text-decoration-none text-body mt-2 me-3",children:(0,l.jsx)("div",{style:{maxWidth:"150px"},children:(0,l.jsx)("img",{src:null==x?void 0:x.img,alt:"",className:"object-fit-cover w-100 h-auto",style:{minWidth:"70px"}})})}),(0,l.jsxs)("div",{className:"w-75",style:{minWidth:"180px"},children:[(0,l.jsxs)(s(),{href:"/review/".concat(x._id),className:"text-decoration-none text-body",children:[(0,l.jsx)("h2",{children:null==x?void 0:x.titleReview}),(0,l.jsx)("h4",{children:null==x?void 0:x.titleItem}),(0,l.jsx)("p",{children:null==x?void 0:null===(t=x.category)||void 0===t?void 0:t.name}),(0,l.jsx)("p",{children:null==x?void 0:x.tags.map(e=>(0,l.jsx)("span",{className:"rbt-token p-1",children:e+" "}))}),v?(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsx)(o(),{highlightClassName:"bg-warning",searchWords:[p],autoEscape:!0,textToHighlight:(null==x?void 0:null===(a=x.desc)||void 0===a?void 0:a.substring(0,200))+"..."})}):(0,l.jsx)(c.D,{children:null==x?void 0:x.desc}),(0,l.jsxs)("p",{children:["Rate: ",null==x?void 0:x.rating]})]}),(0,l.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,l.jsxs)("p",{children:["Review likes: ",null==x?void 0:null===(n=x.likes)||void 0===n?void 0:n.length]}),(null==x?void 0:null===(r=x.author)||void 0===r?void 0:r.name)&&(0,l.jsxs)("p",{children:["Author: \xa0",(0,l.jsx)(s(),{href:(null==x?void 0:null===(d=x.author)||void 0===d?void 0:d._id)===(null==m?void 0:null===(u=m.user)||void 0===u?void 0:u.id)?"/profile":"/profile/".concat(null==x?void 0:null===(h=x.author)||void 0===h?void 0:h._id),className:"text-primary",children:null==x?void 0:x.author.name})]})]})]})]}),(0,l.jsx)("hr",{className:"w-100"})]})}},3795:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var l=a(7437),i=a(2265),n=a(4883);function s(e){let{reviews:t,getSort:a}=e,[s,r]=(0,i.useState)("");return""===s&&a(t),(0,l.jsx)("div",{className:"mb-3 col col-auto",children:(0,l.jsxs)(n.Z.Group,{children:[(0,l.jsx)(n.Z.Label,{children:"Sort by"}),(0,l.jsxs)(n.Z.Select,{name:"sort",placeholder:"Sort by","aria-label":"Sort",onChange:e=>{let l=e.target.value;r(l),("title-descending"===l||"title-ascending"===l)&&("title-descending"===l&&t.sort((e,t)=>{let a=e.titleReview.toUpperCase(),l=t.titleReview.toUpperCase();return a<l?1:a>l?-1:0}),"title-ascending"===l&&t.sort((e,t)=>{let a=e.titleReview.toUpperCase(),l=t.titleReview.toUpperCase();return a>l?1:a<l?-1:0}),a(t));let i=t.map(e=>({...e,createdAt:new Date(e.createdAt)}));"date-last"===l&&i.sort((e,t)=>Number(t.createdAt)-Number(e.createdAt)),"date-new"===l&&i.sort((e,t)=>Number(e.createdAt)-Number(t.createdAt)),a(i)},value:s,children:[(0,l.jsx)("option",{value:"",children:"Select Sort Type"}),(0,l.jsx)("option",{value:"title-ascending",children:"Review title ascending"}),(0,l.jsx)("option",{value:"title-descending",children:"Review title descending"}),(0,l.jsx)("option",{value:"date-last",children:"Date latest"}),(0,l.jsx)("option",{value:"date-new",children:"Date oldest"})]})]})})}}},function(e){e.O(0,[676,504,749,222,883,98,471,195,333,588,971,596,744],function(){return e(e.s=5440)}),_N_E=e.O()}]);