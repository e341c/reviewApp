(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{6245:function(e,i,s){Promise.resolve().then(s.bind(s,3952))},3952:function(e,i,s){"use strict";s.r(i),s.d(i,{default:function(){return j}});var t=s(7437),a=s(1279),n=s(2759),l=s(1396),r=s.n(l),c=s(2749),d=s(6525),o=s(9222),u=s(6716),h=s(6526),x=s(2265),v=s(3270),m=s(1512);function j(e){let{params:i}=e,[s,l]=(0,x.useState)([]),[j,p]=(0,x.useState)(""),{data:g,status:f}=(0,c.useSession)(),y=null==g?void 0:g.user.id,{data:b,error:N,isLoading:Z}=(0,d.ZP)("/api/profile/".concat(y),async()=>{let e=await o.Z.get("/api/profile/".concat(y));return l(e.data),e.data},{revalidateOnMount:!0,revalidateOnFocus:!1});if(Z)return(0,t.jsxs)("div",{className:"vh-100",children:[" ",(0,t.jsx)(m.Z,{})," "]});if(N)return console.log(N),(0,t.jsx)("p",{children:"Something went wrong. Try to reload page"});let w=[];return null==s||s.filter(e=>{e.likes.length>0&&w.push(...e.likes)}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"row",style:{marginTop:"80px"},children:[(0,t.jsxs)("div",{className:"row mb-3",children:[(0,t.jsx)("h3",{className:"mb-4",children:"Your profile"}),(0,t.jsx)("div",{className:"col col-md-3 mb-4",style:{minWidth:"260px"},children:(0,t.jsxs)("div",{className:"p-4 shadow rounded",children:[(0,t.jsx)("p",{children:null==g?void 0:g.user.name}),(0,t.jsx)("p",{children:null==g?void 0:g.user.email}),(0,t.jsxs)("p",{children:["Reviews:\xa0",(0,t.jsxs)("strong",{children:[" ",null==s?void 0:s.length," "]})]}),(0,t.jsxs)("p",{children:["Likes:\xa0",(0,t.jsx)("strong",{children:w.length}),"\xa0",(0,t.jsx)(a.G,{icon:n.m6i})]}),y===(null==g?void 0:g.user.id)&&(0,t.jsx)(u.Z,{variant:"outline-danger",onClick:()=>(0,c.signOut)(),children:"Log Out"})]})}),(0,t.jsx)("div",{className:"col",children:(0,t.jsx)(v.Z,{url:"/api/profile/".concat(y),getQuery:e=>{p(e)},getReviews:e=>{l(e)}})})]}),(0,t.jsxs)("div",{className:"col",style:{minWidth:"70%"},children:[(0,t.jsxs)("div",{className:"mb-4 d-flex justify-content-between",children:[(0,t.jsx)("h3",{children:"Your reviews"}),y===(null==g?void 0:g.user.id)&&(0,t.jsx)("div",{className:"",children:(0,t.jsxs)(r(),{href:"/review/add",className:"btn btn-primary",children:[(0,t.jsx)(a.G,{icon:n.r8p,style:{width:"14px",height:"16px"}}),"\xa0 Add new"]})})]}),0===s.length&&(0,t.jsx)("p",{children:"There are no reviews here yet"}),null==s?void 0:s.map(e=>(0,t.jsx)(h.Z,{data:e,id:y,highlight:j}))]})]})})}},3270:function(e,i,s){"use strict";s.d(i,{Z:function(){return j}});var t=s(7437),a=s(6716),n=s(4883),l=s(9222),r=s(6525),c=s(3075);function d(e){let{url:i,getCategory:s}=e,{data:a,error:d,isLoading:o}=(0,r.ZP)("http://localhost:3000/api/category",async()=>{let e=await l.Z.get("/api/category");return e.data},{revalidateOnMount:!0,revalidateOnFocus:!1});return(0,t.jsxs)(n.Z.Group,{className:"col col-auto mb-3",children:[(0,t.jsx)(n.Z.Label,{children:"Choice category"}),(0,t.jsx)(c.Z,{children:(0,t.jsxs)(n.Z.Select,{name:"category",placeholder:"Choice category","aria-label":"category",onChange:e=>{s(e.target.value)},children:[(0,t.jsx)("option",{value:"",children:"All categories"}),null==a?void 0:a.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.key))]})})]})}var o=s(1279),u=s(2265),h=s(2759);function x(e){let{url:i,getSearch:s}=e,[l,r]=(0,u.useState)("");return s(l),(0,t.jsxs)(n.Z.Group,{className:"col col-auto mb-3",children:[(0,t.jsx)(n.Z.Label,{children:"Enter review title, text, author or comment"}),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(c.Z.Text,{className:"text-secondary",children:(0,t.jsx)(o.G,{icon:h.Y$T})}),(0,t.jsx)(n.Z.Control,{placeholder:"Find a review",value:l,"aria-label":"Find a review","aria-describedby":"basic-addon2",onChange:e=>r(e.target.value)}),(0,t.jsx)(a.Z,{variant:"outline-secondary",className:"input-group-text ",id:"basic-addon3",onClick:()=>{r("")},children:(0,t.jsx)(o.G,{icon:h.g82})})]})]})}s(6282);var v=s(3538);function m(e){let{url:i,getTags:s}=e,[a,c]=(0,u.useState)([]),[d,o]=(0,u.useState)([]),{data:h,error:x,isLoading:m}=(0,r.ZP)("http://localhost:3000/api/tags",async()=>{let e=await l.Z.get("/api/tags");return o(e.data.map(e=>e.name)),e.data},{revalidateOnMount:!0,revalidateOnFocus:!1});return s(a),(0,t.jsxs)(n.Z.Group,{className:"col col-auto mb-3",children:[(0,t.jsx)(n.Z.Label,{children:"Choice tags"}),(0,t.jsx)(v.pY,{id:"basic-typeahead-multiple",labelKey:"name",multiple:!0,onChange:c,options:d,placeholder:"Choose several tags...",selected:a,className:"text-body"})]})}function j(e){let{url:i,getReviews:s,getQuery:r}=e,[c,o]=(0,u.useState)(""),[h,v]=(0,u.useState)(""),[j,p]=(0,u.useState)([]);console.log(j,h,c);let g=async e=>{e.preventDefault();let t=await l.Z.get("http://localhost:3000"+"".concat(i,"?category=").concat(c,"&search=").concat(h,"&tags=").concat(j));s(t.data),r(h)};return(0,t.jsx)("div",{className:"col col-auto",children:(0,t.jsxs)(n.Z,{onSubmit:g,className:"row",children:[(0,t.jsx)(m,{getTags:e=>{p(e)}}),(0,t.jsx)(d,{getCategory:e=>{o(e)}}),(0,t.jsx)(x,{getSearch:e=>{v(e)}}),(0,t.jsx)(n.Z.Group,{children:(0,t.jsx)(a.Z,{variant:"primary",type:"submit",children:"Search"})})]})})}},1512:function(e,i,s){"use strict";s.d(i,{Z:function(){return n}});var t=s(7437),a=s(9639);function n(){return(0,t.jsx)("div",{className:"w-100 h-100 position-absolute z-2 d-flex justify-content-center align-items-center",children:(0,t.jsxs)("div",{className:"py-4 px-5 bg-primary rounded d-flex justify-content-center align-items-center",children:[(0,t.jsx)(a.Z,{animation:"border",variant:"light"}),"\xa0",(0,t.jsx)("p",{className:"m-0 text-light",children:"Loading... Please wait"})]})})}},6526:function(e,i,s){"use strict";s.d(i,{Z:function(){return u}});var t=s(7437),a=s(9222),n=s(2749),l=s(1396),r=s.n(l);s(2265);var c=s(2615),d=s(8829),o=s.n(d);function u(e){var i,s;let{data:l,id:d,highlight:u}=e,{data:h,status:x}=(0,n.useSession)();return(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"row",children:[(0,t.jsxs)(r(),{href:"/review/".concat(null==l?void 0:l._id),className:"col text-decoration-none text-body d-flex ",children:[(0,t.jsx)("div",{className:"mt-2 me-3",style:{maxWidth:"150px"},children:(0,t.jsx)("img",{src:null==l?void 0:l.img,alt:"",className:"object-fit-cover w-100 h-auto",style:{minWidth:"70px"}})}),(0,t.jsxs)("div",{style:{minWidth:"180px"},children:[(0,t.jsx)("h2",{children:null==l?void 0:l.titleReview}),(0,t.jsx)("h4",{children:null==l?void 0:l.titleItem}),(0,t.jsx)("p",{children:null==l?void 0:null===(i=l.category)||void 0===i?void 0:i.name}),(0,t.jsx)("p",{children:null==l?void 0:l.tags.map(e=>(0,t.jsx)("span",{className:"rbt-token p-1",children:e+" "}))}),(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)(o(),{highlightClassName:"bg-warning",searchWords:[u],autoEscape:!0,textToHighlight:(null==l?void 0:null===(s=l.desc)||void 0===s?void 0:s.substring(0,200))+"..."})}),(0,t.jsxs)("p",{children:["Rate: ",null==l?void 0:l.rating]}),(0,t.jsx)("div",{className:"d-flex justify-content-between",children:(0,t.jsxs)("p",{children:["Review likes: ",null==l?void 0:l.likes.length]})})]})]}),(d===(null==h?void 0:h.user.id)||(null==h?void 0:h.user.admin))&&(0,t.jsxs)(c.Z,{className:"col col-auto",children:[(0,t.jsx)(c.Z.Toggle,{variant:"secondary",id:"dropdown-basic",children:"More actions"}),(0,t.jsxs)(c.Z.Menu,{children:[(0,t.jsx)(c.Z.Item,{href:"/review/edit/".concat(null==l?void 0:l._id),children:"Edit"}),(0,t.jsx)(c.Z.Divider,{}),(0,t.jsx)(c.Z.Item,{className:"text-danger",onClick:()=>a.Z.delete("/api/review/delete/".concat(null==l?void 0:l._id)),children:"Delete"})]})]})]})}),(0,t.jsx)("hr",{className:"w-100"})]},null==l?void 0:l._id)}},9639:function(e,i,s){"use strict";var t=s(4440),a=s.n(t),n=s(2265),l=s(7127),r=s(7437);let c=n.forwardRef(({bsPrefix:e,variant:i,animation:s="border",size:t,as:n="div",className:c,...d},o)=>{e=(0,l.vE)(e,"spinner");let u=`${e}-${s}`;return(0,r.jsx)(n,{ref:o,...d,className:a()(c,u,t&&`${u}-${t}`,i&&`text-${i}`)})});c.displayName="Spinner",i.Z=c}},function(e){e.O(0,[676,504,749,222,883,279,471,195,333,615,971,596,744],function(){return e(e.s=6245)}),_N_E=e.O()}]);