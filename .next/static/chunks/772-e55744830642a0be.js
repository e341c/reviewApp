"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{3772:function(e,t,r){let n,s,i,o,a,l,c,d;function p(e){return this instanceof p?(this.v=e,this):new p(e)}function u(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),i=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){s[e]&&(n[e]=function(t){return new Promise(function(r,n){i.push([e,t,r,n])>1||a(e,t)})})}function a(e,t){try{var r;(r=s[e](t)).value instanceof p?Promise.resolve(r.value.v).then(l,c):d(i[0][2],r)}catch(e){d(i[0][3],e)}}function l(e){a("next",e)}function c(e){a("throw",e)}function d(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function m(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,s){t[n]=e[n]?function(t){return(r=!r)?{value:p(e[n](t)),done:!1}:s?s(t):t}:s}}function h(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,s){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,s,(t=e[r](t)).done,t.value)})}}}r.d(t,{N:function(){return av}}),"function"==typeof SuppressedError&&SuppressedError;var g,y,f,b,v,S,P,C,R,x,O,w,E,N,M,T,I,A,B,q,j,k,z,H,L,_,D,U,$,F,V,K,X,G=r(5566);"undefined"!=typeof window&&window.document,"object"==typeof self&&"function"==typeof(null==self?void 0:self.importScripts)&&((null===(M=self.constructor)||void 0===M?void 0:M.name)==="DedicatedWorkerGlobalScope"||(null===(T=self.constructor)||void 0===T?void 0:T.name)==="ServiceWorkerGlobalScope"||null===(I=self.constructor)||void 0===I||I.name);let Q=void 0!==G&&!!G.version&&!!(null===(A=G.versions)||void 0===A?void 0:A.node);function W(e){return e&&"function"==typeof e.getToken&&(void 0===e.signRequest||e.getToken.length>0)}"undefined"!=typeof Deno&&void 0!==Deno.version&&Deno.version.deno,"undefined"!=typeof Bun&&Bun.version,"undefined"!=typeof navigator&&(null==navigator||navigator.product);let J=Error("ProxyPolicy is not supported in browser environment");function Y(e){}function Z(e){return{create:(e,t)=>{throw J}}}var ee="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof r.g?r.g:{},et="1.4.1",er=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,en=function(e){var t=new Set([e]),r=new Set,n=e.match(er);if(!n)return function(){return!1};var s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=s.prerelease)return function(t){return t===e};function i(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(er);if(!n)return i(e);var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};return null!=o.prerelease||s.major!==o.major?i(e):0===s.major?s.minor===o.minor&&s.patch<=o.patch?(t.add(e),!0):i(e):s.minor<=o.minor?(t.add(e),!0):i(e)}}(et),es=Symbol.for("opentelemetry.js.api."+et.split(".")[0]);function ei(e,t,r,n){void 0===n&&(n=!1);var s,i=ee[es]=null!==(s=ee[es])&&void 0!==s?s:{version:et};if(!n&&i[e]){var o=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(o.stack||o.message),!1}if(i.version!==et){var o=Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+et);return r.error(o.stack||o.message),!1}return i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+et+"."),!0}function eo(e){var t,r,n=null===(t=ee[es])||void 0===t?void 0:t.version;if(n&&en(n))return null===(r=ee[es])||void 0===r?void 0:r[e]}function ea(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+et+".");var r=ee[es];r&&delete r[e]}var el=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var s=new e(r._currentContext);return s._currentContext.set(t,n),s},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}},ec=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o},ed=function(e,t,r){if(r||2==arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},ep=function(){function e(){}return e.prototype.active=function(){return el},e.prototype.with=function(e,t,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];return t.call.apply(t,ed([r],ec(n),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),eu=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o},em=function(e,t,r){if(r||2==arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},eh=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return eg("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return eg("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return eg("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return eg("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return eg("verbose",this._namespace,e)},e}();function eg(e,t,r){var n=eo("diag");if(n)return r.unshift(t),n[e].apply(n,em([],eu(r),!1))}(g=B||(B={}))[g.NONE=0]="NONE",g[g.ERROR=30]="ERROR",g[g.WARN=50]="WARN",g[g.INFO=60]="INFO",g[g.DEBUG=70]="DEBUG",g[g.VERBOSE=80]="VERBOSE",g[g.ALL=9999]="ALL";var ey=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o},ef=function(e,t,r){if(r||2==arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},eb=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=eo("diag");if(n)return n[e].apply(n,ef([],ey(t),!1))}}var t=this;t.setLogger=function(e,r){if(void 0===r&&(r={logLevel:B.INFO}),e===t){var n,s,i,o=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(n=o.stack)&&void 0!==n?n:o.message),!1}"number"==typeof r&&(r={logLevel:r});var a=eo("diag"),l=function(e,t){function r(r,n){var s=t[r];return"function"==typeof s&&e>=n?s.bind(t):function(){}}return e<B.NONE?e=B.NONE:e>B.ALL&&(e=B.ALL),t=t||{},{error:r("error",B.ERROR),warn:r("warn",B.WARN),info:r("info",B.INFO),debug:r("debug",B.DEBUG),verbose:r("verbose",B.VERBOSE)}}(null!==(s=r.logLevel)&&void 0!==s?s:B.INFO,e);if(a&&!r.suppressOverrideMessage){var c=null!==(i=Error().stack)&&void 0!==i?i:"<failed to generate stacktrace>";a.warn("Current logger will be overwritten from "+c),l.warn("Current logger will overwrite one already registered from "+c)}return ei("diag",l,t,!0)},t.disable=function(){ea("diag",t)},t.createComponentLogger=function(e){return new eh(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),ev=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o},eS=function(e,t,r){if(r||2==arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},eP="context",eC=new ep,eR=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return ei(eP,e,eb.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var n,s=[],i=3;i<arguments.length;i++)s[i-3]=arguments[i];return(n=this._getContextManager()).with.apply(n,eS([e,t,r],ev(s),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return eo(eP)||eC},e.prototype.disable=function(){this._getContextManager().disable(),ea(eP,eb.instance())},e}();(y=q||(q={}))[y.NONE=0]="NONE",y[y.SAMPLED=1]="SAMPLED";var ex="0000000000000000",eO="00000000000000000000000000000000",ew={traceId:eO,spanId:ex,traceFlags:q.NONE},eE=function(){function e(e){void 0===e&&(e=ew),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),eN=Symbol.for("OpenTelemetry Context Key SPAN");function eM(e){return e.getValue(eN)||void 0}function eT(){return eM(eR.getInstance().active())}function eI(e,t){return e.setValue(eN,t)}function eA(e){return e.deleteValue(eN)}function eB(e,t){return eI(e,new eE(t))}function eq(e){var t;return null===(t=eM(e))||void 0===t?void 0:t.spanContext()}var ej=/^([0-9a-f]{32})$/i,ek=/^[0-9a-f]{16}$/i;function ez(e){var t,r;return t=e.traceId,ej.test(t)&&t!==eO&&(r=e.spanId,ek.test(r)&&r!==ex)}function eH(e){return new eE(e)}var eL=eR.getInstance(),e_=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(void 0===r&&(r=eL.active()),null==t?void 0:t.root)return new eE;var n=r&&eq(r);return"object"==typeof n&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&ez(n)?new eE(n):new eE},e.prototype.startActiveSpan=function(e,t,r,n){if(!(arguments.length<2)){2==arguments.length?o=t:3==arguments.length?(s=t,o=r):(s=t,i=r,o=n);var s,i,o,a=null!=i?i:eL.active(),l=this.startSpan(e,s,a),c=eI(a,l);return eL.with(c,o,void 0,l)}},e}(),eD=new e_,eU=function(){function e(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):eD},e}(),e$=new(function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new e_},e}()),eF=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var n;return null!==(n=this.getDelegateTracer(e,t,r))&&void 0!==n?n:new eU(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:e$},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,r)},e}(),eV="trace",eK=(function(){function e(){this._proxyTracerProvider=new eF,this.wrapSpanContext=eH,this.isSpanContextValid=ez,this.deleteSpan=eA,this.getSpan=eM,this.getActiveSpan=eT,this.getSpanContext=eq,this.setSpan=eI,this.setSpanContext=eB}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=ei(eV,this._proxyTracerProvider,eb.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return eo(eV)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){ea(eV,eb.instance()),this._proxyTracerProvider=new eF},e})().getInstance(),eX=eR.getInstance();function eG(e){let{requestOptions:t,tracingOptions:r}=e,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)0>t.indexOf(n[s])&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}(e,["requestOptions","tracingOptions"]),s=n;return t&&(s=Object.assign(Object.assign({},s),t)),r&&(s.tracingContext=r.tracingContext,s.spanOptions=null==r?void 0:r.spanOptions),s}function eQ(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function eW(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}(f=j||(j={}))[f.INTERNAL=0]="INTERNAL",f[f.SERVER=1]="SERVER",f[f.CLIENT=2]="CLIENT",f[f.PRODUCER=3]="PRODUCER",f[f.CONSUMER=4]="CONSUMER",(b=k||(k={}))[b.UNSET=0]="UNSET",b[b.OK=1]="OK",b[b.ERROR=2]="ERROR";for(var eJ=new Uint8Array(16),eY=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,eZ=[],e0=0;e0<256;++e0)eZ.push((e0+256).toString(16).substr(1));var e1=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(eZ[e[t+0]]+eZ[e[t+1]]+eZ[e[t+2]]+eZ[e[t+3]]+"-"+eZ[e[t+4]]+eZ[e[t+5]]+"-"+eZ[e[t+6]]+eZ[e[t+7]]+"-"+eZ[e[t+8]]+eZ[e[t+9]]+"-"+eZ[e[t+10]]+eZ[e[t+11]]+eZ[e[t+12]]+eZ[e[t+13]]+eZ[e[t+14]]+eZ[e[t+15]]).toLowerCase();if(!("string"==typeof r&&eY.test(r)))throw TypeError("Stringified UUID is invalid");return r},e2=function(e,t,r){var n=(e=e||{}).random||(e.rng||function(){if(!z&&!(z="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return z(eJ)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=n[s];return t}return e1(n)};r(5566);let e4=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,e5=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function e3(e,t,r){return e&&t?e.split(t).join(r||""):e}class e6{constructor(e={},t){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,r){let n=(e,n)=>{throw Error(`"${r}" with value "${t}" should satisfy the constraint "${e}": ${n}.`)};if(e.constraints&&void 0!=t){let{ExclusiveMaximum:r,ExclusiveMinimum:s,InclusiveMaximum:i,InclusiveMinimum:o,MaxItems:a,MaxLength:l,MinItems:c,MinLength:d,MultipleOf:p,Pattern:u,UniqueItems:m}=e.constraints;if(void 0!=r&&t>=r&&n("ExclusiveMaximum",r),void 0!=s&&t<=s&&n("ExclusiveMinimum",s),void 0!=i&&t>i&&n("InclusiveMaximum",i),void 0!=o&&t<o&&n("InclusiveMinimum",o),void 0!=a&&t.length>a&&n("MaxItems",a),void 0!=l&&t.length>l&&n("MaxLength",l),void 0!=c&&t.length<c&&n("MinItems",c),void 0!=d&&t.length<d&&n("MinLength",d),void 0!=p&&t%p!=0&&n("MultipleOf",p),u){let e="string"==typeof u?new RegExp(u):u;("string"!=typeof t||null===t.match(e))&&n("Pattern",u)}m&&t.some((e,t,r)=>r.indexOf(e)!==t)&&n("UniqueItems",m)}}serialize(e,t,r,n={}){var s,i,o;let a={rootName:null!==(s=n.rootName)&&void 0!==s?s:"",includeRoot:null!==(i=n.includeRoot)&&void 0!==i&&i,xmlCharKey:null!==(o=n.xmlCharKey)&&void 0!==o?o:"_"},l={},c=e.type.name;r||(r=e.serializedName),null!==c.match(/^Sequence$/i)&&(l=[]),e.isConstant&&(t=e.defaultValue);let{required:d,nullable:p}=e;if(d&&p&&void 0===t)throw Error(`${r} cannot be undefined.`);if(d&&!p&&void 0==t)throw Error(`${r} cannot be null or undefined.`);if(!d&&!1===p&&null===t)throw Error(`${r} cannot be null.`);return void 0==t?l=t:null!==c.match(/^any$/i)?l=t:null!==c.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?l=function(e,t,r){if(null!=r){if(null!==e.match(/^Number$/i)){if("number"!=typeof r)throw Error(`${t} with value ${r} must be of type number.`)}else if(null!==e.match(/^String$/i)){if("string"!=typeof r.valueOf())throw Error(`${t} with value "${r}" must be of type string.`)}else if(null!==e.match(/^Uuid$/i)){if(!("string"==typeof r.valueOf()&&e4.test(r)))throw Error(`${t} with value "${r}" must be of type string and a valid uuid.`)}else if(null!==e.match(/^Boolean$/i)){if("boolean"!=typeof r)throw Error(`${t} with value ${r} must be of type boolean.`)}else if(null!==e.match(/^Stream$/i)){let e=typeof r;if("string"!==e&&"function"!==e&&!(r instanceof ArrayBuffer)&&!ArrayBuffer.isView(r)&&!(("function"==typeof Blob||"object"==typeof Blob)&&r instanceof Blob))throw Error(`${t} must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.`)}}return r}(c,r,t):null!==c.match(/^Enum$/i)?l=function(e,t,r){if(!t)throw Error(`Please provide a set of allowedValues to validate ${e} as an Enum Type.`);let n=t.some(e=>"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r);if(!n)throw Error(`${r} is not a valid value for ${e}. The valid values are: ${JSON.stringify(t)}.`);return r}(r,e.type.allowedValues,t):null!==c.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?l=function(e,t,r){if(void 0!=t){if(null!==e.match(/^Date$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw Error(`${r} must be an instanceof Date or a string in RFC-1123 format.`);t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw Error(`${r} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);t=function(e){if(e)return"string"==typeof e.valueOf()&&(e=new Date(e)),Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/i)){var n;if(n=t,!e5.test(n))throw Error(`${r} must be a string in ISO 8601 format. Instead was "${t}".`)}}return t}(c,t,r):null!==c.match(/^ByteArray$/i)?l=function(e,t){let r="";if(void 0!=t){if(!(t instanceof Uint8Array))throw Error(`${e} must be of type Uint8Array.`);r=eQ(t)}return r}(r,t):null!==c.match(/^Base64Url$/i)?l=function(e,t){let r="";if(void 0!=t){if(!(t instanceof Uint8Array))throw Error(`${e} must be of type Uint8Array.`);r=function(e){if(!e)return;if(!(e instanceof Uint8Array))throw Error("Please provide an input of type Uint8Array for converting to Base64Url.");let t=eQ(e);return(function(e,t){let r=e.length;for(;r-1>=0&&"="===e[r-1];)--r;return e.substr(0,r)})(t,0).replace(/\+/g,"-").replace(/\//g,"_")}(t)||""}return r}(r,t):null!==c.match(/^Sequence$/i)?l=function(e,t,r,n,s,i){if(!Array.isArray(r))throw Error(`${n} must be of type Array.`);let o=t.type.element;if(!o||"object"!=typeof o)throw Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}.`);let a=[];for(let t=0;t<r.length;t++){let l=e.serialize(o,r[t],n,i);if(s&&o.xmlNamespace){let e=o.xmlNamespacePrefix?`xmlns:${o.xmlNamespacePrefix}`:"xmlns";"Composite"===o.type.name?a[t]=Object.assign({},l):(a[t]={},a[t][i.xmlCharKey]=l),a[t].$={[e]:o.xmlNamespace}}else a[t]=l}return a}(this,e,t,r,!!this.isXML,a):null!==c.match(/^Dictionary$/i)?l=function(e,t,r,n,s,i){if("object"!=typeof r)throw Error(`${n} must be of type object.`);let o=t.type.value;if(!o||"object"!=typeof o)throw Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}.`);let a={};for(let t of Object.keys(r)){let l=e.serialize(o,r[t],n,i);a[t]=te(o,l,s,i)}if(s&&t.xmlNamespace){let e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns";return a.$={[e]:t.xmlNamespace},a}return a}(this,e,t,r,!!this.isXML,a):null!==c.match(/^Composite$/i)&&(l=function(e,t,r,n,s,i){if(tr(e,t)&&(t=tt(e,t,r,"clientName")),void 0!=r){let o={},a=e7(e,t,n);for(let l of Object.keys(a)){let c;let d=a[l];if(d.readOnly)continue;let p=o;if(e.isXML)c=d.xmlIsWrapped?d.xmlName:d.xmlElementName||d.xmlName;else{let e=e9(d.serializedName);for(let t of(c=e.pop(),e)){let e=p[t];void 0==e&&(void 0!=r[l]||void 0!==d.defaultValue)&&(p[t]={}),p=p[t]}}if(void 0!=p){if(s&&t.xmlNamespace){let e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns";p.$=Object.assign(Object.assign({},p.$),{[e]:t.xmlNamespace})}let o=""!==d.serializedName?n+"."+d.serializedName:n,a=r[l],u=tr(e,t);u&&u.clientName===l&&void 0==a&&(a=t.serializedName);let m=e.serialize(d,a,o,i);if(void 0!==m&&void 0!=c){let e=te(d,m,s,i);s&&d.xmlIsAttribute?(p.$=p.$||{},p.$[c]=m):s&&d.xmlIsWrapped?p[c]={[d.xmlElementName]:e}:p[c]=e}}}let l=function(e,t,r){let n=t.type.additionalProperties;if(!n&&t.type.className){let n=e8(e,t,r);return null==n?void 0:n.type.additionalProperties}return n}(e,t,n);if(l){let t=Object.keys(a);for(let s in r){let a=t.every(e=>e!==s);a&&(o[s]=e.serialize(l,r[s],n+'["'+s+'"]',i))}}return o}return r}(this,e,t,r,!!this.isXML,a)),l}deserialize(e,t,r,n={}){var s,i,o;let a;let l={rootName:null!==(s=n.rootName)&&void 0!==s?s:"",includeRoot:null!==(i=n.includeRoot)&&void 0!==i&&i,xmlCharKey:null!==(o=n.xmlCharKey)&&void 0!==o?o:"_"};if(void 0==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),void 0!==e.defaultValue&&(t=e.defaultValue),t;let c=e.type.name;if(r||(r=e.serializedName),null!==c.match(/^Composite$/i))a=function(e,t,r,n,s){var i,o;let a=null!==(i=s.xmlCharKey)&&void 0!==i?i:"_";tr(e,t)&&(t=tt(e,t,r,"serializedName"));let l=e7(e,t,n),c={},d=[];for(let i of Object.keys(l)){let p=l[i],u=e9(l[i].serializedName);d.push(u[0]);let{serializedName:m,xmlName:h,xmlElementName:g}=p,y=n;""!==m&&void 0!==m&&(y=n+"."+m);let f=p.headerCollectionPrefix;if(f){let t={};for(let n of Object.keys(r))n.startsWith(f)&&(t[n.substring(f.length)]=e.deserialize(p.type.value,r[n],y,s)),d.push(n);c[i]=t}else if(e.isXML){if(p.xmlIsAttribute&&r.$)c[i]=e.deserialize(p,r.$[h],y,s);else if(p.xmlIsMsText)void 0!==r[a]?c[i]=r[a]:"string"==typeof r&&(c[i]=r);else{let t=g||h||m;if(p.xmlIsWrapped){let t=r[h],n=null!==(o=null==t?void 0:t[g])&&void 0!==o?o:[];c[i]=e.deserialize(p,n,y,s),d.push(h)}else{let n=r[t];c[i]=e.deserialize(p,n,y,s),d.push(t)}}}else{let n,o;let a=r;for(let e of u){if(!a)break;a=a[e]}n=a;let d=t.type.polymorphicDiscriminator;if(d&&i===d.clientName&&void 0==n&&(n=t.serializedName),Array.isArray(r[i])&&""===l[i].serializedName){n=r[i];let t=e.deserialize(p,n,y,s);for(let[e,r]of Object.entries(c))Object.prototype.hasOwnProperty.call(t,e)||(t[e]=r);c=t}else(void 0!==n||void 0!==p.defaultValue)&&(o=e.deserialize(p,n,y,s),c[i]=o)}}let p=t.type.additionalProperties;if(p){let t=e=>{for(let t in l){let r=e9(l[t].serializedName);if(r[0]===e)return!1}return!0};for(let i in r)t(i)&&(c[i]=e.deserialize(p,r[i],n+'["'+i+'"]',s))}else if(r)for(let e of Object.keys(r))void 0!==c[e]||d.includes(e)||["$",s.xmlCharKey].includes(e)||(c[e]=r[e]);return c}(this,e,t,r,l);else{if(this.isXML){let e=l.xmlCharKey,r=t;void 0!=r.$&&void 0!=r[e]&&(t=r[e])}null!==c.match(/^Number$/i)?isNaN(a=parseFloat(t))&&(a=t):null!==c.match(/^Boolean$/i)?a="true"===t||"false"!==t&&t:null!==c.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?a=t:null!==c.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?a=new Date(t):null!==c.match(/^UnixTime$/i)?a=function(e){if(e)return new Date(1e3*e)}(t):null!==c.match(/^ByteArray$/i)?a=eW(t):null!==c.match(/^Base64Url$/i)?a=function(e){if(e){if(e&&"string"!=typeof e.valueOf())throw Error("Please provide an input of type string for converting to Uint8Array");return eW(e=e.replace(/-/g,"+").replace(/_/g,"/"))}}(t):null!==c.match(/^Sequence$/i)?a=function(e,t,r,n,s){let i=t.type.element;if(!i||"object"!=typeof i)throw Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}`);if(r){Array.isArray(r)||(r=[r]);let t=[];for(let o=0;o<r.length;o++)t[o]=e.deserialize(i,r[o],`${n}[${o}]`,s);return t}return r}(this,e,t,r,l):null!==c.match(/^Dictionary$/i)&&(a=function(e,t,r,n,s){let i=t.type.value;if(!i||"object"!=typeof i)throw Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}`);if(r){let t={};for(let o of Object.keys(r))t[o]=e.deserialize(i,r[o],n,s);return t}return r}(this,e,t,r,l))}return e.isConstant&&(a=e.defaultValue),a}}function e9(e){let t=[],r="";if(e){let n=e.split(".");for(let e of n)"\\"===e.charAt(e.length-1)?r+=e.substr(0,e.length-1)+".":(r+=e,t.push(r),r="")}return t}function e8(e,t,r){let n=t.type.className;if(!n)throw Error(`Class name for model "${r}" is not provided in the mapper "${JSON.stringify(t,void 0,2)}".`);return e.modelMappers[n]}function e7(e,t,r){let n=t.type.modelProperties;if(!n){let s=e8(e,t,r);if(!s)throw Error(`mapper() cannot be null or undefined for model "${t.type.className}".`);if(!(n=null==s?void 0:s.type.modelProperties))throw Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(s)}" of type "${t.type.className}" for object "${r}".`)}return n}function te(e,t,r,n){if(!r||!e.xmlNamespace)return t;let s=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns",i={[s]:e.xmlNamespace};if(["Composite"].includes(e.type.name)){if(t.$)return t;{let e=Object.assign({},t);return e.$=i,e}}let o={};return o[n.xmlCharKey]=t,o.$=i,o}function tt(e,t,r,n){let s=tr(e,t);if(s){let i=s[n];if(void 0!=i){let n=r[i];if(void 0!=n){let r=t.type.uberParent||t.type.className,s=e.modelMappers.discriminators[n===r?n:r+"."+n];s&&(t=s)}}}return t}function tr(e,t){return t.type.polymorphicDiscriminator||tn(e,t.type.uberParent)||tn(e,t.type.className)}function tn(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}let ts=function(e){let t={};for(let r of e)t[r]=r;return t}(["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"]);var ti=r(2882);(v=H||(H={})).Csv=",",v.Ssv=" ",v.Tsv="	",v.Pipes="|",v.Multi="Multi";let to={parameterPath:["options","contentType"],mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},ta={parameterPath:"blobServiceProperties",mapper:ti.BlobServiceProperties},tl={parameterPath:"accept",mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},tc={parameterPath:"url",mapper:{serializedName:"url",required:!0,xmlName:"url",type:{name:"String"}},skipEncoding:!0},td={parameterPath:"restype",mapper:{defaultValue:"service",isConstant:!0,serializedName:"restype",type:{name:"String"}}},tp={parameterPath:"comp",mapper:{defaultValue:"properties",isConstant:!0,serializedName:"comp",type:{name:"String"}}},tu={parameterPath:["options","timeoutInSeconds"],mapper:{constraints:{InclusiveMinimum:0},serializedName:"timeout",xmlName:"timeout",type:{name:"Number"}}},tm={parameterPath:"version",mapper:{defaultValue:"2023-01-03",isConstant:!0,serializedName:"x-ms-version",type:{name:"String"}}},th={parameterPath:["options","requestId"],mapper:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}},tg={parameterPath:"accept",mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},ty={parameterPath:"comp",mapper:{defaultValue:"list",isConstant:!0,serializedName:"comp",type:{name:"String"}}},tf={parameterPath:["options","prefix"],mapper:{serializedName:"prefix",xmlName:"prefix",type:{name:"String"}}},tb={parameterPath:["options","marker"],mapper:{serializedName:"marker",xmlName:"marker",type:{name:"String"}}},tv={parameterPath:["options","maxPageSize"],mapper:{constraints:{InclusiveMinimum:1},serializedName:"maxresults",xmlName:"maxresults",type:{name:"Number"}}},tS={parameterPath:["options","include"],mapper:{serializedName:"include",xmlName:"include",xmlElementName:"ListContainersIncludeType",type:{name:"Sequence",element:{type:{name:"Enum",allowedValues:["metadata","deleted","system"]}}}},collectionFormat:H.Csv},tP={parameterPath:"keyInfo",mapper:ti.KeyInfo},tC={parameterPath:"restype",mapper:{defaultValue:"account",isConstant:!0,serializedName:"restype",type:{name:"String"}}},tR={parameterPath:"body",mapper:{serializedName:"body",required:!0,xmlName:"body",type:{name:"Stream"}}},tx={parameterPath:"comp",mapper:{defaultValue:"batch",isConstant:!0,serializedName:"comp",type:{name:"String"}}},tO={parameterPath:"contentLength",mapper:{serializedName:"Content-Length",required:!0,xmlName:"Content-Length",type:{name:"Number"}}},tw={parameterPath:"multipartContentType",mapper:{serializedName:"Content-Type",required:!0,xmlName:"Content-Type",type:{name:"String"}}},tE={parameterPath:"comp",mapper:{defaultValue:"blobs",isConstant:!0,serializedName:"comp",type:{name:"String"}}},tN={parameterPath:["options","where"],mapper:{serializedName:"where",xmlName:"where",type:{name:"String"}}},tM={parameterPath:"restype",mapper:{defaultValue:"container",isConstant:!0,serializedName:"restype",type:{name:"String"}}},tT={parameterPath:["options","metadata"],mapper:{serializedName:"x-ms-meta",xmlName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"}},tI={parameterPath:["options","access"],mapper:{serializedName:"x-ms-blob-public-access",xmlName:"x-ms-blob-public-access",type:{name:"Enum",allowedValues:["container","blob"]}}},tA={parameterPath:["options","leaseAccessConditions","leaseId"],mapper:{serializedName:"x-ms-lease-id",xmlName:"x-ms-lease-id",type:{name:"String"}}},tB={parameterPath:["options","modifiedAccessConditions","ifModifiedSince"],mapper:{serializedName:"If-Modified-Since",xmlName:"If-Modified-Since",type:{name:"DateTimeRfc1123"}}},tq={parameterPath:["options","modifiedAccessConditions","ifUnmodifiedSince"],mapper:{serializedName:"If-Unmodified-Since",xmlName:"If-Unmodified-Since",type:{name:"DateTimeRfc1123"}}},tj={parameterPath:"comp",mapper:{defaultValue:"metadata",isConstant:!0,serializedName:"comp",type:{name:"String"}}},tk={parameterPath:"comp",mapper:{defaultValue:"acl",isConstant:!0,serializedName:"comp",type:{name:"String"}}},tz={parameterPath:"comp",mapper:{defaultValue:"undelete",isConstant:!0,serializedName:"comp",type:{name:"String"}}},tH={parameterPath:"comp",mapper:{defaultValue:"lease",isConstant:!0,serializedName:"comp",type:{name:"String"}}},tL={parameterPath:"action",mapper:{defaultValue:"acquire",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},t_={parameterPath:["options","duration"],mapper:{serializedName:"x-ms-lease-duration",xmlName:"x-ms-lease-duration",type:{name:"Number"}}},tD={parameterPath:["options","proposedLeaseId"],mapper:{serializedName:"x-ms-proposed-lease-id",xmlName:"x-ms-proposed-lease-id",type:{name:"String"}}},tU={parameterPath:"action",mapper:{defaultValue:"release",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},t$={parameterPath:"leaseId",mapper:{serializedName:"x-ms-lease-id",required:!0,xmlName:"x-ms-lease-id",type:{name:"String"}}},tF={parameterPath:"action",mapper:{defaultValue:"renew",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},tV={parameterPath:"action",mapper:{defaultValue:"break",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},tK={parameterPath:["options","breakPeriod"],mapper:{serializedName:"x-ms-lease-break-period",xmlName:"x-ms-lease-break-period",type:{name:"Number"}}},tX={parameterPath:"action",mapper:{defaultValue:"change",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},tG={parameterPath:"proposedLeaseId",mapper:{serializedName:"x-ms-proposed-lease-id",required:!0,xmlName:"x-ms-proposed-lease-id",type:{name:"String"}}},tQ={parameterPath:["options","include"],mapper:{serializedName:"include",xmlName:"include",xmlElementName:"ListBlobsIncludeItem",type:{name:"Sequence",element:{type:{name:"Enum",allowedValues:["copy","deleted","metadata","snapshots","uncommittedblobs","versions","tags","immutabilitypolicy","legalhold","deletedwithversions"]}}}},collectionFormat:H.Csv},tW={parameterPath:["options","snapshot"],mapper:{serializedName:"snapshot",xmlName:"snapshot",type:{name:"String"}}},tJ={parameterPath:["options","versionId"],mapper:{serializedName:"versionid",xmlName:"versionid",type:{name:"String"}}},tY={parameterPath:["options","range"],mapper:{serializedName:"x-ms-range",xmlName:"x-ms-range",type:{name:"String"}}},tZ={parameterPath:["options","cpkInfo","encryptionKey"],mapper:{serializedName:"x-ms-encryption-key",xmlName:"x-ms-encryption-key",type:{name:"String"}}},t0={parameterPath:["options","cpkInfo","encryptionKeySha256"],mapper:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}}},t1={parameterPath:["options","cpkInfo","encryptionAlgorithm"],mapper:{serializedName:"x-ms-encryption-algorithm",xmlName:"x-ms-encryption-algorithm",type:{name:"String"}}},t2={parameterPath:["options","modifiedAccessConditions","ifMatch"],mapper:{serializedName:"If-Match",xmlName:"If-Match",type:{name:"String"}}},t4={parameterPath:["options","modifiedAccessConditions","ifNoneMatch"],mapper:{serializedName:"If-None-Match",xmlName:"If-None-Match",type:{name:"String"}}},t5={parameterPath:["options","modifiedAccessConditions","ifTags"],mapper:{serializedName:"x-ms-if-tags",xmlName:"x-ms-if-tags",type:{name:"String"}}},t3={parameterPath:["options","blobHttpHeaders","blobCacheControl"],mapper:{serializedName:"x-ms-blob-cache-control",xmlName:"x-ms-blob-cache-control",type:{name:"String"}}},t6={parameterPath:["options","blobHttpHeaders","blobContentType"],mapper:{serializedName:"x-ms-blob-content-type",xmlName:"x-ms-blob-content-type",type:{name:"String"}}},t9={parameterPath:["options","blobHttpHeaders","blobContentMD5"],mapper:{serializedName:"x-ms-blob-content-md5",xmlName:"x-ms-blob-content-md5",type:{name:"ByteArray"}}},t8={parameterPath:["options","blobHttpHeaders","blobContentEncoding"],mapper:{serializedName:"x-ms-blob-content-encoding",xmlName:"x-ms-blob-content-encoding",type:{name:"String"}}},t7={parameterPath:["options","blobHttpHeaders","blobContentLanguage"],mapper:{serializedName:"x-ms-blob-content-language",xmlName:"x-ms-blob-content-language",type:{name:"String"}}},re={parameterPath:["options","blobHttpHeaders","blobContentDisposition"],mapper:{serializedName:"x-ms-blob-content-disposition",xmlName:"x-ms-blob-content-disposition",type:{name:"String"}}},rt={parameterPath:"comp",mapper:{defaultValue:"immutabilityPolicies",isConstant:!0,serializedName:"comp",type:{name:"String"}}},rr={parameterPath:["options","immutabilityPolicyExpiry"],mapper:{serializedName:"x-ms-immutability-policy-until-date",xmlName:"x-ms-immutability-policy-until-date",type:{name:"DateTimeRfc1123"}}},rn={parameterPath:["options","immutabilityPolicyMode"],mapper:{serializedName:"x-ms-immutability-policy-mode",xmlName:"x-ms-immutability-policy-mode",type:{name:"Enum",allowedValues:["Mutable","Unlocked","Locked"]}}},rs={parameterPath:["options","encryptionScope"],mapper:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}}},ri={parameterPath:["options","tier"],mapper:{serializedName:"x-ms-access-tier",xmlName:"x-ms-access-tier",type:{name:"Enum",allowedValues:["P4","P6","P10","P15","P20","P30","P40","P50","P60","P70","P80","Hot","Cool","Archive","Cold"]}}},ro={parameterPath:["options","rehydratePriority"],mapper:{serializedName:"x-ms-rehydrate-priority",xmlName:"x-ms-rehydrate-priority",type:{name:"Enum",allowedValues:["High","Standard"]}}},ra={parameterPath:["options","sourceModifiedAccessConditions","sourceIfModifiedSince"],mapper:{serializedName:"x-ms-source-if-modified-since",xmlName:"x-ms-source-if-modified-since",type:{name:"DateTimeRfc1123"}}},rl={parameterPath:["options","sourceModifiedAccessConditions","sourceIfUnmodifiedSince"],mapper:{serializedName:"x-ms-source-if-unmodified-since",xmlName:"x-ms-source-if-unmodified-since",type:{name:"DateTimeRfc1123"}}},rc={parameterPath:["options","sourceModifiedAccessConditions","sourceIfMatch"],mapper:{serializedName:"x-ms-source-if-match",xmlName:"x-ms-source-if-match",type:{name:"String"}}},rd={parameterPath:["options","sourceModifiedAccessConditions","sourceIfNoneMatch"],mapper:{serializedName:"x-ms-source-if-none-match",xmlName:"x-ms-source-if-none-match",type:{name:"String"}}},rp={parameterPath:["options","sourceModifiedAccessConditions","sourceIfTags"],mapper:{serializedName:"x-ms-source-if-tags",xmlName:"x-ms-source-if-tags",type:{name:"String"}}},ru={parameterPath:"copySource",mapper:{serializedName:"x-ms-copy-source",required:!0,xmlName:"x-ms-copy-source",type:{name:"String"}}},rm={parameterPath:["options","blobTagsString"],mapper:{serializedName:"x-ms-tags",xmlName:"x-ms-tags",type:{name:"String"}}},rh={parameterPath:["options","legalHold"],mapper:{serializedName:"x-ms-legal-hold",xmlName:"x-ms-legal-hold",type:{name:"Boolean"}}},rg={parameterPath:["options","sourceContentMD5"],mapper:{serializedName:"x-ms-source-content-md5",xmlName:"x-ms-source-content-md5",type:{name:"ByteArray"}}},ry={parameterPath:["options","copySourceAuthorization"],mapper:{serializedName:"x-ms-copy-source-authorization",xmlName:"x-ms-copy-source-authorization",type:{name:"String"}}},rf={parameterPath:["options","copySourceTags"],mapper:{serializedName:"x-ms-copy-source-tag-option",xmlName:"x-ms-copy-source-tag-option",type:{name:"Enum",allowedValues:["REPLACE","COPY"]}}},rb={parameterPath:["options","queryRequest"],mapper:ti.QueryRequest},rv={parameterPath:"comp",mapper:{defaultValue:"tags",isConstant:!0,serializedName:"comp",type:{name:"String"}}},rS={parameterPath:["options","tags"],mapper:ti.BlobTags},rP={parameterPath:["options","transactionalContentMD5"],mapper:{serializedName:"Content-MD5",xmlName:"Content-MD5",type:{name:"ByteArray"}}},rC={parameterPath:["options","transactionalContentCrc64"],mapper:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}}},rR={parameterPath:"blobContentLength",mapper:{serializedName:"x-ms-blob-content-length",required:!0,xmlName:"x-ms-blob-content-length",type:{name:"Number"}}},rx={parameterPath:["options","blobSequenceNumber"],mapper:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}}},rO={parameterPath:["options","contentType"],mapper:{defaultValue:"application/octet-stream",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},rw={parameterPath:"body",mapper:{serializedName:"body",required:!0,xmlName:"body",type:{name:"Stream"}}},rE={parameterPath:"accept",mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},rN={parameterPath:"comp",mapper:{defaultValue:"page",isConstant:!0,serializedName:"comp",type:{name:"String"}}},rM={parameterPath:"pageWrite",mapper:{defaultValue:"update",isConstant:!0,serializedName:"x-ms-page-write",type:{name:"String"}}},rT={parameterPath:["options","sequenceNumberAccessConditions","ifSequenceNumberLessThanOrEqualTo"],mapper:{serializedName:"x-ms-if-sequence-number-le",xmlName:"x-ms-if-sequence-number-le",type:{name:"Number"}}},rI={parameterPath:["options","sequenceNumberAccessConditions","ifSequenceNumberLessThan"],mapper:{serializedName:"x-ms-if-sequence-number-lt",xmlName:"x-ms-if-sequence-number-lt",type:{name:"Number"}}},rA={parameterPath:["options","sequenceNumberAccessConditions","ifSequenceNumberEqualTo"],mapper:{serializedName:"x-ms-if-sequence-number-eq",xmlName:"x-ms-if-sequence-number-eq",type:{name:"Number"}}},rB={parameterPath:"sourceUrl",mapper:{serializedName:"x-ms-copy-source",required:!0,xmlName:"x-ms-copy-source",type:{name:"String"}}},rq={parameterPath:["options","sourceContentCrc64"],mapper:{serializedName:"x-ms-source-content-crc64",xmlName:"x-ms-source-content-crc64",type:{name:"ByteArray"}}},rj={parameterPath:"comp",mapper:{defaultValue:"pagelist",isConstant:!0,serializedName:"comp",type:{name:"String"}}},rk={parameterPath:"comp",mapper:{defaultValue:"appendblock",isConstant:!0,serializedName:"comp",type:{name:"String"}}},rz={parameterPath:["options","appendPositionAccessConditions","maxSize"],mapper:{serializedName:"x-ms-blob-condition-maxsize",xmlName:"x-ms-blob-condition-maxsize",type:{name:"Number"}}},rH={parameterPath:["options","appendPositionAccessConditions","appendPosition"],mapper:{serializedName:"x-ms-blob-condition-appendpos",xmlName:"x-ms-blob-condition-appendpos",type:{name:"Number"}}},rL={parameterPath:["options","sourceRange"],mapper:{serializedName:"x-ms-source-range",xmlName:"x-ms-source-range",type:{name:"String"}}},r_={parameterPath:"blobType",mapper:{defaultValue:"BlockBlob",isConstant:!0,serializedName:"x-ms-blob-type",type:{name:"String"}}},rD={parameterPath:"comp",mapper:{defaultValue:"block",isConstant:!0,serializedName:"comp",type:{name:"String"}}},rU={parameterPath:"blockId",mapper:{serializedName:"blockid",required:!0,xmlName:"blockid",type:{name:"String"}}},r$={parameterPath:"blocks",mapper:ti.BlockLookupList},rF={parameterPath:"comp",mapper:{defaultValue:"blocklist",isConstant:!0,serializedName:"comp",type:{name:"String"}}};class rV{constructor(e){this.client=e}setProperties(e,t){let r={blobServiceProperties:e,options:eG(t||{})};return this.client.sendOperationRequest(r,rX)}getProperties(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,rG)}getStatistics(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,rQ)}listContainersSegment(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,rW)}getUserDelegationKey(e,t){let r={keyInfo:e,options:eG(t||{})};return this.client.sendOperationRequest(r,rJ)}getAccountInfo(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,rY)}submitBatch(e,t,r,n){let s={contentLength:e,multipartContentType:t,body:r,options:eG(n||{})};return this.client.sendOperationRequest(s,rZ)}filterBlobs(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,r0)}}let rK=new e6(ti,!0),rX={path:"/",httpMethod:"PUT",responses:{202:{headersMapper:ti.ServiceSetPropertiesHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ServiceSetPropertiesExceptionHeaders}},requestBody:ta,queryParameters:[td,tp,tu],urlParameters:[tc],headerParameters:[to,tl,tm,th],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:rK},rG={path:"/",httpMethod:"GET",responses:{200:{bodyMapper:ti.BlobServiceProperties,headersMapper:ti.ServiceGetPropertiesHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ServiceGetPropertiesExceptionHeaders}},queryParameters:[td,tp,tu],urlParameters:[tc],headerParameters:[tm,th,tg],isXML:!0,serializer:rK},rQ={path:"/",httpMethod:"GET",responses:{200:{bodyMapper:ti.BlobServiceStatistics,headersMapper:ti.ServiceGetStatisticsHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ServiceGetStatisticsExceptionHeaders}},queryParameters:[td,tu,{parameterPath:"comp",mapper:{defaultValue:"stats",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg],isXML:!0,serializer:rK},rW={path:"/",httpMethod:"GET",responses:{200:{bodyMapper:ti.ListContainersSegmentResponse,headersMapper:ti.ServiceListContainersSegmentHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ServiceListContainersSegmentExceptionHeaders}},queryParameters:[tu,ty,tf,tb,tv,tS],urlParameters:[tc],headerParameters:[tm,th,tg],isXML:!0,serializer:rK},rJ={path:"/",httpMethod:"POST",responses:{200:{bodyMapper:ti.UserDelegationKey,headersMapper:ti.ServiceGetUserDelegationKeyHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ServiceGetUserDelegationKeyExceptionHeaders}},requestBody:tP,queryParameters:[td,tu,{parameterPath:"comp",mapper:{defaultValue:"userdelegationkey",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[to,tl,tm,th],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:rK},rY={path:"/",httpMethod:"GET",responses:{200:{headersMapper:ti.ServiceGetAccountInfoHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ServiceGetAccountInfoExceptionHeaders}},queryParameters:[tp,tC],urlParameters:[tc],headerParameters:[tm,tg],isXML:!0,serializer:rK},rZ={path:"/",httpMethod:"POST",responses:{202:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:ti.ServiceSubmitBatchHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ServiceSubmitBatchExceptionHeaders}},requestBody:tR,queryParameters:[tu,tx],urlParameters:[tc],headerParameters:[to,tl,tm,th,tO,tw],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:rK},r0={path:"/",httpMethod:"GET",responses:{200:{bodyMapper:ti.FilterBlobSegment,headersMapper:ti.ServiceFilterBlobsHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ServiceFilterBlobsExceptionHeaders}},queryParameters:[tu,tb,tv,tE,tN],urlParameters:[tc],headerParameters:[tm,th,tg],isXML:!0,serializer:rK};class r1{constructor(e){this.client=e}create(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,r4)}getProperties(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,r5)}delete(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,r3)}setMetadata(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,r6)}getAccessPolicy(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,r9)}setAccessPolicy(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,r8)}restore(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,r7)}rename(e,t){let r={sourceContainerName:e,options:eG(t||{})};return this.client.sendOperationRequest(r,ne)}submitBatch(e,t,r,n){let s={contentLength:e,multipartContentType:t,body:r,options:eG(n||{})};return this.client.sendOperationRequest(s,nt)}filterBlobs(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,nr)}acquireLease(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,nn)}releaseLease(e,t){let r={leaseId:e,options:eG(t||{})};return this.client.sendOperationRequest(r,ns)}renewLease(e,t){let r={leaseId:e,options:eG(t||{})};return this.client.sendOperationRequest(r,ni)}breakLease(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,no)}changeLease(e,t,r){let n={leaseId:e,proposedLeaseId:t,options:eG(r||{})};return this.client.sendOperationRequest(n,na)}listBlobFlatSegment(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,nl)}listBlobHierarchySegment(e,t){let r={delimiter:e,options:eG(t||{})};return this.client.sendOperationRequest(r,nc)}getAccountInfo(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,nd)}}let r2=new e6(ti,!0),r4={path:"/{containerName}",httpMethod:"PUT",responses:{201:{headersMapper:ti.ContainerCreateHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerCreateExceptionHeaders}},queryParameters:[tu,tM],urlParameters:[tc],headerParameters:[tm,th,tg,tT,tI,{parameterPath:["options","containerEncryptionScope","defaultEncryptionScope"],mapper:{serializedName:"x-ms-default-encryption-scope",xmlName:"x-ms-default-encryption-scope",type:{name:"String"}}},{parameterPath:["options","containerEncryptionScope","preventEncryptionScopeOverride"],mapper:{serializedName:"x-ms-deny-encryption-scope-override",xmlName:"x-ms-deny-encryption-scope-override",type:{name:"Boolean"}}}],isXML:!0,serializer:r2},r5={path:"/{containerName}",httpMethod:"GET",responses:{200:{headersMapper:ti.ContainerGetPropertiesHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerGetPropertiesExceptionHeaders}},queryParameters:[tu,tM],urlParameters:[tc],headerParameters:[tm,th,tg,tA],isXML:!0,serializer:r2},r3={path:"/{containerName}",httpMethod:"DELETE",responses:{202:{headersMapper:ti.ContainerDeleteHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerDeleteExceptionHeaders}},queryParameters:[tu,tM],urlParameters:[tc],headerParameters:[tm,th,tg,tA,tB,tq],isXML:!0,serializer:r2},r6={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:ti.ContainerSetMetadataHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerSetMetadataExceptionHeaders}},queryParameters:[tu,tM,tj],urlParameters:[tc],headerParameters:[tm,th,tg,tT,tA,tB],isXML:!0,serializer:r2},r9={path:"/{containerName}",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}},serializedName:"SignedIdentifiers",xmlName:"SignedIdentifiers",xmlIsWrapped:!0,xmlElementName:"SignedIdentifier"},headersMapper:ti.ContainerGetAccessPolicyHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerGetAccessPolicyExceptionHeaders}},queryParameters:[tu,tM,tk],urlParameters:[tc],headerParameters:[tm,th,tg,tA],isXML:!0,serializer:r2},r8={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:ti.ContainerSetAccessPolicyHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerSetAccessPolicyExceptionHeaders}},requestBody:{parameterPath:["options","containerAcl"],mapper:{serializedName:"containerAcl",xmlName:"SignedIdentifiers",xmlIsWrapped:!0,xmlElementName:"SignedIdentifier",type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}}}},queryParameters:[tu,tM,tk],urlParameters:[tc],headerParameters:[to,tl,tm,th,tI,tA,tB,tq],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:r2},r7={path:"/{containerName}",httpMethod:"PUT",responses:{201:{headersMapper:ti.ContainerRestoreHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerRestoreExceptionHeaders}},queryParameters:[tu,tM,tz],urlParameters:[tc],headerParameters:[tm,th,tg,{parameterPath:["options","deletedContainerName"],mapper:{serializedName:"x-ms-deleted-container-name",xmlName:"x-ms-deleted-container-name",type:{name:"String"}}},{parameterPath:["options","deletedContainerVersion"],mapper:{serializedName:"x-ms-deleted-container-version",xmlName:"x-ms-deleted-container-version",type:{name:"String"}}}],isXML:!0,serializer:r2},ne={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:ti.ContainerRenameHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerRenameExceptionHeaders}},queryParameters:[tu,tM,{parameterPath:"comp",mapper:{defaultValue:"rename",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg,{parameterPath:"sourceContainerName",mapper:{serializedName:"x-ms-source-container-name",required:!0,xmlName:"x-ms-source-container-name",type:{name:"String"}}},{parameterPath:["options","sourceLeaseId"],mapper:{serializedName:"x-ms-source-lease-id",xmlName:"x-ms-source-lease-id",type:{name:"String"}}}],isXML:!0,serializer:r2},nt={path:"/{containerName}",httpMethod:"POST",responses:{202:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:ti.ContainerSubmitBatchHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerSubmitBatchExceptionHeaders}},requestBody:tR,queryParameters:[tu,tx,tM],urlParameters:[tc],headerParameters:[to,tl,tm,th,tO,tw],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:r2},nr={path:"/{containerName}",httpMethod:"GET",responses:{200:{bodyMapper:ti.FilterBlobSegment,headersMapper:ti.ContainerFilterBlobsHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerFilterBlobsExceptionHeaders}},queryParameters:[tu,tb,tv,tE,tN,tM],urlParameters:[tc],headerParameters:[tm,th,tg],isXML:!0,serializer:r2},nn={path:"/{containerName}",httpMethod:"PUT",responses:{201:{headersMapper:ti.ContainerAcquireLeaseHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerAcquireLeaseExceptionHeaders}},queryParameters:[tu,tM,tH],urlParameters:[tc],headerParameters:[tm,th,tg,tB,tq,tL,t_,tD],isXML:!0,serializer:r2},ns={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:ti.ContainerReleaseLeaseHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerReleaseLeaseExceptionHeaders}},queryParameters:[tu,tM,tH],urlParameters:[tc],headerParameters:[tm,th,tg,tB,tq,tU,t$],isXML:!0,serializer:r2},ni={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:ti.ContainerRenewLeaseHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerRenewLeaseExceptionHeaders}},queryParameters:[tu,tM,tH],urlParameters:[tc],headerParameters:[tm,th,tg,tB,tq,t$,tF],isXML:!0,serializer:r2},no={path:"/{containerName}",httpMethod:"PUT",responses:{202:{headersMapper:ti.ContainerBreakLeaseHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerBreakLeaseExceptionHeaders}},queryParameters:[tu,tM,tH],urlParameters:[tc],headerParameters:[tm,th,tg,tB,tq,tV,tK],isXML:!0,serializer:r2},na={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:ti.ContainerChangeLeaseHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerChangeLeaseExceptionHeaders}},queryParameters:[tu,tM,tH],urlParameters:[tc],headerParameters:[tm,th,tg,tB,tq,t$,tX,tG],isXML:!0,serializer:r2},nl={path:"/{containerName}",httpMethod:"GET",responses:{200:{bodyMapper:ti.ListBlobsFlatSegmentResponse,headersMapper:ti.ContainerListBlobFlatSegmentHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerListBlobFlatSegmentExceptionHeaders}},queryParameters:[tu,ty,tf,tb,tv,tM,tQ],urlParameters:[tc],headerParameters:[tm,th,tg],isXML:!0,serializer:r2},nc={path:"/{containerName}",httpMethod:"GET",responses:{200:{bodyMapper:ti.ListBlobsHierarchySegmentResponse,headersMapper:ti.ContainerListBlobHierarchySegmentHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerListBlobHierarchySegmentExceptionHeaders}},queryParameters:[tu,ty,tf,tb,tv,tM,tQ,{parameterPath:"delimiter",mapper:{serializedName:"delimiter",required:!0,xmlName:"delimiter",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg],isXML:!0,serializer:r2},nd={path:"/{containerName}",httpMethod:"GET",responses:{200:{headersMapper:ti.ContainerGetAccountInfoHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.ContainerGetAccountInfoExceptionHeaders}},queryParameters:[tp,tC],urlParameters:[tc],headerParameters:[tm,tg],isXML:!0,serializer:r2};(S=L||(L={}))[S.OFF=0]="OFF",S[S.ERROR=1]="ERROR",S[S.WARNING=2]="WARNING",S[S.INFO=3]="INFO";class np{constructor(e,t){this._nextPolicy=e,this._options=t}shouldLog(e){return this._options.shouldLog(e)}log(e,t){this._options.log(e,t)}}class nu{constructor(e){this._logger=e}shouldLog(e){return!!this._logger&&e!==L.OFF&&e<=this._logger.minimumLogLevel}log(e,t){this._logger&&this.shouldLog(e)&&this._logger.log(e,t)}}var nm=r(5566);function nh(e){return function(t,r){var n;let s;let i=eK.getTracer("azure/core-tracing",void 0),o=(null==r?void 0:r.tracingOptions)||{},a=Object.assign({kind:j.INTERNAL},o.spanOptions),l=e.packagePrefix?`${e.packagePrefix}.${t}`:t;s=!function(){var e;if(void 0===nm)return!1;let t=null===(e=nm.env.AZURE_TRACING_DISABLED)||void 0===e?void 0:e.toLowerCase();return"false"!==t&&"0"!==t&&!!t}()?i.startSpan(l,a,o.tracingContext):eK.wrapSpanContext(ew),e.namespace&&s.setAttribute("az.namespace",e.namespace);let c=o.spanOptions||{};s.isRecording()&&e.namespace&&(c=Object.assign(Object.assign({},o.spanOptions),{attributes:Object.assign(Object.assign({},a.attributes),{"az.namespace":e.namespace})}));let d=Object.assign(Object.assign({},o),{spanOptions:c,tracingContext:(n=o.tracingContext||eX.active(),eK.setSpan(n,s))}),p=Object.assign(Object.assign({},r),{tracingOptions:d});return{span:s,updatedOptions:p}}}var ng=r(8955);let ny=void 0!==ng&&ng.env&&ng.env.DEBUG||void 0,nf=[],nb=[],nv=[];ny&&nP(ny);let nS=Object.assign(e=>nR(e),{enable:nP,enabled:nC,disable:function(){let e=n||"";return nP(""),e},log:function(...e){if(e.length>0){let t=String(e[0]);t.includes(":error")?console.error(...e):t.includes(":warning")?console.warn(...e):t.includes(":info")?console.info(...e):(t.includes(":verbose"),console.debug(...e))}}});function nP(e){n=e,nf=[],nb=[];let t=/\*/g,r=e.split(",").map(e=>e.trim().replace(t,".*?"));for(let e of r)e.startsWith("-")?nb.push(RegExp(`^${e.substr(1)}$`)):nf.push(RegExp(`^${e}$`));for(let e of nv)e.enabled=nC(e.namespace)}function nC(e){if(e.endsWith("*"))return!0;for(let t of nb)if(t.test(e))return!1;for(let t of nf)if(t.test(e))return!0;return!1}function nR(e){let t=Object.assign(function(...r){t.enabled&&(r.length>0&&(r[0]=`${e} ${r[0]}`),t.log(...r))},{enabled:nC(e),destroy:nx,log:nS.log,namespace:e,extend:nO});return nv.push(t),t}function nx(){let e=nv.indexOf(this);return e>=0&&(nv.splice(e,1),!0)}function nO(e){let t=nR(`${this.namespace}:${e}`);return t.log=this.log,t}var nw=r(8955);let nE=new Set,nN=void 0!==nw&&nw.env&&nw.env.AZURE_LOG_LEVEL||void 0,nM=nS("azure");nM.log=(...e)=>{nS.log(...e)};let nT=["verbose","info","warning","error"];nN&&(nk(nN)?function(e){if(e&&!nk(e))throw Error(`Unknown log level '${e}'. Acceptable values: ${nT.join(",")}`);s=e;let t=[];for(let e of nE)nj(e)&&t.push(e.namespace);nS.enable(t.join(","))}(nN):console.error(`AZURE_LOG_LEVEL set to unknown log level '${nN}'; logging is not enabled. Acceptable values: ${nT.join(", ")}.`));let nI={verbose:400,info:300,warning:200,error:100};function nA(e){let t=nM.extend(e);return nB(nM,t),{error:nq(t,"error"),warning:nq(t,"warning"),info:nq(t,"info"),verbose:nq(t,"verbose")}}function nB(e,t){t.log=(...t)=>{e.log(...t)}}function nq(e,t){let r=Object.assign(e.extend(t),{level:t});if(nB(e,r),nj(r)){let e=nS.disable();nS.enable(e+","+r.namespace)}return nE.add(r),r}function nj(e){return!!(s&&nI[e.level]<=nI[s])}function nk(e){return nT.includes(e)}let nz=nA("core-http"),nH=nh({packagePrefix:"",namespace:""});class nL extends np{constructor(e,t,r){super(e,t),this.userAgent=r.userAgent}async sendRequest(e){if(!e.tracingContext)return this._nextPolicy.sendRequest(e);let t=this.tryCreateSpan(e);if(!t)return this._nextPolicy.sendRequest(e);try{let r=await this._nextPolicy.sendRequest(e);return this.tryProcessResponse(t,r),r}catch(e){throw this.tryProcessError(t,e),e}}tryCreateSpan(e){var t;try{let{span:r}=nH(`HTTP ${e.method}`,{tracingOptions:{spanOptions:Object.assign(Object.assign({},e.spanOptions),{kind:j.CLIENT}),tracingContext:e.tracingContext}});if(!r.isRecording()){r.end();return}let n=null===(t=e.tracingContext)||void 0===t?void 0:t.getValue(Symbol.for("az.namespace"));"string"==typeof n&&r.setAttribute("az.namespace",n),r.setAttributes({"http.method":e.method,"http.url":e.url,requestId:e.requestId}),this.userAgent&&r.setAttribute("http.user_agent",this.userAgent);let s=r.spanContext(),i=function(e){let t=[];if(e.traceId||t.push("traceId"),e.spanId||t.push("spanId"),t.length)return;let r=e.traceFlags||0,n=r.toString(16),s=1===n.length?`0${n}`:n;return`00-${e.traceId}-${e.spanId}-${s}`}(s);if(i&&eK.isSpanContextValid(s)){e.headers.set("traceparent",i);let t=s.traceState&&s.traceState.serialize();t&&e.headers.set("tracestate",t)}return r}catch(e){nz.warning(`Skipping creating a tracing span due to an error: ${e.message}`);return}}tryProcessError(e,t){try{e.setStatus({code:k.ERROR,message:t.message}),t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(e){nz.warning(`Skipping tracing span processing due to an error: ${e.message}`)}}tryProcessResponse(e,t){try{e.setAttribute("http.status_code",t.status);let r=t.headers.get("x-ms-request-id");r&&e.setAttribute("serviceRequestId",r),e.setStatus({code:k.OK}),e.end()}catch(e){nz.warning(`Skipping tracing span processing due to an error: ${e.message}`)}}}let n_={enable:!0};class nD extends np{constructor(e,t,r){super(e,t),this.keepAliveOptions=r}async sendRequest(e){return e.keepAlive=this.keepAliveOptions.enable,this._nextPolicy.sendRequest(e)}}function nU(e="x-ms-client-request-id"){return{create:(t,r)=>new n$(t,r,e)}}class n$ extends np{constructor(e,t,r){super(e,t),this._requestIdHeaderName=r}sendRequest(e){return e.headers.contains(this._requestIdHeaderName)||e.headers.set(this._requestIdHeaderName,e.requestId),this._nextPolicy.sendRequest(e)}}class nF{constructor(){this._rawQuery={}}any(){return Object.keys(this._rawQuery).length>0}keys(){return Object.keys(this._rawQuery)}set(e,t){if(e){if(null!=t){let r=Array.isArray(t)?t:t.toString();this._rawQuery[e]=r}else delete this._rawQuery[e]}}get(e){return e?this._rawQuery[e]:void 0}toString(){let e="";for(let t in this._rawQuery){e&&(e+="&");let r=this._rawQuery[t];if(Array.isArray(r)){let n=[];for(let e of r)n.push(`${t}=${e}`);e+=n.join("&")}else e+=`${t}=${r}`}return e}static parse(e){let t=new nF;if(e){e.startsWith("?")&&(e=e.substring(1));let r="ParameterName",n="",s="";for(let i=0;i<e.length;++i){let o=e[i];switch(r){case"ParameterName":switch(o){case"=":r="ParameterValue";break;case"&":n="",s="";break;default:n+=o}break;case"ParameterValue":"&"===o?(t.set(n,s),n="",s="",r="ParameterName"):s+=o;break;default:throw Error("Unrecognized URLQuery parse state: "+r)}}"ParameterValue"===r&&t.set(n,s)}return t}}class nV{setScheme(e){e?this.set(e,"SCHEME"):this._scheme=void 0}getScheme(){return this._scheme}setHost(e){e?this.set(e,"SCHEME_OR_HOST"):this._host=void 0}getHost(){return this._host}setPort(e){null==e||""===e?this._port=void 0:this.set(e.toString(),"PORT")}getPort(){return this._port}setPath(e){if(e){let t=e.indexOf("://");if(-1!==t){let r=e.lastIndexOf("/",t);this.set(-1===r?e:e.substr(r+1),"SCHEME")}else this.set(e,"PATH")}else this._path=void 0}appendPath(e){if(e){let t=this.getPath();t&&(t.endsWith("/")||(t+="/"),e.startsWith("/")&&(e=e.substring(1)),e=t+e),this.set(e,"PATH")}}getPath(){return this._path}setQuery(e){e?this._query=nF.parse(e):this._query=void 0}setQueryParameter(e,t){e&&(this._query||(this._query=new nF),this._query.set(e,t))}getQueryParameterValue(e){return this._query?this._query.get(e):void 0}getQuery(){return this._query?this._query.toString():void 0}set(e,t){let r=new nX(e,t);for(;r.next();){let e;let t=r.current();if(t)switch(t.type){case"SCHEME":this._scheme=t.text||void 0;break;case"HOST":this._host=t.text||void 0;break;case"PORT":this._port=t.text||void 0;break;case"PATH":e=t.text||void 0,this._path&&"/"!==this._path&&"/"===e||(this._path=e);break;case"QUERY":this._query=nF.parse(t.text);break;default:throw Error(`Unrecognized URLTokenType: ${t.type}`)}}}toString(){let e="";return this._scheme&&(e+=`${this._scheme}://`),this._host&&(e+=this._host),this._port&&(e+=`:${this._port}`),this._path&&(this._path.startsWith("/")||(e+="/"),e+=this._path),this._query&&this._query.any()&&(e+=`?${this._query.toString()}`),e}replaceAll(e,t){e&&(this.setScheme(e3(this.getScheme(),e,t)),this.setHost(e3(this.getHost(),e,t)),this.setPort(e3(this.getPort(),e,t)),this.setPath(e3(this.getPath(),e,t)),this.setQuery(e3(this.getQuery(),e,t)))}static parse(e){let t=new nV;return t.set(e,"SCHEME_OR_HOST"),t}}class nK{constructor(e,t){this.text=e,this.type=t}static scheme(e){return new nK(e,"SCHEME")}static host(e){return new nK(e,"HOST")}static port(e){return new nK(e,"PORT")}static path(e){return new nK(e,"PATH")}static query(e){return new nK(e,"QUERY")}}class nX{constructor(e,t){this._text=e,this._textLength=e?e.length:0,this._currentState=null!=t?t:"SCHEME_OR_HOST",this._currentIndex=0}current(){return this._currentToken}next(){if(nG(this))switch(this._currentState){case"SCHEME":!function(e){let t=nY(e,e=>(function(e){let t=e.charCodeAt(0);return 48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122})(e));e._currentToken=nK.scheme(t),nG(e)?e._currentState="HOST":e._currentState="DONE"}(this);break;case"SCHEME_OR_HOST":!function(e){let t=nZ(e,":","/","?");nG(e)?":"===nQ(e)?"://"===nJ(e,3)?(e._currentToken=nK.scheme(t),e._currentState="HOST"):(e._currentToken=nK.host(t),e._currentState="PORT"):(e._currentToken=nK.host(t),"/"===nQ(e)?e._currentState="PATH":e._currentState="QUERY"):(e._currentToken=nK.host(t),e._currentState="DONE")}(this);break;case"HOST":!function(e){"://"===nJ(e,3)&&nW(e,3);let t=nZ(e,":","/","?");e._currentToken=nK.host(t),nG(e)?":"===nQ(e)?e._currentState="PORT":"/"===nQ(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PORT":!function(e){":"===nQ(e)&&nW(e);let t=nZ(e,"/","?");e._currentToken=nK.port(t),nG(e)?"/"===nQ(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PATH":!function(e){let t=nZ(e,"?");e._currentToken=nK.path(t),nG(e)?e._currentState="QUERY":e._currentState="DONE"}(this);break;case"QUERY":!function(e){let t;"?"===nQ(e)&&nW(e);let r=(t="",e._currentIndex<e._textLength&&(t=e._text.substring(e._currentIndex),e._currentIndex=e._textLength),t);e._currentToken=nK.query(r),e._currentState="DONE"}(this);break;default:throw Error(`Unrecognized URLTokenizerState: ${this._currentState}`)}else this._currentToken=void 0;return!!this._currentToken}}function nG(e){return e._currentIndex<e._textLength}function nQ(e){return e._text[e._currentIndex]}function nW(e,t){nG(e)&&(t||(t=1),e._currentIndex+=t)}function nJ(e,t){let r=e._currentIndex+t;return e._textLength<r&&(r=e._textLength),e._text.substring(e._currentIndex,r)}function nY(e,t){let r="";for(;nG(e);){let n=nQ(e);if(t(n))r+=n,nW(e);else break}return r}function nZ(e,...t){return nY(e,e=>-1===t.indexOf(e))}let n0="REDACTED",n1=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],n2=["api-version"];class n4{constructor({allowedHeaderNames:e=[],allowedQueryParameters:t=[]}={}){e=Array.isArray(e)?n1.concat(e):n1,t=Array.isArray(t)?n2.concat(t):n2,this.allowedHeaderNames=new Set(e.map(e=>e.toLowerCase())),this.allowedQueryParameters=new Set(t.map(e=>e.toLowerCase()))}sanitize(e){let t=new Set;return JSON.stringify(e,(e,r)=>{if(r instanceof Error)return Object.assign(Object.assign({},r),{name:r.name,message:r.message});if("_headersMap"===e)return this.sanitizeHeaders(r);if("url"===e)return this.sanitizeUrl(r);if("query"===e)return this.sanitizeQuery(r);if("body"!==e&&"response"!==e&&"operationSpec"!==e){if(Array.isArray(r)||"object"==typeof r&&null!==r&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)){if(t.has(r))return"[Circular]";t.add(r)}return r}},2)}sanitizeHeaders(e){return this.sanitizeObject(e,this.allowedHeaderNames,(e,t)=>e[t].value)}sanitizeQuery(e){return this.sanitizeObject(e,this.allowedQueryParameters,(e,t)=>e[t])}sanitizeObject(e,t,r){if("object"!=typeof e||null===e)return e;let n={};for(let s of Object.keys(e))t.has(s.toLowerCase())?n[s]=r(e,s):n[s]=n0;return n}sanitizeUrl(e){if("string"!=typeof e||null===e)return e;let t=nV.parse(e),r=t.getQuery();if(!r)return e;let n=nF.parse(r);for(let e of n.keys())this.allowedQueryParameters.has(e.toLowerCase())||n.set(e,n0);return t.setQuery(n.toString()),t.toString()}}let n5={},n3=new n4;class n6 extends Error{constructor(e,t,r,n,s){super(e),this.name="RestError",this.code=t,this.statusCode=r,this.request=n,this.response=s,Object.setPrototypeOf(this,n6.prototype)}[n5](){return`RestError: ${this.message} 
 ${n3.sanitize(this)}`}}if(n6.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",n6.PARSE_ERROR="PARSE_ERROR",!self.document||!self.DOMParser||!self.Node||!self.XMLSerializer)throw Error('This library depends on the following DOM objects: ["document", "DOMParser", "Node", "XMLSerializer"] to parse XML, but some of these are undefined. You may provide a polyfill to make these globally available in order to support your environment. For more information, please refer to https://aka.ms/azsdk/js/web-workers. ');function n9(){return i||(i=document.implementation.createDocument(null,null,null)),i}function n8(){return o||(o=new DOMParser),o}function n7(e,t){let r={},n=e.childNodes.length,s=e.childNodes[0],i=s&&1===n&&s.nodeType===Node.TEXT_NODE&&s.nodeValue||void 0,o=e.attributes&&e.hasAttributes()?e:void 0;if(o){r.$={};for(let e=0;e<o.attributes.length;e++){let t=o.attributes[e];r.$[t.nodeName]=t.nodeValue}i&&(r[t.xmlCharKey]=i)}else 0===n?r="":i&&(r=i);if(!i)for(let s=0;s<n;s++){let n=e.childNodes[s];if(n.nodeType!==Node.TEXT_NODE){let e=n7(n,t);r[n.nodeName]?Array.isArray(r[n.nodeName])?r[n.nodeName].push(e):r[n.nodeName]=[r[n.nodeName],e]:r[n.nodeName]=e}}return r}function se(e,t={}){var r,n,s;let i={rootName:null!==(r=t.rootName)&&void 0!==r?r:"root",includeRoot:null!==(n=t.includeRoot)&&void 0!==n&&n,xmlCharKey:null!==(s=t.xmlCharKey)&&void 0!==s?s:"_"},o=function e(t,r,n){if(null==t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t){let e=n9().createElement(r);return e.textContent=null==t?"":t.toString(),[e]}if(Array.isArray(t)){let s=[];for(let i of t)for(let t of e(i,r,n))s.push(t);return s}if("object"==typeof t){let s=n9().createElement(r);for(let r of Object.keys(t))if("$"===r)for(let e of function(e){let t=[];for(let r of Object.keys(e)){let n=n9().createAttribute(r);n.value=e[r].toString(),t.push(n)}return t}(t[r]))s.attributes.setNamedItem(e);else if(r===n.xmlCharKey)s.textContent=t[r].toString();else for(let i of e(t[r],r,n))s.appendChild(i);return[s]}throw Error(`Illegal value passed to buildObject: ${t}`)}(e,i.rootName,i)[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+(a||(a=new XMLSerializer),a).serializeToString(o)}function st(e,t){return{create:(r,n)=>new ss(r,n,e,t)}}void 0!==self.trustedTypes&&(l=self.trustedTypes.createPolicy("@azure/core-http#xml.browser",{createHTML:e=>e}));let sr=["application/json","text/json"],sn=["application/xml","application/atom+xml"];class ss extends np{constructor(e,t,r,n={}){var s;super(e,t),this.jsonContentTypes=r&&r.json||sr,this.xmlContentTypes=r&&r.xml||sn,this.xmlCharKey=null!==(s=n.xmlCharKey)&&void 0!==s?s:"_"}async sendRequest(e){return this._nextPolicy.sendRequest(e).then(e=>(function(e,t,r,n={}){var s,i,o;let a={rootName:null!==(s=n.rootName)&&void 0!==s?s:"",includeRoot:null!==(i=n.includeRoot)&&void 0!==i&&i,xmlCharKey:null!==(o=n.xmlCharKey)&&void 0!==o?o:"_"};return(function(e,t,r,n){var s;let i=e=>{let t=`Error "${e}" occurred while parsing the response body - ${r.bodyAsText}.`,n=e.code||n6.PARSE_ERROR,s=new n6(t,n,r.status,r.request,r);return Promise.reject(s)},o=(null===(s=r.request.streamResponseStatusCodes)||void 0===s?void 0:s.has(r.status))||r.request.streamResponseBody;if(!o&&r.bodyAsText){let s=r.bodyAsText,o=r.headers.get("Content-Type")||"",a=o?o.split(";").map(e=>e.toLowerCase()):[];if(0===a.length||a.some(t=>-1!==e.indexOf(t)))return new Promise(e=>{r.parsedBody=JSON.parse(s),e(r)}).catch(i);if(a.some(e=>-1!==t.indexOf(e)))return(function(e,t={}){var r,n,s,i;try{let o;let a={rootName:null!==(r=t.rootName)&&void 0!==r?r:"",includeRoot:null!==(n=t.includeRoot)&&void 0!==n&&n,xmlCharKey:null!==(s=t.xmlCharKey)&&void 0!==s?s:"_"},d=n8().parseFromString(null!==(i=null==l?void 0:l.createHTML(e))&&void 0!==i?i:e,"application/xml");return function(e){let t=e.getElementsByTagName("parsererror");if(t.length>0&&function(){var e,t;if(void 0===c)try{let r=null!==(e=null==l?void 0:l.createHTML("INVALID"))&&void 0!==e?e:"INVALID";c=null!==(t=n8().parseFromString(r,"text/xml").getElementsByTagName("parsererror")[0].namespaceURI)&&void 0!==t?t:""}catch(e){c=""}return c}()){for(let e=0;e<t.length;e++)if(t[e].namespaceURI===c)throw Error(t[e].innerHTML)}}(d),o=a.includeRoot?n7(d,a):n7(d.childNodes[0],a),Promise.resolve(o)}catch(e){return Promise.reject(e)}})(s,n).then(e=>(r.parsedBody=e,r)).catch(i)}return Promise.resolve(r)})(e,t,r,a).then(e=>{if(!function(e){let t=e.request.shouldDeserialize;return void 0===t||("boolean"==typeof t?t:t(e))}(e))return e;let t=e.request.operationSpec;if(!t||!t.responses)return e;let s=function(e){let t;let r=e.request,n=r.operationSpec;if(n){let s=r.operationResponseGetter;t=s?s(n,e):n.responses[e.status]}return t}(e),{error:i,shouldReturnResponse:o}=function(e,t,r){var n;let s=200<=e.status&&e.status<300,i=!function(e){let t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}(t)?!!r:s;if(i&&(!r||!r.isError))return{error:null,shouldReturnResponse:!1};let o=null!=r?r:t.responses.default,a=(null===(n=e.request.streamResponseStatusCodes)||void 0===n?void 0:n.has(e.status))||e.request.streamResponseBody,l=a?`Unexpected status code: ${e.status}`:e.bodyAsText,c=new n6(l,void 0,e.status,e.request,e);if(!o)throw c;let d=o.bodyMapper,p=o.headersMapper;try{if(e.parsedBody){let r;let n=e.parsedBody;if(d){let e=n;t.isXML&&d.type.name===ts.Sequence&&(e="object"==typeof n?n[d.xmlElementName]:[]),r=t.serializer.deserialize(d,e,"error.response.parsedBody")}let s=n.error||r||n;c.code=s.code,s.message&&(c.message=s.message),d&&(c.response.parsedBody=r)}e.headers&&p&&(c.response.parsedHeaders=t.serializer.deserialize(p,e.headers.toJson(),"operationRes.parsedHeaders"))}catch(t){c.message=`Error "${t.message}" occurred in deserializing the responseBody - "${e.bodyAsText}" for the default response.`}return{error:c,shouldReturnResponse:!1}}(e,t,s);if(i)throw i;if(o)return e;if(s){if(s.bodyMapper){let r=e.parsedBody;t.isXML&&s.bodyMapper.type.name===ts.Sequence&&(r="object"==typeof r?r[s.bodyMapper.xmlElementName]:[]);try{e.parsedBody=t.serializer.deserialize(s.bodyMapper,r,"operationRes.parsedBody",n)}catch(r){let t=new n6(`Error ${r} occurred in deserializing the responseBody - ${e.bodyAsText}`,void 0,e.status,e.request,e);throw t}}else"HEAD"===t.httpMethod&&(e.parsedBody=r.status>=200&&r.status<300);s.headersMapper&&(e.parsedHeaders=t.serializer.deserialize(s.headersMapper,e.headers.toJson(),"operationRes.parsedHeaders",n))}return e})})(this.jsonContentTypes,this.xmlContentTypes,e,{xmlCharKey:this.xmlCharKey}))}}function si(e={}){return{create:(t,r)=>new so(t,r,e)}}class so extends np{constructor(e,t,{logger:r=nz.info,allowedHeaderNames:n=[],allowedQueryParameters:s=[]}={}){super(e,t),this.logger=r,this.sanitizer=new n4({allowedHeaderNames:n,allowedQueryParameters:s})}get allowedHeaderNames(){return this.sanitizer.allowedHeaderNames}set allowedHeaderNames(e){this.sanitizer.allowedHeaderNames=e}get allowedQueryParameters(){return this.sanitizer.allowedQueryParameters}set allowedQueryParameters(e){this.sanitizer.allowedQueryParameters=e}sendRequest(e){return this.logger.enabled?(this.logRequest(e),this._nextPolicy.sendRequest(e).then(e=>this.logResponse(e))):this._nextPolicy.sendRequest(e)}logRequest(e){this.logger(`Request: ${this.sanitizer.sanitize(e)}`)}logResponse(e){return this.logger(`Response status code: ${e.status}`),this.logger(`Headers: ${this.sanitizer.sanitize(e.headers)}`),e}}let sa=Error("DisableResponseDecompressionPolicy is not supported in browser environment"),sl=nA("storage-blob"),sc="2023-01-03",sd="https://storage.azure.com/.default",sp={Parameters:{FORCE_BROWSER_NO_CACHE:"_",SIGNATURE:"sig",SNAPSHOT:"snapshot",VERSIONID:"versionid",TIMEOUT:"timeout"}},su={CONTENT_ID:"Content-ID",CONTENT_LENGTH:"Content-Length",CONTENT_TRANSFER_ENCODING:"Content-Transfer-Encoding",CONTENT_TYPE:"Content-Type",COOKIE:"Cookie",USER_AGENT:"User-Agent",X_MS_ERROR_CODE:"x-ms-error-code",X_MS_VERSION:"x-ms-version"},sm="HTTP/1.1",sh=["Access-Control-Allow-Origin","Cache-Control","Content-Length","Content-Type","Date","Request-Id","traceparent","Transfer-Encoding","User-Agent","x-ms-client-request-id","x-ms-date","x-ms-error-code","x-ms-request-id","x-ms-return-client-request-id","x-ms-version","Accept-Ranges","Content-Disposition","Content-Encoding","Content-Language","Content-MD5","Content-Range","ETag","Last-Modified","Server","Vary","x-ms-content-crc64","x-ms-copy-action","x-ms-copy-completion-time","x-ms-copy-id","x-ms-copy-progress","x-ms-copy-status","x-ms-has-immutability-policy","x-ms-has-legal-hold","x-ms-lease-state","x-ms-lease-status","x-ms-range","x-ms-request-server-encrypted","x-ms-server-encrypted","x-ms-snapshot","x-ms-source-range","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","x-ms-access-tier","x-ms-access-tier-change-time","x-ms-access-tier-inferred","x-ms-account-kind","x-ms-archive-status","x-ms-blob-append-offset","x-ms-blob-cache-control","x-ms-blob-committed-block-count","x-ms-blob-condition-appendpos","x-ms-blob-condition-maxsize","x-ms-blob-content-disposition","x-ms-blob-content-encoding","x-ms-blob-content-language","x-ms-blob-content-length","x-ms-blob-content-md5","x-ms-blob-content-type","x-ms-blob-public-access","x-ms-blob-sequence-number","x-ms-blob-type","x-ms-copy-destination-snapshot","x-ms-creation-time","x-ms-default-encryption-scope","x-ms-delete-snapshots","x-ms-delete-type-permanent","x-ms-deny-encryption-scope-override","x-ms-encryption-algorithm","x-ms-if-sequence-number-eq","x-ms-if-sequence-number-le","x-ms-if-sequence-number-lt","x-ms-incremental-copy","x-ms-lease-action","x-ms-lease-break-period","x-ms-lease-duration","x-ms-lease-id","x-ms-lease-time","x-ms-page-write","x-ms-proposed-lease-id","x-ms-range-get-content-md5","x-ms-rehydrate-priority","x-ms-sequence-number-action","x-ms-sku-name","x-ms-source-content-md5","x-ms-source-if-match","x-ms-source-if-modified-since","x-ms-source-if-none-match","x-ms-source-if-unmodified-since","x-ms-tag-count","x-ms-encryption-key-sha256","x-ms-if-tags","x-ms-source-if-tags"],sg=["comp","maxresults","rscc","rscd","rsce","rscl","rsct","se","si","sip","sp","spr","sr","srt","ss","st","sv","include","marker","prefix","copyid","restype","blockid","blocklisttype","delimiter","prevsnapshot","ske","skoid","sks","skt","sktid","skv","snapshot"],sy=["10000","10001","10002","10003","10004","10100","10101","10102","10103","10104","11000","11001","11002","11003","11004","11100","11101","11102","11103","11104"];var sf=r(7133).lW;function sb(e,t){let r=e.split(";");for(let e of r)if(e.trim().startsWith(t))return e.trim().match(t+"=(.*)")[1];return""}function sv(e){let t="";e.startsWith("UseDevelopmentStorage=true")&&(t=function(e){let t="";if(-1!==e.search("DevelopmentStorageProxyUri=")){let r=e.split(";");for(let e of r)e.trim().startsWith("DevelopmentStorageProxyUri=")&&(t=e.trim().match("DevelopmentStorageProxyUri=(.*)")[1])}return t}(e),e="DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;BlobEndpoint=http://127.0.0.1:10000/devstoreaccount1;");let r=sb(e,"BlobEndpoint");if(r=r.endsWith("/")?r.slice(0,-1):r,-1!==e.search("DefaultEndpointsProtocol=")&&-1!==e.search("AccountKey=")){let n="",s="",i=sf.from("accountKey","base64"),o="";if(s=sb(e,"AccountName"),i=sf.from(sb(e,"AccountKey"),"base64"),!r){n=sb(e,"DefaultEndpointsProtocol");let t=n.toLowerCase();if("https"!==t&&"http"!==t)throw Error("Invalid DefaultEndpointsProtocol in the provided Connection String. Expecting 'https' or 'http'");if(!(o=sb(e,"EndpointSuffix")))throw Error("Invalid EndpointSuffix in the provided Connection String");r=`${n}://${s}.blob.${o}`}if(s){if(0===i.length)throw Error("Invalid AccountKey in the provided Connection String")}else throw Error("Invalid AccountName in the provided Connection String");return{kind:"AccountConnString",url:r,accountName:s,accountKey:i,proxyUri:t}}{let t=sb(e,"SharedAccessSignature"),n=sM(r);if(r){if(!t)throw Error("Invalid SharedAccessSignature in the provided SAS Connection String")}else throw Error("Invalid BlobEndpoint in the provided SAS Connection String");return{kind:"SASConnString",url:r,accountName:n,accountSas:t}}}function sS(e,t){let r=nV.parse(e),n=r.getPath();n=n?n.endsWith("/")?`${n}${t}`:`${n}/${t}`:t,r.setPath(n);let s=new URL(r.toString());return s.toString()}function sP(e,t,r){let n=nV.parse(e);return n.setQueryParameter(t,r),n.toString()}function sC(e,t){let r=nV.parse(e);return r.getQueryParameterValue(t)}function sR(e){let t=nV.parse(e);return t.getPath()}function sx(e,t){let r=nV.parse(e),n=r.getQuery();return n?n+="&"+t:n=t,r.setQuery(n),r.toString()}function sO(e,t=!0){let r=e.toISOString();return t?r.substring(0,r.length-1)+"0000Z":r.substring(0,r.length-5)+"Z"}function sw(e,t){e.length>42&&(e=e.slice(0,42));let r=e+function(e,t,r=" "){return String.prototype.padStart?e.padStart(t,r):(r=r||" ",e.length>t)?e:((t-=e.length)>r.length&&(r+=r.repeat(t/r.length)),r.slice(0,t)+e)}(t.toString(),48-e.length,"0");return Q?sf.from(r).toString("base64"):btoa(r)}async function sE(e,t,r){return new Promise((n,s)=>{let i;let o=()=>{void 0!==i&&clearTimeout(i),s(r)};i=setTimeout(()=>{void 0!==t&&t.removeEventListener("abort",o),n()},e),void 0!==t&&t.addEventListener("abort",o)})}function sN(e,t){return e.toLocaleLowerCase()===t.toLocaleLowerCase()}function sM(e){let t=nV.parse(e);try{return"blob"===t.getHost().split(".")[1]?t.getHost().split(".")[0]:sT(t)?t.getPath().split("/")[1]:""}catch(e){throw Error("Unable to extract accountName with provided information.")}}function sT(e){if(void 0===e.getHost())return!1;let t=e.getHost()+(void 0===e.getPort()?"":":"+e.getPort());return/^.*:.*:.*$|^localhost(:[0-9]+)?$|^(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])(\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])){3}(:[0-9]+)?$/.test(t)||void 0!==e.getPort()&&sy.includes(e.getPort())}function sI(e){if(void 0===e)return;let t=[];for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let n=e[r];t.push(`${encodeURIComponent(r)}=${encodeURIComponent(n)}`)}return t.join("&")}function sA(e){if(void 0===e)return;let t={};for(let r of e.blobTagSet)t[r.key]=r.value;return t}function sB(e){if(void 0!==e)switch(e.kind){case"csv":return{format:{type:"delimited",delimitedTextConfiguration:{columnSeparator:e.columnSeparator||",",fieldQuote:e.fieldQuote||"",recordSeparator:e.recordSeparator,escapeChar:e.escapeCharacter||"",headersPresent:e.hasHeaders||!1}}};case"json":return{format:{type:"json",jsonTextConfiguration:{recordSeparator:e.recordSeparator}}};case"arrow":return{format:{type:"arrow",arrowConfiguration:{schema:e.schema}}};case"parquet":return{format:{type:"parquet"}};default:throw Error("Invalid BlobQueryTextConfiguration.")}}function sq(e){if(!e||"policy-id"in e)return;let t=[];for(let r in e){let n=r.split("_");n[0].startsWith("or-")&&(n[0]=n[0].substring(3));let s={ruleId:n[1],replicationStatus:e[r]},i=t.findIndex(e=>e.policyId===n[0]);i>-1?t[i].rules.push(s):t.push({policyId:n[0],rules:[s]})}return t}function sj(e,t){return e.credential=t,e}function sk(e){return e?e.scheme+" "+e.value:void 0}function sz(e){return e.encoded?decodeURIComponent(e.content):e.content}function*sH(e){let t=[],r=[];e.pageRange&&(t=e.pageRange),e.clearRange&&(r=e.clearRange);let n=0,s=0;for(;n<t.length&&s<r.length;)t[n].start<r[s].start?(yield{start:t[n].start,end:t[n].end,isClear:!1},++n):(yield{start:r[s].start,end:r[s].end,isClear:!0},++s);for(;n<t.length;++n)yield{start:t[n].start,end:t[n].end,isClear:!1};for(;s<r.length;++s)yield{start:r[s].start,end:r[s].end,isClear:!0}}function sL(e){let t=e.split("/");for(let e=0;e<t.length;e++)t[e]=encodeURIComponent(t[e]);return t.join("/")}class s_ extends np{constructor(e,t){super(e,t)}async sendRequest(e){return Q||(("GET"===e.method.toUpperCase()||"HEAD"===e.method.toUpperCase())&&(e.url=sP(e.url,sp.Parameters.FORCE_BROWSER_NO_CACHE,new Date().getTime().toString())),e.headers.remove(su.COOKIE),e.headers.remove(su.CONTENT_LENGTH)),this._nextPolicy.sendRequest(e)}}class sD{create(e,t){return new s_(e,t)}}class sU extends Error{constructor(e){super(e),this.name="AbortError"}}(P=_||(_={}))[P.EXPONENTIAL=0]="EXPONENTIAL",P[P.FIXED=1]="FIXED";let s$={maxRetryDelayInMs:12e4,maxTries:4,retryDelayInMs:4e3,retryPolicyType:_.EXPONENTIAL,secondaryHost:"",tryTimeoutInMs:void 0},sF=new sU("The operation was aborted.");class sV extends np{constructor(e,t,r=s$){super(e,t),this.retryOptions={retryPolicyType:r.retryPolicyType?r.retryPolicyType:s$.retryPolicyType,maxTries:r.maxTries&&r.maxTries>=1?Math.floor(r.maxTries):s$.maxTries,tryTimeoutInMs:r.tryTimeoutInMs&&r.tryTimeoutInMs>=0?r.tryTimeoutInMs:s$.tryTimeoutInMs,retryDelayInMs:r.retryDelayInMs&&r.retryDelayInMs>=0?Math.min(r.retryDelayInMs,r.maxRetryDelayInMs?r.maxRetryDelayInMs:s$.maxRetryDelayInMs):s$.retryDelayInMs,maxRetryDelayInMs:r.maxRetryDelayInMs&&r.maxRetryDelayInMs>=0?r.maxRetryDelayInMs:s$.maxRetryDelayInMs,secondaryHost:r.secondaryHost?r.secondaryHost:s$.secondaryHost}}async sendRequest(e){return this.attemptSendRequest(e,!1,1)}async attemptSendRequest(e,t,r){let n;let s=e.clone(),i=t||!this.retryOptions.secondaryHost||!("GET"===e.method||"HEAD"===e.method||"OPTIONS"===e.method)||r%2==1;i||(s.url=function(e,t){let r=nV.parse(e);return r.setHost(t),r.toString()}(s.url,this.retryOptions.secondaryHost)),this.retryOptions.tryTimeoutInMs&&(s.url=sP(s.url,sp.Parameters.TIMEOUT,Math.floor(this.retryOptions.tryTimeoutInMs/1e3).toString()));try{if(sl.info(`RetryPolicy: =====> Try=${r} ${i?"Primary":"Secondary"}`),n=await this._nextPolicy.sendRequest(s),!this.shouldRetry(i,r,n))return n;t=t||!i&&404===n.status}catch(e){if(sl.error(`RetryPolicy: Caught error, message: ${e.message}, code: ${e.code}`),!this.shouldRetry(i,r,n,e))throw e}return await this.delay(i,r,e.abortSignal),this.attemptSendRequest(e,t,++r)}shouldRetry(e,t,r,n){if(t>=this.retryOptions.maxTries)return sl.info(`RetryPolicy: Attempt(s) ${t} >= maxTries ${this.retryOptions.maxTries}, no further try.`),!1;if(n){for(let e of["ETIMEDOUT","ESOCKETTIMEDOUT","ECONNREFUSED","ECONNRESET","ENOENT","ENOTFOUND","TIMEOUT","EPIPE","REQUEST_SEND_ERROR"])if(n.name.toUpperCase().includes(e)||n.message.toUpperCase().includes(e)||n.code&&n.code.toString().toUpperCase()===e)return sl.info(`RetryPolicy: Network error ${e} found, will retry.`),!0}if(r||n){let t=r?r.status:n?n.statusCode:0;if(!e&&404===t)return sl.info("RetryPolicy: Secondary access with 404, will retry."),!0;if(503===t||500===t)return sl.info(`RetryPolicy: Will retry for status code ${t}.`),!0}return!!((null==n?void 0:n.code)==="PARSE_ERROR"&&(null==n?void 0:n.message.startsWith('Error "Error: Unclosed root tag')))&&(sl.info("RetryPolicy: Incomplete XML response likely due to service timeout, will retry."),!0)}async delay(e,t,r){let n=0;if(e)switch(this.retryOptions.retryPolicyType){case _.EXPONENTIAL:n=Math.min((Math.pow(2,t-1)-1)*this.retryOptions.retryDelayInMs,this.retryOptions.maxRetryDelayInMs);break;case _.FIXED:n=this.retryOptions.retryDelayInMs}else n=1e3*Math.random();return sl.info(`RetryPolicy: Delay for ${n}ms`),sE(n,r,sF)}}class sK{constructor(e){this.retryOptions=e}create(e,t){return new sV(e,t,this.retryOptions)}}class sX extends np{sendRequest(e){return this._nextPolicy.sendRequest(this.signRequest(e))}signRequest(e){return e}}class sG extends sX{constructor(e,t){super(e,t)}}class sQ{create(e,t){throw Error("Method should be implemented in children classes.")}}class sW extends sQ{create(e,t){return new sG(e,t)}}var sJ=r(4598);function sY(e){return e.toLowerCase()}function sZ(e){return!!e&&"object"==typeof e&&"function"==typeof e.rawHeaders&&"function"==typeof e.clone&&"function"==typeof e.get&&"function"==typeof e.set&&"function"==typeof e.contains&&"function"==typeof e.remove&&"function"==typeof e.headersArray&&"function"==typeof e.headerValues&&"function"==typeof e.headerNames&&"function"==typeof e.toJson}class s0{constructor(e){if(this._headersMap={},e)for(let t in e)this.set(t,e[t])}set(e,t){this._headersMap[sY(e)]={name:e,value:t.toString()}}get(e){let t=this._headersMap[sY(e)];return t?t.value:void 0}contains(e){return!!this._headersMap[sY(e)]}remove(e){let t=this.contains(e);return delete this._headersMap[sY(e)],t}rawHeaders(){return this.toJson({preserveCase:!0})}headersArray(){let e=[];for(let t in this._headersMap)e.push(this._headersMap[t]);return e}headerNames(){let e=[],t=this.headersArray();for(let r=0;r<t.length;++r)e.push(t[r].name);return e}headerValues(){let e=[],t=this.headersArray();for(let r=0;r<t.length;++r)e.push(t[r].value);return e}toJson(e={}){let t={};if(e.preserveCase)for(let e in this._headersMap){let r=this._headersMap[e];t[r.name]=r.value}else for(let e in this._headersMap){let r=this._headersMap[e];t[sY(r.name)]=r.value}return t}toString(){return JSON.stringify(this.toJson({preserveCase:!0}))}clone(){let e={};for(let t in this._headersMap){let r=this._headersMap[t];e[r.name]=r.value}return new s0(e)}}class s1 extends np{constructor(e,t,r){super(e,t),this.telemetry=r}async sendRequest(e){return Q&&(e.headers||(e.headers=new s0),e.headers.get(su.USER_AGENT)||e.headers.set(su.USER_AGENT,this.telemetry)),this._nextPolicy.sendRequest(e)}}var s2=r(1408);class s4{constructor(e){let t=[];if(Q){if(e){let r=e.userAgentPrefix||"";r.length>0&&-1===t.indexOf(r)&&t.push(r)}let r="azsdk-js-storageblob/12.15.0";-1===t.indexOf(r)&&t.push(r);let n=`(NODE-VERSION ${s2.version})`;sJ&&(n=`(NODE-VERSION ${s2.version}; ${sJ.type()} ${sJ.release()})`),-1===t.indexOf(n)&&t.push(n)}this.telemetryString=t.join(" ")}create(e,t){return new s1(e,t,this.telemetryString)}}class s5{sendRequest(e){var t;let r=new XMLHttpRequest;if(e.proxySettings)throw Error("HTTP proxy is not supported in browser environment");let n=e.abortSignal;if(n){if(n.aborted)return Promise.reject(new sU("The operation was aborted."));let e=()=>{r.abort()};n.addEventListener("abort",e),r.addEventListener("readystatechange",()=>{r.readyState===XMLHttpRequest.DONE&&n.removeEventListener("abort",e)})}if(s3(r.upload,e.onUploadProgress),s3(r,e.onDownloadProgress),e.formData){let t=e.formData,r=new FormData,n=(e,t)=>{t&&Object.prototype.hasOwnProperty.call(t,"value")&&Object.prototype.hasOwnProperty.call(t,"options")?r.append(e,t.value,t.options):r.append(e,t)};for(let e of Object.keys(t)){let r=t[e];if(Array.isArray(r))for(let t=0;t<r.length;t++)n(e,r[t]);else n(e,r)}e.body=r,e.formData=void 0;let s=e.headers.get("Content-Type");s&&-1!==s.indexOf("multipart/form-data")&&e.headers.remove("Content-Type")}for(let t of(r.open(e.method,e.url),r.timeout=e.timeout,r.withCredentials=e.withCredentials,e.headers.headersArray()))r.setRequestHeader(t.name,t.value);return new Promise((r.responseType=(null===(t=e.streamResponseStatusCodes)||void 0===t?void 0:t.size)||e.streamResponseBody?"blob":"text",r.send(void 0===e.body?null:e.body),"blob"===r.responseType)?(t,n)=>{(function(e,t,r,n){e.addEventListener("readystatechange",()=>{var s;if(e.readyState===XMLHttpRequest.HEADERS_RECEIVED){if(t.streamResponseBody||(null===(s=t.streamResponseStatusCodes)||void 0===s?void 0:s.has(e.status))){let n=new Promise((r,n)=>{e.addEventListener("load",()=>{r(e.response)}),s9(t,e,n)});r({request:t,status:e.status,headers:s6(e),blobBody:n})}else e.addEventListener("load",()=>{if(e.response){let s=new FileReader;s.onload=function(n){var s;let i=null===(s=n.target)||void 0===s?void 0:s.result;r({request:t,status:e.status,headers:s6(e),bodyAsText:i})},s.onerror=function(e){n(s.error)},s.readAsText(e.response,"UTF-8")}else r({request:t,status:e.status,headers:s6(e)})})}})})(r,e,t,n),s9(e,r,n)}:function(t,n){r.addEventListener("load",()=>t({request:e,status:r.status,headers:s6(r),bodyAsText:r.responseText})),s9(e,r,n)})}}function s3(e,t){t&&e.addEventListener("progress",e=>t({loadedBytes:e.loaded}))}function s6(e){let t=new s0,r=e.getAllResponseHeaders().trim().split(/[\r\n]+/);for(let e of r){let r=e.indexOf(":"),n=e.slice(0,r),s=e.slice(r+2);t.set(n,s)}return t}function s9(e,t,r){t.addEventListener("error",()=>r(new n6(`Failed to send request to ${e.url}`,n6.REQUEST_SEND_ERROR,void 0,e)));let n=new sU("The operation was aborted.");t.addEventListener("abort",()=>r(n)),t.addEventListener("timeout",()=>r(n))}let s8=new s5;function s7(e,t){let r;let{abortSignal:n,abortErrorMsg:s}=null!=t?t:{};return function(e,t){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:s}=null!=t?t:{};return new Promise((t,i)=>{function o(){i(new sU(null!=s?s:"The operation was aborted."))}function a(){null==n||n.removeEventListener("abort",l)}function l(){null==r||r(),a(),o()}if(null==n?void 0:n.aborted)return o();try{e(e=>{a(),t(e)},e=>{a(),i(e)})}catch(e){i(e)}null==n||n.addEventListener("abort",l)})}(t=>{r=setTimeout(t,e)},{cleanupBeforeAbort:()=>clearTimeout(r),abortSignal:n,abortErrorMsg:null!=s?s:"The delay was aborted."})}let ie={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}},it={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};async function ir(e,t,r){async function n(){if(Date.now()<r)try{return await e()}catch(e){return null}else{let t=await e();if(null===t)throw Error("Failed to refresh access token.");return t}}let s=await n();for(;null===s;)await s7(t),s=await n();return s}function is(e,t,r){let n=null,s=null,i=Object.assign(Object.assign({},it),r),o={get isRefreshing(){return null!==n},get shouldRefresh(){var a;return!o.isRefreshing&&(null!==(a=null==s?void 0:s.expiresOnTimestamp)&&void 0!==a?a:0)-i.refreshWindowInMs<Date.now()},get mustRefresh(){return null===s||s.expiresOnTimestamp-i.forcedRefreshWindowInMs<Date.now()}};function l(r){var a;return o.isRefreshing||(n=ir(()=>e.getToken(t,r),i.retryIntervalInMs,null!==(a=null==s?void 0:s.expiresOnTimestamp)&&void 0!==a?a:Date.now()).then(e=>(n=null,s=e)).catch(e=>{throw n=null,s=null,e})),n}return async e=>o.mustRefresh?l(e):(o.shouldRefresh&&l(e),s)}function ii(e){return!!e&&"object"==typeof e&&Array.isArray(e.factories)&&"object"==typeof e.options&&"function"==typeof e.toServiceClientOptions}class io{constructor(e,t={}){this.factories=e,this.options=Object.assign(Object.assign({},t),{httpClient:t.httpClient||s8})}toServiceClientOptions(){return{httpClient:this.options.httpClient,requestPolicyFactories:this.factories}}}function ia(e,t={}){var r,n;void 0===e&&(e=new sW);let s=new s4(t.userAgentOptions),i=[function(e={}){return{create:(t,r)=>new nL(t,r,e)}}({userAgent:s.telemetryString}),(n=t.keepAliveOptions,{create:(e,t)=>new nD(e,t,n||n_)}),s,nU(),new sD,new sK(t.retryOptions),st(void 0,{xmlCharKey:"#"}),si({logger:sl.info,allowedHeaderNames:sh,allowedQueryParameters:sg})];return Q&&(i.push(Z(t.proxyOptions)),i.push({create:(e,t)=>{throw sa}})),i.push(W(e)?sj(function(e,t){let r=is(e,t);class n extends np{constructor(e,t){super(e,t)}async sendRequest(t){if(!t.url.toLowerCase().startsWith("https://"))throw Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let n=r,s=(await n({abortSignal:t.abortSignal,tracingOptions:{tracingContext:t.tracingContext}})).token;t.headers.set(ie.HeaderConstants.AUTHORIZATION,`Bearer ${s}`);let i=await this._nextPolicy.sendRequest(t);if((null==i?void 0:i.status)===401){let n=function(e){let t=e.headers.get("WWW-Authenticate");if(401===e.status&&t)return t}(i);if(n){let s=function(e){let t=e.slice(7),r=`${t.trim()} `.split(" ").filter(e=>e),n=r.map(e=>(([e,t])=>({[e]:t}))(e.trim().split("=")));return n.reduce((e,t)=>Object.assign(Object.assign({},e),t),{})}(n),i=s.resource_id+ie.DefaultScope,o=nV.parse(s.authorization_uri),a=o.getPath().split("/"),l=a[1],c=is(e,i),d=(await c({abortSignal:t.abortSignal,tracingOptions:{tracingContext:t.tracingContext},tenantId:l})).token;return r=c,t.headers.set(ie.HeaderConstants.AUTHORIZATION,`Bearer ${d}`),this._nextPolicy.sendRequest(t)}}return i}}return{create:(e,t)=>new n(e,t)}}(e,null!==(r=t.audience)&&void 0!==r?r:sd),e):e),new io(i,t)}class il{}let ic=["GET","HEAD"];class id extends np{constructor(e,t,r=20){super(e,t),this.maxRetries=r}sendRequest(e){return this._nextPolicy.sendRequest(e).then(e=>(function e(t,r,n){let{request:s,status:i}=r,o=r.headers.get("location");if(o&&(300===i||301===i&&ic.includes(s.method)||302===i&&ic.includes(s.method)||303===i&&"POST"===s.method||307===i)&&(!t.maxRetries||n<t.maxRetries)){let r=nV.parse(s.url);return r.setPath(o),s.url=r.toString(),303===i&&(s.method="GET",delete s.body),t._nextPolicy.sendRequest(s).then(r=>e(t,r,n+1))}return Promise.resolve(r)})(this,e,0))}}function ip(e){return"number"==typeof e}function iu(e,t,r,n,s){return!!t(n,s)&&r.retryCount<e}function im(e,t={retryCount:0,retryInterval:0},r){r&&(t.error&&(r.innerError=t.error),t.error=r),t.retryCount++;let n=Math.pow(2,t.retryCount-1)-1,s=.8*e.retryInterval+Math.floor(Math.random()*(.4*e.retryInterval));return n*=s,t.retryInterval=Math.min(e.minRetryInterval+n,e.maxRetryInterval),t}let ih={coreHttpVersion:"3.0.2",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429,ServiceUnavailable:503}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}};(C=D||(D={}))[C.Exponential=0]="Exponential";class ig extends np{constructor(e,t,r,n,s){super(e,t),this.retryCount=ip(r)?r:3,this.retryInterval=ip(n)?n:3e4,this.maxRetryInterval=ip(s)?s:9e4}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).then(t=>iy(this,e,t)).catch(t=>iy(this,e,t.response,void 0,t))}}async function iy(e,t,r,n,s){n=im({retryInterval:e.retryInterval,minRetryInterval:0,maxRetryInterval:e.maxRetryInterval},n,s);let i=t.abortSignal&&t.abortSignal.aborted;if(!i&&iu(e.retryCount,function(e){let t=null==e?void 0:e.status;return!(503===t&&(null==r?void 0:r.headers.get(ih.HeaderConstants.RETRY_AFTER)))&&void 0!==t&&(!(t<500)||408===t)&&501!==t&&505!==t},n,r)){nz.info(`Retrying request in ${n.retryInterval}`);try{await s7(n.retryInterval);let r=await e._nextPolicy.sendRequest(t.clone());return iy(e,t,r,n)}catch(s){return iy(e,t,r,n,s)}}else{if(!i&&!s&&r)return r;let e=n.error||new n6("Failed to send the request.",n6.REQUEST_SEND_ERROR,r&&r.status,r&&r.request,r);throw e}}function ib(e){return iv(e.parameterPath,e.mapper)}function iv(e,t){return"string"==typeof e?e:Array.isArray(e)?e.join("."):t.serializedName}class iS{constructor(e,t,r,n,s,i,o,a,l,c,d,p,u,m,h){this.streamResponseBody=i,this.streamResponseStatusCodes=h,this.url=e||"",this.method=t||"GET",this.headers=sZ(s)?s:new s0(s),this.body=r,this.query=n,this.formData=void 0,this.withCredentials=o||!1,this.abortSignal=a,this.timeout=l||0,this.onUploadProgress=c,this.onDownloadProgress=d,this.proxySettings=p,this.keepAlive=u,this.decompressResponse=m,this.requestId=this.headers.get("x-ms-client-request-id")||e2()}validateRequestProperties(){if(!this.method)throw Error("WebResource.method is required.");if(!this.url)throw Error("WebResource.url is required.")}prepare(e){if(!e)throw Error("options object is required");if(void 0===e.method||null===e.method||"string"!=typeof e.method.valueOf())throw Error("options.method must be a string.");if(e.url&&e.pathTemplate)throw Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if((void 0===e.pathTemplate||null===e.pathTemplate||"string"!=typeof e.pathTemplate.valueOf())&&(void 0===e.url||null===e.url||"string"!=typeof e.url.valueOf()))throw Error("Please provide exactly one of options.pathTemplate or options.url.");if(e.url){if("string"!=typeof e.url)throw Error('options.url must be of type "string".');this.url=e.url}if(e.method){let t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw Error('The provided method "'+e.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){let{pathTemplate:t,pathParameters:r}=e;if("string"!=typeof t)throw Error('options.pathTemplate must be of type "string".');e.baseUrl||(e.baseUrl="https://management.azure.com");let n=e.baseUrl,s=n+(n.endsWith("/")?"":"/")+(t.startsWith("/")?t.slice(1):t),i=s.match(/({[\w-]*\s*[\w-]*})/gi);if(i&&i.length){if(!r)throw Error(`pathTemplate: ${t} has been provided. Hence, options.pathParameters must also be provided.`);i.forEach(function(e){let n=e.slice(1,-1),i=r[n];if(null==i||!("string"==typeof i||"object"==typeof i)){let e=JSON.stringify(r,void 0,2);throw Error(`pathTemplate: ${t} contains the path parameter ${n} however, it is not present in parameters: ${e}.The value of the path parameter can either be a "string" of the form { ${n}: "some sample value" } or it can be an "object" of the form { "${n}": { value: "some sample value", skipUrlEncoding: true } }.`)}if("string"==typeof i.valueOf()&&(s=s.replace(e,encodeURIComponent(i))),"object"==typeof i.valueOf()){if(!i.value)throw Error(`options.pathParameters[${n}] is of type "object" but it does not contain a "value" property.`);s=i.skipUrlEncoding?s.replace(e,i.value):s.replace(e,encodeURIComponent(i.value))}})}this.url=s}if(e.queryParameters){let t=e.queryParameters;if("object"!=typeof t)throw Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");let r=[];for(let e in this.query={},t){let n=t[e];if(n){if("string"==typeof n)r.push(e+"="+encodeURIComponent(n)),this.query[e]=encodeURIComponent(n);else if("object"==typeof n){if(!n.value)throw Error(`options.queryParameters[${e}] is of type "object" but it does not contain a "value" property.`);n.skipUrlEncoding?(r.push(e+"="+n.value),this.query[e]=n.value):(r.push(e+"="+encodeURIComponent(n.value)),this.query[e]=encodeURIComponent(n.value))}}}this.url+=r.join("&")}if(e.headers){let t=e.headers;for(let r of Object.keys(e.headers))this.headers.set(r,t[r])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),this.headers.get("x-ms-client-request-id")||e.disableClientRequestId||this.headers.set("x-ms-client-request-id",this.requestId),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=e.body,void 0===e.body||null===e.body||(e.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(e.serializationMapper&&(this.body=new e6(e.mappers).serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody||(this.body=JSON.stringify(e.body)))),e.spanOptions&&(this.spanOptions=e.spanOptions),e.tracingContext&&(this.tracingContext=e.tracingContext),this.abortSignal=e.abortSignal,this.onDownloadProgress=e.onDownloadProgress,this.onUploadProgress=e.onUploadProgress,this}clone(){let e=new iS(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.decompressResponse,this.streamResponseStatusCodes);return this.formData&&(e.formData=this.formData),this.operationSpec&&(e.operationSpec=this.operationSpec),this.shouldDeserialize&&(e.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(e.operationResponseGetter=this.operationResponseGetter),e}}function iP(){return"x-ms-useragent"}function iC(){let e=function(){let e={key:"core-http",value:ih.coreHttpVersion};return[e]}(),t=function(){let e=self.navigator,t={key:"OS",value:(e.oscpu||e.platform).replace(" ","")};return[t]}(),r=function(e,t=" ",r="/"){return e.map(e=>{let t=e.value?`${r}${e.value}`:"";return`${e.key}${t}`}).join(t)}(e.concat(t));return r}class iR extends np{constructor(e,t,r,n){super(e,t),this._nextPolicy=e,this._options=t,this.headerKey=r,this.headerValue=n}sendRequest(e){return this.addUserAgentHeader(e),this._nextPolicy.sendRequest(e)}addUserAgentHeader(e){e.headers||(e.headers=new s0),!e.headers.get(this.headerKey)&&this.headerValue&&e.headers.set(this.headerKey,this.headerValue)}}let ix={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};async function iO(e,t,r){async function n(){if(Date.now()<r)try{return await e()}catch(e){return null}else{let t=await e();if(null===t)throw Error("Failed to refresh access token.");return t}}let s=await n();for(;null===s;)await s7(t),s=await n();return s}function iw(e,t){let r=function(e,t,r){let n=null,s=null,i=Object.assign(Object.assign({},ix),void 0),o={get isRefreshing(){return null!==n},get shouldRefresh(){var a;return!o.isRefreshing&&(null!==(a=null==s?void 0:s.expiresOnTimestamp)&&void 0!==a?a:0)-i.refreshWindowInMs<Date.now()},get mustRefresh(){return null===s||s.expiresOnTimestamp-i.forcedRefreshWindowInMs<Date.now()}};function l(r){var a;return o.isRefreshing||(n=iO(()=>e.getToken(t,r),i.retryIntervalInMs,null!==(a=null==s?void 0:s.expiresOnTimestamp)&&void 0!==a?a:Date.now()).then(e=>(n=null,s=e)).catch(e=>{throw n=null,s=null,e})),n}return async e=>o.mustRefresh?l(e):(o.shouldRefresh&&l(e),s)}(e,t);class n extends np{constructor(e,t){super(e,t)}async sendRequest(e){if(!e.url.toLowerCase().startsWith("https://"))throw Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let{token:t}=await r({abortSignal:e.abortSignal,tracingOptions:{tracingContext:e.tracingContext}});return e.headers.set(ih.HeaderConstants.AUTHORIZATION,`Bearer ${t}`),this._nextPolicy.sendRequest(e)}}return{create:(e,t)=>new n(e,t)}}class iE extends np{constructor(e,t,r=30){super(e,t),this._retryTimeout=r}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).then(t=>(function(e,t,r){if(409===r.status){let n=function(e){let t,r;if(e){try{r=JSON.parse(e)}catch(e){}if(r&&r.error&&r.error.message&&r.error.code&&"MissingSubscriptionRegistration"===r.error.code){let e=r.error.message.match(/.*'(.*)'/i);e&&(t=e.pop())}}return t}(r.bodyAsText);if(n){let s=function(e){let t;let r=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(r&&r[0])t=r[0];else throw Error(`Unable to extract subscriptionId from the given url - ${e}.`);return t}(t.url);return iM(e,s,n,t).catch(()=>!1).then(n=>n?(t.headers.set("x-ms-client-request-id",e2()),e._nextPolicy.sendRequest(t.clone())):r)}}return Promise.resolve(r)})(this,e,t))}}function iN(e,t=!1){let r=e.clone();return t&&(r.url=e.url),r.headers.set("x-ms-client-request-id",e2()),r.headers.set("Content-Type","application/json; charset=utf-8"),r}async function iM(e,t,r,n){let s=`${t}providers/${r}/register?api-version=2016-02-01`,i=`${t}providers/${r}?api-version=2016-02-01`,o=iN(n);o.method="POST",o.url=s;let a=await e._nextPolicy.sendRequest(o);if(200!==a.status)throw Error(`Autoregistration of ${r} failed. Please try registering manually.`);return iT(e,i,n)}async function iT(e,t,r){let n=iN(r);n.url=t,n.method="GET";let s=await e._nextPolicy.sendRequest(n),i=s.parsedBody;return!!s.parsedBody&&!!i.registrationState&&"Registered"===i.registrationState||(await s7(1e3*e._retryTimeout),iT(e,t,r))}class iI extends np{constructor(e,t,r){super(e,t),this.authenticationProvider=r}signRequest(e){return this.authenticationProvider.signRequest(e)}sendRequest(e){return this.signRequest(e).then(e=>this._nextPolicy.sendRequest(e))}}class iA extends np{constructor(e,t,r,n,s,i){super(e,t),this.retryCount=ip(r)?r:3,this.retryInterval=ip(n)?n:3e4,this.minRetryInterval=ip(s)?s:3e3,this.maxRetryInterval=ip(i)?i:9e4}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).catch(t=>iB(this,e,t.response,t))}}async function iB(e,t,r,n,s){if(s=im(e,s,n),!iu(e.retryCount,function(e,t){return!!t&&!!t.code&&("ETIMEDOUT"===t.code||"ESOCKETTIMEDOUT"===t.code||"ECONNREFUSED"===t.code||"ECONNRESET"===t.code||"ENOENT"===t.code)},s,r,n))return n?Promise.reject(s.error):r;try{return await s7(s.retryInterval),e._nextPolicy.sendRequest(t.clone())}catch(n){return iB(e,t,r,n,s)}}let iq=ih.HttpConstants.StatusCodes,ij="The operation was aborted.";class ik extends np{constructor(e,t,r){super(e,t),this.numberOfRetries=0,this._handleResponse=r||this._defaultResponseHandler}async sendRequest(e){let t=await this._nextPolicy.sendRequest(e.clone());return t.status!==iq.TooManyRequests&&t.status!==iq.ServiceUnavailable?t:this._handleResponse(e,t)}async _defaultResponseHandler(e,t){var r;let n=t.headers.get(ih.HeaderConstants.RETRY_AFTER);if(n){let t=ik.parseRetryAfterHeader(n);if(t){if(this.numberOfRetries+=1,await s7(t,{abortSignal:e.abortSignal,abortErrorMsg:ij}),null===(r=e.abortSignal)||void 0===r?void 0:r.aborted)throw new sU(ij);return this.numberOfRetries<3?this.sendRequest(e):this._nextPolicy.sendRequest(e)}}return t}static parseRetryAfterHeader(e){let t=Number(e);return Number.isNaN(t)?ik.parseDateRetryAfterHeader(e):1e3*t}static parseDateRetryAfterHeader(e){try{let t=Date.now(),r=Date.parse(e),n=r-t;return Number.isNaN(n)?void 0:n}catch(e){return}}}class iz{constructor(e,t){let r;if(t||(t={}),this._withCredentials=t.withCredentials||!1,this._httpClient=t.httpClient||(d||(d=new s5),d),this._requestPolicyOptions=new nu(t.httpPipelineLogger),Array.isArray(t.requestPolicyFactories))nz.info("ServiceClient: using custom request policies"),r=t.requestPolicyFactories;else{let n;if(W(e))nz.info("ServiceClient: creating bearer token authentication policy from provided credentials"),n=(()=>{let r;let n=this,s=t;return{create(t,i){var o;let a=(o=n.baseUri,(null==s?void 0:s.credentialScopes)?s.credentialScopes:o?`${o}/.default`:void 0);if(!a)throw Error("When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy");return null==r&&(r=iw(e,a)),r.create(t,i)}}})();else if(e&&"function"==typeof e.signRequest)nz.info("ServiceClient: creating signing policy from provided credentials"),n={create:(t,r)=>new iI(t,r,e)};else if(null!=e)throw Error("The credentials argument must implement the TokenCredential interface");if(nz.info("ServiceClient: using default request policies"),r=function(e,t){let r=[];t.generateClientRequestIdHeader&&r.push(nU(t.clientRequestIdHeaderName)),e&&r.push(e);let n=iH(t.userAgentHeaderName,iP),s=iH(t.userAgent,iC);return n&&s&&r.push(function(e){let t=e&&void 0!==e.key&&null!==e.key?e.key:iP(),r=e&&void 0!==e.value&&null!==e.value?e.value:iC();return{create:(e,n)=>new iR(e,n,t,r)}}({key:n,value:s})),r.push(function(e=20){return{create:(t,r)=>new id(t,r,e)}}()),r.push(function(e=30){return{create:(t,r)=>new iE(t,r,e)}}(t.rpRegistrationRetryTimeout)),t.noRetryPolicy||(r.push({create:(e,t)=>new ig(e,t,void 0,void 0,void 0)}),r.push({create:(e,t)=>new iA(e,t,void 0,void 0,void 0,void 0)}),r.push({create:(e,t)=>new ik(e,t)})),r.push(st(t.deserializationContentTypes)),Q&&r.push(Z(t.proxySettings)),r.push(si({logger:nz.info})),r}(n,t),t.requestPolicyFactories){let e=t.requestPolicyFactories(r);e&&(r=e)}}this._requestPolicyFactories=r}sendRequest(e){let t;if(null==e||"object"!=typeof e)throw Error("options cannot be null or undefined and it must be of type object.");try{(e&&"object"==typeof e&&"string"==typeof e.url&&"string"==typeof e.method&&"object"==typeof e.headers&&sZ(e.headers)&&"function"==typeof e.validateRequestProperties&&"function"==typeof e.prepare&&"function"==typeof e.clone?0:1)?t=(t=new iS).prepare(e):(e.validateRequestProperties(),t=e)}catch(e){return Promise.reject(e)}let r=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(let e=this._requestPolicyFactories.length-1;e>=0;--e)r=this._requestPolicyFactories[e].create(r,this._requestPolicyOptions);return r.sendRequest(t)}async sendOperationRequest(e,t,r){var n;let s;"function"==typeof e.options&&(r=e.options,e.options=void 0);let i=null===(n=e.options)||void 0===n?void 0:n.serializerOptions,o=new iS;try{let r,n;let a=t.baseUrl||this.baseUri;if(!a)throw Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");o.method=t.httpMethod,o.operationSpec=t;let l=nV.parse(a);if(t.path&&l.appendPath(t.path),t.urlParameters&&t.urlParameters.length>0)for(let r of t.urlParameters){let n=iL(this,e,r,t.serializer);n=t.serializer.serialize(r.mapper,n,ib(r),i),r.skipEncoding||(n=encodeURIComponent(n)),l.replaceAll(`{${r.mapper.serializedName||ib(r)}}`,n)}if(t.queryParameters&&t.queryParameters.length>0)for(let r of t.queryParameters){let n=iL(this,e,r,t.serializer);if(null!=n){if(n=t.serializer.serialize(r.mapper,n,ib(r),i),void 0!==r.collectionFormat&&null!==r.collectionFormat){if(r.collectionFormat===H.Multi){if(0===n.length)continue;for(let e in n){let t=n[e];n[e]=null==t?"":t.toString()}}else(r.collectionFormat===H.Ssv||r.collectionFormat===H.Tsv)&&(n=n.join(r.collectionFormat))}if(!r.skipEncoding){if(Array.isArray(n))for(let e in n)void 0!==n[e]&&null!==n[e]&&(n[e]=encodeURIComponent(n[e]));else n=encodeURIComponent(n)}void 0!==r.collectionFormat&&null!==r.collectionFormat&&r.collectionFormat!==H.Multi&&r.collectionFormat!==H.Ssv&&r.collectionFormat!==H.Tsv&&(n=n.join(r.collectionFormat)),l.setQueryParameter(r.mapper.serializedName||ib(r),n)}}o.url=l.toString();let c=t.contentType||this.requestContentType;if(c&&t.requestBody&&o.headers.set("Content-Type",c),t.headerParameters)for(let r of t.headerParameters){let n=iL(this,e,r,t.serializer);if(null!=n){n=t.serializer.serialize(r.mapper,n,ib(r),i);let e=r.mapper.headerCollectionPrefix;if(e)for(let t of Object.keys(n))o.headers.set(e+t,n[t]);else o.headers.set(r.mapper.serializedName||ib(r),n)}}let d=e.options;if(d){if(d.customHeaders)for(let e in d.customHeaders)o.headers.set(e,d.customHeaders[e]);d.abortSignal&&(o.abortSignal=d.abortSignal),d.timeout&&(o.timeout=d.timeout),d.onUploadProgress&&(o.onUploadProgress=d.onUploadProgress),d.onDownloadProgress&&(o.onDownloadProgress=d.onDownloadProgress),d.spanOptions&&(o.spanOptions=d.spanOptions),d.tracingContext&&(o.tracingContext=d.tracingContext),void 0!==d.shouldDeserialize&&null!==d.shouldDeserialize&&(o.shouldDeserialize=d.shouldDeserialize)}o.withCredentials=this._withCredentials,function(e,t,r,n){var s,i,o,a,l,c;let d=null!==(i=null===(s=r.options)||void 0===s?void 0:s.serializerOptions)&&void 0!==i?i:{},p={rootName:null!==(o=d.rootName)&&void 0!==o?o:"",includeRoot:null!==(a=d.includeRoot)&&void 0!==a&&a,xmlCharKey:null!==(l=d.xmlCharKey)&&void 0!==l?l:"_"},u=d.xmlCharKey;if(n.requestBody&&n.requestBody.mapper){t.body=iL(e,r,n.requestBody,n.serializer);let s=n.requestBody.mapper,{required:i,xmlName:o,xmlElementName:a,serializedName:l,xmlNamespace:d,xmlNamespacePrefix:m}=s,h=s.type.name;try{if(void 0!==t.body&&null!==t.body||i){let e=ib(n.requestBody);t.body=n.serializer.serialize(s,t.body,e,p);let r=h===ts.Stream;if(n.isXML){let e=m?`xmlns:${m}`:"xmlns",n=function(e,t,r,n,s){if(e&&!["Composite","Sequence","Dictionary"].includes(r)){let r={};return r[s.xmlCharKey]=n,r.$={[t]:e},r}return n}(d,e,h,t.body,p);h===ts.Sequence?t.body=se(function(e,t,r,n){if(Array.isArray(e)||(e=[e]),!r||!n)return{[t]:e};let s={[t]:e};return s.$={[r]:n},s}(n,a||o||l,e,d),{rootName:o||l,xmlCharKey:u}):r||(t.body=se(n,{rootName:o||l,xmlCharKey:u}))}else{if(h===ts.String&&((null===(c=n.contentType)||void 0===c?void 0:c.match("text/plain"))||"text"===n.mediaType))return;r||(t.body=JSON.stringify(t.body))}}}catch(e){throw Error(`Error "${e.message}" occurred in serializing the payload - ${JSON.stringify(l,void 0,"  ")}.`)}}else if(n.formDataParameters&&n.formDataParameters.length>0)for(let s of(t.formData={},n.formDataParameters)){let i=iL(e,r,s,n.serializer);if(null!=i){let e=s.mapper.serializedName||ib(s);t.formData[e]=n.serializer.serialize(s.mapper,i,ib(s),p)}}}(this,o,e,t),void 0===o.streamResponseStatusCodes&&(o.streamResponseStatusCodes=function(e){let t=new Set;for(let r in e.responses){let n=e.responses[r];n.bodyMapper&&n.bodyMapper.type.name===ts.Stream&&t.add(Number(r))}return t}(t));try{r=await this.sendRequest(o)}catch(e){n=e}n?(n.response&&(n.details=iD(n.response,t.responses[n.statusCode]||t.responses.default)),s=Promise.reject(n)):s=Promise.resolve(iD(r,t.responses[r.status]))}catch(e){s=Promise.reject(e)}let a=r;return a&&s.then(e=>a(null,e._response.parsedBody,e._response.request,e._response)).catch(e=>a(e)),s}}function iH(e,t){let r;return"string"==typeof e?r=e:(r=t(),"function"==typeof e&&(r=e(r))),r}function iL(e,t,r,n){return function e(t,r,n,s,i){var o;let a;"string"==typeof n&&(n=[n]);let l=null===(o=r.options)||void 0===o?void 0:o.serializerOptions;if(Array.isArray(n)){if(n.length>0){if(s.isConstant)a=s.defaultValue;else{let e=i_(r,n);e.propertyFound||(e=i_(t,n));let i=!1;e.propertyFound||(i=s.required||"options"===n[0]&&2===n.length),a=i?s.defaultValue:e.propertyValue}let e=iv(n,s);i.serialize(s,a,e,l)}}else for(let o in s.required&&(a={}),n){let c=s.type.modelProperties[o],d=n[o],p=e(t,r,d,c,i),u=iv(d,c);i.serialize(c,p,u,l),null!=p&&(a||(a={}),a[o]=p)}return a}(e,t,r.parameterPath,r.mapper,n)}function i_(e,t){let r={propertyFound:!1},n=0;for(;n<t.length;++n){let r=t[n];if(null!=e&&r in e)e=e[r];else break}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}function iD(e,t){var r;let n=e.parsedHeaders,s=t&&t.bodyMapper,i=t=>Object.defineProperty(t,"_response",{value:e});if(s){let t=s.type.name;if("Stream"===t)return i(Object.assign(Object.assign({},n),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody}));let r="Composite"===t&&s.type.modelProperties||{},o=Object.keys(r).some(e=>""===r[e].serializedName);if("Sequence"===t||o){let t=[...e.parsedBody||[]];for(let n of Object.keys(r))r[n].serializedName&&(t[n]=e.parsedBody[n]);if(n)for(let e of Object.keys(n))t[e]=n[e];return i(t),t}if("Composite"===t||"Dictionary"===t)return i(Object.assign(Object.assign({},n),e.parsedBody))}return i(s||"HEAD"===e.request.method||"object"!=typeof(r=e.parsedBody)&&"function"!=typeof r||null===r?Object.assign(Object.assign({},n),{body:e.parsedBody}):Object.assign(Object.assign({},n),e.parsedBody))}class iU extends iz{constructor(e,t){if(void 0===e)throw Error("'url' cannot be null");if(t||(t={}),!t.userAgent){let e=iC();t.userAgent=`azure-storage-blob/12.15.0 ${e}`}super(void 0,t),this.requestContentType="application/json; charset=utf-8",this.baseUri=t.endpoint||"{url}",this.url=e,this.version=t.version||"2023-01-03"}}class i${constructor(e,t){for(let r of(this.url=function(e){let t=nV.parse(e),r=t.getPath();return r=encodeURIComponent(r=r||"/").replace(/%2F/g,"/").replace(/'/g,"%27").replace(/\+/g,"%20").replace(/%25/g,"%"),t.setPath(r),t.toString()}(e),this.accountName=sM(e),this.pipeline=t,this.storageClientContext=new iU(this.url,t.toServiceClientOptions()),this.isHttps=sN(function(e){let t=nV.parse(e);return t.getScheme()}(this.url)||"","https"),this.credential=new sW,this.pipeline.factories))Q&&r instanceof il||r instanceof sW?this.credential=r:W(r.credential)&&(this.credential=r.credential);let r=this.storageClientContext;r.requestContentType=void 0}}let iF=nh({packagePrefix:"Azure.Storage.Blob",namespace:"Microsoft.Storage"});function iV(e){var t,r;return{spanOptions:null===(t=null==e?void 0:e.tracingOptions)||void 0===t?void 0:t.spanOptions,tracingContext:null===(r=null==e?void 0:e.tracingOptions)||void 0===r?void 0:r.tracingContext}}class iK{constructor(){this.read=!1,this.add=!1,this.create=!1,this.write=!1,this.delete=!1,this.deleteVersion=!1,this.tag=!1,this.move=!1,this.execute=!1,this.setImmutabilityPolicy=!1,this.permanentDelete=!1}static parse(e){let t=new iK;for(let r of e)switch(r){case"r":t.read=!0;break;case"a":t.add=!0;break;case"c":t.create=!0;break;case"w":t.write=!0;break;case"d":t.delete=!0;break;case"x":t.deleteVersion=!0;break;case"t":t.tag=!0;break;case"m":t.move=!0;break;case"e":t.execute=!0;break;case"i":t.setImmutabilityPolicy=!0;break;case"y":t.permanentDelete=!0;break;default:throw RangeError(`Invalid permission: ${r}`)}return t}static from(e){let t=new iK;return e.read&&(t.read=!0),e.add&&(t.add=!0),e.create&&(t.create=!0),e.write&&(t.write=!0),e.delete&&(t.delete=!0),e.deleteVersion&&(t.deleteVersion=!0),e.tag&&(t.tag=!0),e.move&&(t.move=!0),e.execute&&(t.execute=!0),e.setImmutabilityPolicy&&(t.setImmutabilityPolicy=!0),e.permanentDelete&&(t.permanentDelete=!0),t}toString(){let e=[];return this.read&&e.push("r"),this.add&&e.push("a"),this.create&&e.push("c"),this.write&&e.push("w"),this.delete&&e.push("d"),this.deleteVersion&&e.push("x"),this.tag&&e.push("t"),this.move&&e.push("m"),this.execute&&e.push("e"),this.setImmutabilityPolicy&&e.push("i"),this.permanentDelete&&e.push("y"),e.join("")}}class iX{constructor(){this.read=!1,this.add=!1,this.create=!1,this.write=!1,this.delete=!1,this.deleteVersion=!1,this.list=!1,this.tag=!1,this.move=!1,this.execute=!1,this.setImmutabilityPolicy=!1,this.permanentDelete=!1,this.filterByTags=!1}static parse(e){let t=new iX;for(let r of e)switch(r){case"r":t.read=!0;break;case"a":t.add=!0;break;case"c":t.create=!0;break;case"w":t.write=!0;break;case"d":t.delete=!0;break;case"l":t.list=!0;break;case"t":t.tag=!0;break;case"x":t.deleteVersion=!0;break;case"m":t.move=!0;break;case"e":t.execute=!0;break;case"i":t.setImmutabilityPolicy=!0;break;case"y":t.permanentDelete=!0;break;case"f":t.filterByTags=!0;break;default:throw RangeError(`Invalid permission ${r}`)}return t}static from(e){let t=new iX;return e.read&&(t.read=!0),e.add&&(t.add=!0),e.create&&(t.create=!0),e.write&&(t.write=!0),e.delete&&(t.delete=!0),e.list&&(t.list=!0),e.deleteVersion&&(t.deleteVersion=!0),e.tag&&(t.tag=!0),e.move&&(t.move=!0),e.execute&&(t.execute=!0),e.setImmutabilityPolicy&&(t.setImmutabilityPolicy=!0),e.permanentDelete&&(t.permanentDelete=!0),e.filterByTags&&(t.filterByTags=!0),t}toString(){let e=[];return this.read&&e.push("r"),this.add&&e.push("a"),this.create&&e.push("c"),this.write&&e.push("w"),this.delete&&e.push("d"),this.deleteVersion&&e.push("x"),this.list&&e.push("l"),this.tag&&e.push("t"),this.move&&e.push("m"),this.execute&&e.push("e"),this.setImmutabilityPolicy&&e.push("i"),this.permanentDelete&&e.push("y"),this.filterByTags&&e.push("f"),e.join("")}}class iG{}function iQ(e){return e.end?`${e.start}-${e.end}`:e.start}(R=U||(U={})).Https="https",R.HttpsAndHttp="https,http";class iW{constructor(e,t,r,n,s,i,o,a,l,c,d,p,u,m,h,g,y,f,b,v){this.version=e,this.signature=t,void 0!==r&&"string"!=typeof r?(this.permissions=r.permissions,this.services=r.services,this.resourceTypes=r.resourceTypes,this.protocol=r.protocol,this.startsOn=r.startsOn,this.expiresOn=r.expiresOn,this.ipRangeInner=r.ipRange,this.identifier=r.identifier,this.encryptionScope=r.encryptionScope,this.resource=r.resource,this.cacheControl=r.cacheControl,this.contentDisposition=r.contentDisposition,this.contentEncoding=r.contentEncoding,this.contentLanguage=r.contentLanguage,this.contentType=r.contentType,r.userDelegationKey&&(this.signedOid=r.userDelegationKey.signedObjectId,this.signedTenantId=r.userDelegationKey.signedTenantId,this.signedStartsOn=r.userDelegationKey.signedStartsOn,this.signedExpiresOn=r.userDelegationKey.signedExpiresOn,this.signedService=r.userDelegationKey.signedService,this.signedVersion=r.userDelegationKey.signedVersion,this.preauthorizedAgentObjectId=r.preauthorizedAgentObjectId,this.correlationId=r.correlationId)):(this.services=n,this.resourceTypes=s,this.expiresOn=a,this.permissions=r,this.protocol=i,this.startsOn=o,this.ipRangeInner=l,this.encryptionScope=v,this.identifier=c,this.resource=d,this.cacheControl=p,this.contentDisposition=u,this.contentEncoding=m,this.contentLanguage=h,this.contentType=g,y&&(this.signedOid=y.signedObjectId,this.signedTenantId=y.signedTenantId,this.signedStartsOn=y.signedStartsOn,this.signedExpiresOn=y.signedExpiresOn,this.signedService=y.signedService,this.signedVersion=y.signedVersion,this.preauthorizedAgentObjectId=f,this.correlationId=b))}get ipRange(){if(this.ipRangeInner)return{end:this.ipRangeInner.end,start:this.ipRangeInner.start}}toString(){let e=[];for(let t of["sv","ss","srt","spr","st","se","sip","si","ses","skoid","sktid","skt","ske","sks","skv","sr","sp","sig","rscc","rscd","rsce","rscl","rsct","saoid","scid"])switch(t){case"sv":this.tryAppendQueryParameter(e,t,this.version);break;case"ss":this.tryAppendQueryParameter(e,t,this.services);break;case"srt":this.tryAppendQueryParameter(e,t,this.resourceTypes);break;case"spr":this.tryAppendQueryParameter(e,t,this.protocol);break;case"st":this.tryAppendQueryParameter(e,t,this.startsOn?sO(this.startsOn,!1):void 0);break;case"se":this.tryAppendQueryParameter(e,t,this.expiresOn?sO(this.expiresOn,!1):void 0);break;case"sip":this.tryAppendQueryParameter(e,t,this.ipRange?iQ(this.ipRange):void 0);break;case"si":this.tryAppendQueryParameter(e,t,this.identifier);break;case"ses":this.tryAppendQueryParameter(e,t,this.encryptionScope);break;case"skoid":this.tryAppendQueryParameter(e,t,this.signedOid);break;case"sktid":this.tryAppendQueryParameter(e,t,this.signedTenantId);break;case"skt":this.tryAppendQueryParameter(e,t,this.signedStartsOn?sO(this.signedStartsOn,!1):void 0);break;case"ske":this.tryAppendQueryParameter(e,t,this.signedExpiresOn?sO(this.signedExpiresOn,!1):void 0);break;case"sks":this.tryAppendQueryParameter(e,t,this.signedService);break;case"skv":this.tryAppendQueryParameter(e,t,this.signedVersion);break;case"sr":this.tryAppendQueryParameter(e,t,this.resource);break;case"sp":this.tryAppendQueryParameter(e,t,this.permissions);break;case"sig":this.tryAppendQueryParameter(e,t,this.signature);break;case"rscc":this.tryAppendQueryParameter(e,t,this.cacheControl);break;case"rscd":this.tryAppendQueryParameter(e,t,this.contentDisposition);break;case"rsce":this.tryAppendQueryParameter(e,t,this.contentEncoding);break;case"rscl":this.tryAppendQueryParameter(e,t,this.contentLanguage);break;case"rsct":this.tryAppendQueryParameter(e,t,this.contentType);break;case"saoid":this.tryAppendQueryParameter(e,t,this.preauthorizedAgentObjectId);break;case"scid":this.tryAppendQueryParameter(e,t,this.correlationId)}return e.join("&")}tryAppendQueryParameter(e,t,r){r&&(t=encodeURIComponent(t),r=encodeURIComponent(r),t.length>0&&r.length>0&&e.push(`${t}=${r}`))}}function iJ(e,t,r){let n;let s=e.version?e.version:sc,i=t instanceof il?t:void 0;if(void 0===i&&void 0!==r&&(n=new iG(r,t)),void 0===i&&void 0===n)throw TypeError("Invalid sharedKeyCredential, userDelegationKey or accountName.");if(s>="2020-12-06")return void 0!==i?function(e,t){let r;if(!(e=iZ(e)).identifier&&!(e.permissions&&e.expiresOn))throw RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when 'identifier' is not provided.");let n="c",s=e.snapshotTime;e.blobName&&(n="b",e.snapshotTime?n="bs":e.versionId&&(n="bv",s=e.versionId)),e.permissions&&(r=e.blobName?iK.parse(e.permissions.toString()).toString():iX.parse(e.permissions.toString()).toString());let i=[r||"",e.startsOn?sO(e.startsOn,!1):"",e.expiresOn?sO(e.expiresOn,!1):"",iY(t.accountName,e.containerName,e.blobName),e.identifier,e.ipRange?iQ(e.ipRange):"",e.protocol?e.protocol:"",e.version,n,s,e.encryptionScope,e.cacheControl?e.cacheControl:"",e.contentDisposition?e.contentDisposition:"",e.contentEncoding?e.contentEncoding:"",e.contentLanguage?e.contentLanguage:"",e.contentType?e.contentType:""].join("\n"),o=t.computeHMACSHA256(i);return new iW(e.version,o,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType,void 0,void 0,void 0,e.encryptionScope)}(e,i):function(e,t){let r;if(!(e=iZ(e)).permissions||!e.expiresOn)throw RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when generating user delegation SAS.");let n="c",s=e.snapshotTime;e.blobName&&(n="b",e.snapshotTime?n="bs":e.versionId&&(n="bv",s=e.versionId)),e.permissions&&(r=e.blobName?iK.parse(e.permissions.toString()).toString():iX.parse(e.permissions.toString()).toString());let i=[r||"",e.startsOn?sO(e.startsOn,!1):"",e.expiresOn?sO(e.expiresOn,!1):"",iY(t.accountName,e.containerName,e.blobName),t.userDelegationKey.signedObjectId,t.userDelegationKey.signedTenantId,t.userDelegationKey.signedStartsOn?sO(t.userDelegationKey.signedStartsOn,!1):"",t.userDelegationKey.signedExpiresOn?sO(t.userDelegationKey.signedExpiresOn,!1):"",t.userDelegationKey.signedService,t.userDelegationKey.signedVersion,e.preauthorizedAgentObjectId,void 0,e.correlationId,e.ipRange?iQ(e.ipRange):"",e.protocol?e.protocol:"",e.version,n,s,e.encryptionScope,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType].join("\n"),o=t.computeHMACSHA256(i);return new iW(e.version,o,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType,t.userDelegationKey,e.preauthorizedAgentObjectId,e.correlationId,e.encryptionScope)}(e,n);if(s>="2018-11-09")return void 0!==i?function(e,t){let r;if(!(e=iZ(e)).identifier&&!(e.permissions&&e.expiresOn))throw RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when 'identifier' is not provided.");let n="c",s=e.snapshotTime;e.blobName&&(n="b",e.snapshotTime?n="bs":e.versionId&&(n="bv",s=e.versionId)),e.permissions&&(r=e.blobName?iK.parse(e.permissions.toString()).toString():iX.parse(e.permissions.toString()).toString());let i=[r||"",e.startsOn?sO(e.startsOn,!1):"",e.expiresOn?sO(e.expiresOn,!1):"",iY(t.accountName,e.containerName,e.blobName),e.identifier,e.ipRange?iQ(e.ipRange):"",e.protocol?e.protocol:"",e.version,n,s,e.cacheControl?e.cacheControl:"",e.contentDisposition?e.contentDisposition:"",e.contentEncoding?e.contentEncoding:"",e.contentLanguage?e.contentLanguage:"",e.contentType?e.contentType:""].join("\n"),o=t.computeHMACSHA256(i);return new iW(e.version,o,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType)}(e,i):s>="2020-02-10"?function(e,t){let r;if(!(e=iZ(e)).permissions||!e.expiresOn)throw RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when generating user delegation SAS.");let n="c",s=e.snapshotTime;e.blobName&&(n="b",e.snapshotTime?n="bs":e.versionId&&(n="bv",s=e.versionId)),e.permissions&&(r=e.blobName?iK.parse(e.permissions.toString()).toString():iX.parse(e.permissions.toString()).toString());let i=[r||"",e.startsOn?sO(e.startsOn,!1):"",e.expiresOn?sO(e.expiresOn,!1):"",iY(t.accountName,e.containerName,e.blobName),t.userDelegationKey.signedObjectId,t.userDelegationKey.signedTenantId,t.userDelegationKey.signedStartsOn?sO(t.userDelegationKey.signedStartsOn,!1):"",t.userDelegationKey.signedExpiresOn?sO(t.userDelegationKey.signedExpiresOn,!1):"",t.userDelegationKey.signedService,t.userDelegationKey.signedVersion,e.preauthorizedAgentObjectId,void 0,e.correlationId,e.ipRange?iQ(e.ipRange):"",e.protocol?e.protocol:"",e.version,n,s,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType].join("\n"),o=t.computeHMACSHA256(i);return new iW(e.version,o,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType,t.userDelegationKey,e.preauthorizedAgentObjectId,e.correlationId)}(e,n):function(e,t){let r;if(!(e=iZ(e)).permissions||!e.expiresOn)throw RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when generating user delegation SAS.");let n="c",s=e.snapshotTime;e.blobName&&(n="b",e.snapshotTime?n="bs":e.versionId&&(n="bv",s=e.versionId)),e.permissions&&(r=e.blobName?iK.parse(e.permissions.toString()).toString():iX.parse(e.permissions.toString()).toString());let i=[r||"",e.startsOn?sO(e.startsOn,!1):"",e.expiresOn?sO(e.expiresOn,!1):"",iY(t.accountName,e.containerName,e.blobName),t.userDelegationKey.signedObjectId,t.userDelegationKey.signedTenantId,t.userDelegationKey.signedStartsOn?sO(t.userDelegationKey.signedStartsOn,!1):"",t.userDelegationKey.signedExpiresOn?sO(t.userDelegationKey.signedExpiresOn,!1):"",t.userDelegationKey.signedService,t.userDelegationKey.signedVersion,e.ipRange?iQ(e.ipRange):"",e.protocol?e.protocol:"",e.version,n,s,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType].join("\n"),o=t.computeHMACSHA256(i);return new iW(e.version,o,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType,t.userDelegationKey)}(e,n);if(s>="2015-04-05"){if(void 0!==i)return function(e,t){let r;if(!(e=iZ(e)).identifier&&!(e.permissions&&e.expiresOn))throw RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when 'identifier' is not provided.");let n="c";e.blobName&&(n="b"),e.permissions&&(r=e.blobName?iK.parse(e.permissions.toString()).toString():iX.parse(e.permissions.toString()).toString());let s=[r||"",e.startsOn?sO(e.startsOn,!1):"",e.expiresOn?sO(e.expiresOn,!1):"",iY(t.accountName,e.containerName,e.blobName),e.identifier,e.ipRange?iQ(e.ipRange):"",e.protocol?e.protocol:"",e.version,e.cacheControl?e.cacheControl:"",e.contentDisposition?e.contentDisposition:"",e.contentEncoding?e.contentEncoding:"",e.contentLanguage?e.contentLanguage:"",e.contentType?e.contentType:""].join("\n"),i=t.computeHMACSHA256(s);return new iW(e.version,i,r,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,n,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType)}(e,i);throw RangeError("'version' must be >= '2018-11-09' when generating user delegation SAS using user delegation key.")}throw RangeError("'version' must be >= '2015-04-05'.")}function iY(e,t,r){let n=[`/blob/${e}/${t}`];return r&&n.push(`/${r}`),n.join("")}function iZ(e){let t=e.version?e.version:sc;if(e.snapshotTime&&t<"2018-11-09")throw RangeError("'version' must be >= '2018-11-09' when providing 'snapshotTime'.");if(void 0===e.blobName&&e.snapshotTime)throw RangeError("Must provide 'blobName' when providing 'snapshotTime'.");if(e.versionId&&t<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when providing 'versionId'.");if(void 0===e.blobName&&e.versionId)throw RangeError("Must provide 'blobName' when providing 'versionId'.");if(e.permissions&&e.permissions.setImmutabilityPolicy&&t<"2020-08-04")throw RangeError("'version' must be >= '2020-08-04' when provided 'i' permission.");if(e.permissions&&e.permissions.deleteVersion&&t<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when providing 'x' permission.");if(e.permissions&&e.permissions.permanentDelete&&t<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when providing 'y' permission.");if(e.permissions&&e.permissions.tag&&t<"2019-12-12")throw RangeError("'version' must be >= '2019-12-12' when providing 't' permission.");if(t<"2020-02-10"&&e.permissions&&(e.permissions.move||e.permissions.execute))throw RangeError("'version' must be >= '2020-02-10' when providing the 'm' or 'e' permission.");if(t<"2021-04-10"&&e.permissions&&e.permissions.filterByTags)throw RangeError("'version' must be >= '2021-04-10' when providing the 'f' permission.");if(t<"2020-02-10"&&(e.preauthorizedAgentObjectId||e.correlationId))throw RangeError("'version' must be >= '2020-02-10' when providing 'preauthorizedAgentObjectId' or 'correlationId'.");if(e.encryptionScope&&t<"2020-12-06")throw RangeError("'version' must be >= '2020-12-06' when provided 'encryptionScope' in SAS.");return e.version=t,e}class i0{constructor(e){this.client=e}download(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,i2)}getProperties(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,i4)}delete(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,i5)}undelete(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,i3)}setExpiry(e,t){let r={expiryOptions:e,options:eG(t||{})};return this.client.sendOperationRequest(r,i6)}setHttpHeaders(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,i9)}setImmutabilityPolicy(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,i8)}deleteImmutabilityPolicy(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,i7)}setLegalHold(e,t){let r={legalHold:e,options:eG(t||{})};return this.client.sendOperationRequest(r,oe)}setMetadata(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,ot)}acquireLease(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,or)}releaseLease(e,t){let r={leaseId:e,options:eG(t||{})};return this.client.sendOperationRequest(r,on)}renewLease(e,t){let r={leaseId:e,options:eG(t||{})};return this.client.sendOperationRequest(r,os)}changeLease(e,t,r){let n={leaseId:e,proposedLeaseId:t,options:eG(r||{})};return this.client.sendOperationRequest(n,oi)}breakLease(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,oo)}createSnapshot(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,oa)}startCopyFromURL(e,t){let r={copySource:e,options:eG(t||{})};return this.client.sendOperationRequest(r,ol)}copyFromURL(e,t){let r={copySource:e,options:eG(t||{})};return this.client.sendOperationRequest(r,oc)}abortCopyFromURL(e,t){let r={copyId:e,options:eG(t||{})};return this.client.sendOperationRequest(r,od)}setTier(e,t){let r={tier:e,options:eG(t||{})};return this.client.sendOperationRequest(r,op)}getAccountInfo(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,ou)}query(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,om)}getTags(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,oh)}setTags(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,og)}}let i1=new e6(ti,!0),i2={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:ti.BlobDownloadHeaders},206:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:ti.BlobDownloadHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobDownloadExceptionHeaders}},queryParameters:[tu,tW,tJ],urlParameters:[tc],headerParameters:[tm,th,tg,tA,tB,tq,tY,{parameterPath:["options","rangeGetContentMD5"],mapper:{serializedName:"x-ms-range-get-content-md5",xmlName:"x-ms-range-get-content-md5",type:{name:"Boolean"}}},{parameterPath:["options","rangeGetContentCRC64"],mapper:{serializedName:"x-ms-range-get-content-crc64",xmlName:"x-ms-range-get-content-crc64",type:{name:"Boolean"}}},tZ,t0,t1,t2,t4,t5],isXML:!0,serializer:i1},i4={path:"/{containerName}/{blob}",httpMethod:"HEAD",responses:{200:{headersMapper:ti.BlobGetPropertiesHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobGetPropertiesExceptionHeaders}},queryParameters:[tu,tW,tJ],urlParameters:[tc],headerParameters:[tm,th,tg,tA,tB,tq,tZ,t0,t1,t2,t4,t5],isXML:!0,serializer:i1},i5={path:"/{containerName}/{blob}",httpMethod:"DELETE",responses:{202:{headersMapper:ti.BlobDeleteHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobDeleteExceptionHeaders}},queryParameters:[tu,tW,tJ,{parameterPath:["options","blobDeleteType"],mapper:{serializedName:"deletetype",xmlName:"deletetype",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg,tA,tB,tq,t2,t4,t5,{parameterPath:["options","deleteSnapshots"],mapper:{serializedName:"x-ms-delete-snapshots",xmlName:"x-ms-delete-snapshots",type:{name:"Enum",allowedValues:["include","only"]}}}],isXML:!0,serializer:i1},i3={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.BlobUndeleteHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobUndeleteExceptionHeaders}},queryParameters:[tu,tz],urlParameters:[tc],headerParameters:[tm,th,tg],isXML:!0,serializer:i1},i6={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.BlobSetExpiryHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobSetExpiryExceptionHeaders}},queryParameters:[tu,{parameterPath:"comp",mapper:{defaultValue:"expiry",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg,{parameterPath:"expiryOptions",mapper:{serializedName:"x-ms-expiry-option",required:!0,xmlName:"x-ms-expiry-option",type:{name:"String"}}},{parameterPath:["options","expiresOn"],mapper:{serializedName:"x-ms-expiry-time",xmlName:"x-ms-expiry-time",type:{name:"String"}}}],isXML:!0,serializer:i1},i9={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.BlobSetHttpHeadersHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobSetHttpHeadersExceptionHeaders}},queryParameters:[tp,tu],urlParameters:[tc],headerParameters:[tm,th,tg,tA,tB,tq,t2,t4,t5,t3,t6,t9,t8,t7,re],isXML:!0,serializer:i1},i8={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.BlobSetImmutabilityPolicyHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobSetImmutabilityPolicyExceptionHeaders}},queryParameters:[tu,rt],urlParameters:[tc],headerParameters:[tm,th,tg,tq,rr,rn],isXML:!0,serializer:i1},i7={path:"/{containerName}/{blob}",httpMethod:"DELETE",responses:{200:{headersMapper:ti.BlobDeleteImmutabilityPolicyHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobDeleteImmutabilityPolicyExceptionHeaders}},queryParameters:[tu,rt],urlParameters:[tc],headerParameters:[tm,th,tg],isXML:!0,serializer:i1},oe={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.BlobSetLegalHoldHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobSetLegalHoldExceptionHeaders}},queryParameters:[tu,{parameterPath:"comp",mapper:{defaultValue:"legalhold",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg,{parameterPath:"legalHold",mapper:{serializedName:"x-ms-legal-hold",required:!0,xmlName:"x-ms-legal-hold",type:{name:"Boolean"}}}],isXML:!0,serializer:i1},ot={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.BlobSetMetadataHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobSetMetadataExceptionHeaders}},queryParameters:[tu,tj],urlParameters:[tc],headerParameters:[tm,th,tg,tT,tA,tB,tq,tZ,t0,t1,t2,t4,t5,rs],isXML:!0,serializer:i1},or={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.BlobAcquireLeaseHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobAcquireLeaseExceptionHeaders}},queryParameters:[tu,tH],urlParameters:[tc],headerParameters:[tm,th,tg,tB,tq,tL,t_,tD,t2,t4,t5],isXML:!0,serializer:i1},on={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.BlobReleaseLeaseHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobReleaseLeaseExceptionHeaders}},queryParameters:[tu,tH],urlParameters:[tc],headerParameters:[tm,th,tg,tB,tq,tU,t$,t2,t4,t5],isXML:!0,serializer:i1},os={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.BlobRenewLeaseHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobRenewLeaseExceptionHeaders}},queryParameters:[tu,tH],urlParameters:[tc],headerParameters:[tm,th,tg,tB,tq,t$,tF,t2,t4,t5],isXML:!0,serializer:i1},oi={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.BlobChangeLeaseHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobChangeLeaseExceptionHeaders}},queryParameters:[tu,tH],urlParameters:[tc],headerParameters:[tm,th,tg,tB,tq,t$,tX,tG,t2,t4,t5],isXML:!0,serializer:i1},oo={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:ti.BlobBreakLeaseHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobBreakLeaseExceptionHeaders}},queryParameters:[tu,tH],urlParameters:[tc],headerParameters:[tm,th,tg,tB,tq,tV,tK,t2,t4,t5],isXML:!0,serializer:i1},oa={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.BlobCreateSnapshotHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobCreateSnapshotExceptionHeaders}},queryParameters:[tu,{parameterPath:"comp",mapper:{defaultValue:"snapshot",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg,tT,tA,tB,tq,tZ,t0,t1,t2,t4,t5,rs],isXML:!0,serializer:i1},ol={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:ti.BlobStartCopyFromURLHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobStartCopyFromURLExceptionHeaders}},queryParameters:[tu],urlParameters:[tc],headerParameters:[tm,th,tg,tT,tA,tB,tq,t2,t4,t5,rr,rn,ri,ro,ra,rl,rc,rd,rp,ru,rm,{parameterPath:["options","sealBlob"],mapper:{serializedName:"x-ms-seal-blob",xmlName:"x-ms-seal-blob",type:{name:"Boolean"}}},rh],isXML:!0,serializer:i1},oc={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:ti.BlobCopyFromURLHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobCopyFromURLExceptionHeaders}},queryParameters:[tu],urlParameters:[tc],headerParameters:[tm,th,tg,tT,tA,tB,tq,t2,t4,t5,rr,rn,rs,ri,ra,rl,rc,rd,ru,rm,rh,{parameterPath:"xMsRequiresSync",mapper:{defaultValue:"true",isConstant:!0,serializedName:"x-ms-requires-sync",type:{name:"String"}}},rg,ry,rf],isXML:!0,serializer:i1},od={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{204:{headersMapper:ti.BlobAbortCopyFromURLHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobAbortCopyFromURLExceptionHeaders}},queryParameters:[tu,{parameterPath:"comp",mapper:{defaultValue:"copy",isConstant:!0,serializedName:"comp",type:{name:"String"}}},{parameterPath:"copyId",mapper:{serializedName:"copyid",required:!0,xmlName:"copyid",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg,tA,{parameterPath:"copyActionAbortConstant",mapper:{defaultValue:"abort",isConstant:!0,serializedName:"x-ms-copy-action",type:{name:"String"}}}],isXML:!0,serializer:i1},op={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.BlobSetTierHeaders},202:{headersMapper:ti.BlobSetTierHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobSetTierExceptionHeaders}},queryParameters:[tu,tW,tJ,{parameterPath:"comp",mapper:{defaultValue:"tier",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg,tA,t5,ro,{parameterPath:"tier",mapper:{serializedName:"x-ms-access-tier",required:!0,xmlName:"x-ms-access-tier",type:{name:"Enum",allowedValues:["P4","P6","P10","P15","P20","P30","P40","P50","P60","P70","P80","Hot","Cool","Archive","Cold"]}}}],isXML:!0,serializer:i1},ou={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{headersMapper:ti.BlobGetAccountInfoHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobGetAccountInfoExceptionHeaders}},queryParameters:[tp,tC],urlParameters:[tc],headerParameters:[tm,tg],isXML:!0,serializer:i1},om={path:"/{containerName}/{blob}",httpMethod:"POST",responses:{200:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:ti.BlobQueryHeaders},206:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:ti.BlobQueryHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobQueryExceptionHeaders}},requestBody:rb,queryParameters:[tu,tW,{parameterPath:"comp",mapper:{defaultValue:"query",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[to,tl,tm,th,tA,tB,tq,tZ,t0,t1,t2,t4,t5],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:i1},oh={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:ti.BlobTags,headersMapper:ti.BlobGetTagsHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobGetTagsExceptionHeaders}},queryParameters:[tu,tW,tJ,rv],urlParameters:[tc],headerParameters:[tm,th,tg,tA,t5],isXML:!0,serializer:i1},og={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{204:{headersMapper:ti.BlobSetTagsHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlobSetTagsExceptionHeaders}},requestBody:rS,queryParameters:[tu,tJ,rv],urlParameters:[tc],headerParameters:[to,tl,tm,th,tA,t5,rP,rC],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:i1};class oy{constructor(e,t){let r=new iU(e.url,e.pipeline.toServiceClientOptions());this._url=e.url,void 0===e.name?(this._isContainer=!0,this._containerOrBlobOperation=new r1(r)):(this._isContainer=!1,this._containerOrBlobOperation=new i0(r)),t||(t=e2()),this._leaseId=t}get leaseId(){return this._leaseId}get url(){return this._url}async acquireLease(e,t={}){var r,n,s,i,o,a;let{span:l,updatedOptions:c}=iF("BlobLeaseClient-acquireLease",t);if(this._isContainer&&((null===(r=t.conditions)||void 0===r?void 0:r.ifMatch)&&(null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)!==""||(null===(s=t.conditions)||void 0===s?void 0:s.ifNoneMatch)&&(null===(i=t.conditions)||void 0===i?void 0:i.ifNoneMatch)!==""||(null===(o=t.conditions)||void 0===o?void 0:o.tagConditions)))throw RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{return await this._containerOrBlobOperation.acquireLease(Object.assign({abortSignal:t.abortSignal,duration:e,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(a=t.conditions)||void 0===a?void 0:a.tagConditions}),proposedLeaseId:this._leaseId},iV(c)))}catch(e){throw l.setStatus({code:k.ERROR,message:e.message}),e}finally{l.end()}}async changeLease(e,t={}){var r,n,s,i,o,a;let{span:l,updatedOptions:c}=iF("BlobLeaseClient-changeLease",t);if(this._isContainer&&((null===(r=t.conditions)||void 0===r?void 0:r.ifMatch)&&(null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)!==""||(null===(s=t.conditions)||void 0===s?void 0:s.ifNoneMatch)&&(null===(i=t.conditions)||void 0===i?void 0:i.ifNoneMatch)!==""||(null===(o=t.conditions)||void 0===o?void 0:o.tagConditions)))throw RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{let r=await this._containerOrBlobOperation.changeLease(this._leaseId,e,Object.assign({abortSignal:t.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(a=t.conditions)||void 0===a?void 0:a.tagConditions})},iV(c)));return this._leaseId=e,r}catch(e){throw l.setStatus({code:k.ERROR,message:e.message}),e}finally{l.end()}}async releaseLease(e={}){var t,r,n,s,i,o;let{span:a,updatedOptions:l}=iF("BlobLeaseClient-releaseLease",e);if(this._isContainer&&((null===(t=e.conditions)||void 0===t?void 0:t.ifMatch)&&(null===(r=e.conditions)||void 0===r?void 0:r.ifMatch)!==""||(null===(n=e.conditions)||void 0===n?void 0:n.ifNoneMatch)&&(null===(s=e.conditions)||void 0===s?void 0:s.ifNoneMatch)!==""||(null===(i=e.conditions)||void 0===i?void 0:i.tagConditions)))throw RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{return await this._containerOrBlobOperation.releaseLease(this._leaseId,Object.assign({abortSignal:e.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(o=e.conditions)||void 0===o?void 0:o.tagConditions})},iV(l)))}catch(e){throw a.setStatus({code:k.ERROR,message:e.message}),e}finally{a.end()}}async renewLease(e={}){var t,r,n,s,i,o;let{span:a,updatedOptions:l}=iF("BlobLeaseClient-renewLease",e);if(this._isContainer&&((null===(t=e.conditions)||void 0===t?void 0:t.ifMatch)&&(null===(r=e.conditions)||void 0===r?void 0:r.ifMatch)!==""||(null===(n=e.conditions)||void 0===n?void 0:n.ifNoneMatch)&&(null===(s=e.conditions)||void 0===s?void 0:s.ifNoneMatch)!==""||(null===(i=e.conditions)||void 0===i?void 0:i.tagConditions)))throw RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{return await this._containerOrBlobOperation.renewLease(this._leaseId,Object.assign({abortSignal:e.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(o=e.conditions)||void 0===o?void 0:o.tagConditions})},iV(l)))}catch(e){throw a.setStatus({code:k.ERROR,message:e.message}),e}finally{a.end()}}async breakLease(e,t={}){var r,n,s,i,o,a;let{span:l,updatedOptions:c}=iF("BlobLeaseClient-breakLease",t);if(this._isContainer&&((null===(r=t.conditions)||void 0===r?void 0:r.ifMatch)&&(null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)!==""||(null===(s=t.conditions)||void 0===s?void 0:s.ifNoneMatch)&&(null===(i=t.conditions)||void 0===i?void 0:i.ifNoneMatch)!==""||(null===(o=t.conditions)||void 0===o?void 0:o.tagConditions)))throw RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{let r=Object.assign({abortSignal:t.abortSignal,breakPeriod:e,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(a=t.conditions)||void 0===a?void 0:a.tagConditions})},iV(c));return await this._containerOrBlobOperation.breakLease(r)}catch(e){throw l.setStatus({code:k.ERROR,message:e.message}),e}finally{l.end()}}}class of{constructor(e,t={}){this.originalResponse=e}get acceptRanges(){return this.originalResponse.acceptRanges}get cacheControl(){return this.originalResponse.cacheControl}get contentDisposition(){return this.originalResponse.contentDisposition}get contentEncoding(){return this.originalResponse.contentEncoding}get contentLanguage(){return this.originalResponse.contentLanguage}get blobSequenceNumber(){return this.originalResponse.blobSequenceNumber}get blobType(){return this.originalResponse.blobType}get contentLength(){return this.originalResponse.contentLength}get contentMD5(){return this.originalResponse.contentMD5}get contentRange(){return this.originalResponse.contentRange}get contentType(){return this.originalResponse.contentType}get copyCompletedOn(){}get copyId(){return this.originalResponse.copyId}get copyProgress(){return this.originalResponse.copyProgress}get copySource(){return this.originalResponse.copySource}get copyStatus(){return this.originalResponse.copyStatus}get copyStatusDescription(){return this.originalResponse.copyStatusDescription}get leaseDuration(){return this.originalResponse.leaseDuration}get leaseState(){return this.originalResponse.leaseState}get leaseStatus(){return this.originalResponse.leaseStatus}get date(){return this.originalResponse.date}get blobCommittedBlockCount(){return this.originalResponse.blobCommittedBlockCount}get etag(){return this.originalResponse.etag}get errorCode(){return this.originalResponse.errorCode}get isServerEncrypted(){return this.originalResponse.isServerEncrypted}get blobContentMD5(){return this.originalResponse.blobContentMD5}get lastModified(){return this.originalResponse.lastModified}get metadata(){return this.originalResponse.metadata}get requestId(){return this.originalResponse.requestId}get clientRequestId(){return this.originalResponse.clientRequestId}get version(){return this.originalResponse.version}get encryptionKeySha256(){return this.originalResponse.encryptionKeySha256}get contentCrc64(){return this.originalResponse.contentCrc64}get blobBody(){throw Error("Quick query in browser is not supported yet.")}get readableStreamBody(){}get _response(){return this.originalResponse._response}}class ob{constructor(e){this.client=e}create(e,t){let r={contentLength:e,options:eG(t||{})};return this.client.sendOperationRequest(r,oP)}appendBlock(e,t,r){let n={contentLength:e,body:t,options:eG(r||{})};return this.client.sendOperationRequest(n,oC)}appendBlockFromUrl(e,t,r){let n={sourceUrl:e,contentLength:t,options:eG(r||{})};return this.client.sendOperationRequest(n,oR)}seal(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,ox)}}let ov=new e6(ti,!0),oS=new e6(ti,!1),oP={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.AppendBlobCreateHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.AppendBlobCreateExceptionHeaders}},queryParameters:[tu],urlParameters:[tc],headerParameters:[tm,th,tg,tO,tT,tA,tB,tq,tZ,t0,t1,t2,t4,t5,t3,t6,t9,t8,t7,re,rr,rn,rs,rm,rh,{parameterPath:"blobType",mapper:{defaultValue:"AppendBlob",isConstant:!0,serializedName:"x-ms-blob-type",type:{name:"String"}}}],isXML:!0,serializer:ov},oC={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.AppendBlobAppendBlockHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.AppendBlobAppendBlockExceptionHeaders}},requestBody:rw,queryParameters:[tu,rk],urlParameters:[tc],headerParameters:[tm,th,tO,tA,tB,tq,tZ,t0,t1,t2,t4,t5,rs,rP,rC,rO,rE,rz,rH],mediaType:"binary",serializer:oS},oR={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.AppendBlobAppendBlockFromUrlHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.AppendBlobAppendBlockFromUrlExceptionHeaders}},queryParameters:[tu,rk],urlParameters:[tc],headerParameters:[tm,th,tg,tO,tA,tB,tq,tZ,t0,t1,t2,t4,t5,rs,ra,rl,rc,rd,rg,ry,rP,rB,rq,rz,rH,rL],isXML:!0,serializer:ov},ox={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.AppendBlobSealHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.AppendBlobSealExceptionHeaders}},queryParameters:[tu,{parameterPath:"comp",mapper:{defaultValue:"seal",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg,tA,tB,tq,t2,t4,rH],isXML:!0,serializer:ov};class oO{constructor(e){this.client=e}upload(e,t,r){let n={contentLength:e,body:t,options:eG(r||{})};return this.client.sendOperationRequest(n,oN)}putBlobFromUrl(e,t,r){let n={contentLength:e,copySource:t,options:eG(r||{})};return this.client.sendOperationRequest(n,oM)}stageBlock(e,t,r,n){let s={blockId:e,contentLength:t,body:r,options:eG(n||{})};return this.client.sendOperationRequest(s,oT)}stageBlockFromURL(e,t,r,n){let s={blockId:e,contentLength:t,sourceUrl:r,options:eG(n||{})};return this.client.sendOperationRequest(s,oI)}commitBlockList(e,t){let r={blocks:e,options:eG(t||{})};return this.client.sendOperationRequest(r,oA)}getBlockList(e,t){let r={listType:e,options:eG(t||{})};return this.client.sendOperationRequest(r,oB)}}let ow=new e6(ti,!0),oE=new e6(ti,!1),oN={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.BlockBlobUploadHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlockBlobUploadExceptionHeaders}},requestBody:rw,queryParameters:[tu],urlParameters:[tc],headerParameters:[tm,th,tO,tT,tA,tB,tq,tZ,t0,t1,t2,t4,t5,t3,t6,t9,t8,t7,re,rr,rn,rs,ri,rm,rh,rP,rC,rO,rE,r_],mediaType:"binary",serializer:oE},oM={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.BlockBlobPutBlobFromUrlHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlockBlobPutBlobFromUrlExceptionHeaders}},queryParameters:[tu],urlParameters:[tc],headerParameters:[tm,th,tg,tO,tT,tA,tB,tq,tZ,t0,t1,t2,t4,t5,t3,t6,t9,t8,t7,re,rs,ri,ra,rl,rc,rd,rp,ru,rm,rg,ry,rf,rP,r_,{parameterPath:["options","copySourceBlobProperties"],mapper:{serializedName:"x-ms-copy-source-blob-properties",xmlName:"x-ms-copy-source-blob-properties",type:{name:"Boolean"}}}],isXML:!0,serializer:ow},oT={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.BlockBlobStageBlockHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlockBlobStageBlockExceptionHeaders}},requestBody:rw,queryParameters:[tu,rD,rU],urlParameters:[tc],headerParameters:[tm,th,tO,tA,tZ,t0,t1,rs,rP,rC,rO,rE],mediaType:"binary",serializer:oE},oI={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.BlockBlobStageBlockFromURLHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlockBlobStageBlockFromURLExceptionHeaders}},queryParameters:[tu,rD,rU],urlParameters:[tc],headerParameters:[tm,th,tg,tO,tA,tZ,t0,t1,rs,ra,rl,rc,rd,rg,ry,rB,rq,rL],isXML:!0,serializer:ow},oA={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.BlockBlobCommitBlockListHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlockBlobCommitBlockListExceptionHeaders}},requestBody:r$,queryParameters:[tu,rF],urlParameters:[tc],headerParameters:[to,tl,tm,th,tT,tA,tB,tq,tZ,t0,t1,t2,t4,t5,t3,t6,t9,t8,t7,re,rr,rn,rs,ri,rm,rh,rP,rC],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:ow},oB={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:ti.BlockList,headersMapper:ti.BlockBlobGetBlockListHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.BlockBlobGetBlockListExceptionHeaders}},queryParameters:[tu,tW,rF,{parameterPath:"listType",mapper:{defaultValue:"committed",serializedName:"blocklisttype",required:!0,xmlName:"blocklisttype",type:{name:"Enum",allowedValues:["committed","uncommitted","all"]}}}],urlParameters:[tc],headerParameters:[tm,th,tg,tA,t5],isXML:!0,serializer:ow};class oq{constructor(e){this.client=e}create(e,t,r){let n={contentLength:e,blobContentLength:t,options:eG(r||{})};return this.client.sendOperationRequest(n,oz)}uploadPages(e,t,r){let n={contentLength:e,body:t,options:eG(r||{})};return this.client.sendOperationRequest(n,oH)}clearPages(e,t){let r={contentLength:e,options:eG(t||{})};return this.client.sendOperationRequest(r,oL)}uploadPagesFromURL(e,t,r,n,s){let i={sourceUrl:e,sourceRange:t,contentLength:r,range:n,options:eG(s||{})};return this.client.sendOperationRequest(i,o_)}getPageRanges(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,oD)}getPageRangesDiff(e){let t={options:eG(e||{})};return this.client.sendOperationRequest(t,oU)}resize(e,t){let r={blobContentLength:e,options:eG(t||{})};return this.client.sendOperationRequest(r,o$)}updateSequenceNumber(e,t){let r={sequenceNumberAction:e,options:eG(t||{})};return this.client.sendOperationRequest(r,oF)}copyIncremental(e,t){let r={copySource:e,options:eG(t||{})};return this.client.sendOperationRequest(r,oV)}}let oj=new e6(ti,!0),ok=new e6(ti,!1),oz={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.PageBlobCreateHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.PageBlobCreateExceptionHeaders}},queryParameters:[tu],urlParameters:[tc],headerParameters:[tm,th,tg,tO,tT,tA,tB,tq,tZ,t0,t1,t2,t4,t5,t3,t6,t9,t8,t7,re,rr,rn,rs,ri,rm,rh,{parameterPath:"blobType",mapper:{defaultValue:"PageBlob",isConstant:!0,serializedName:"x-ms-blob-type",type:{name:"String"}}},rR,rx],isXML:!0,serializer:oj},oH={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.PageBlobUploadPagesHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.PageBlobUploadPagesExceptionHeaders}},requestBody:rw,queryParameters:[tu,rN],urlParameters:[tc],headerParameters:[tm,th,tO,tA,tB,tq,tY,tZ,t0,t1,t2,t4,t5,rs,rP,rC,rO,rE,rM,rT,rI,rA],mediaType:"binary",serializer:ok},oL={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.PageBlobClearPagesHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.PageBlobClearPagesExceptionHeaders}},queryParameters:[tu,rN],urlParameters:[tc],headerParameters:[tm,th,tg,tO,tA,tB,tq,tY,tZ,t0,t1,t2,t4,t5,rs,rT,rI,rA,{parameterPath:"pageWrite",mapper:{defaultValue:"clear",isConstant:!0,serializedName:"x-ms-page-write",type:{name:"String"}}}],isXML:!0,serializer:oj},o_={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:ti.PageBlobUploadPagesFromURLHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.PageBlobUploadPagesFromURLExceptionHeaders}},queryParameters:[tu,rN],urlParameters:[tc],headerParameters:[tm,th,tg,tO,tA,tB,tq,tZ,t0,t1,t2,t4,t5,rs,ra,rl,rc,rd,rg,ry,rM,rT,rI,rA,rB,{parameterPath:"sourceRange",mapper:{serializedName:"x-ms-source-range",required:!0,xmlName:"x-ms-source-range",type:{name:"String"}}},rq,{parameterPath:"range",mapper:{serializedName:"x-ms-range",required:!0,xmlName:"x-ms-range",type:{name:"String"}}}],isXML:!0,serializer:oj},oD={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:ti.PageList,headersMapper:ti.PageBlobGetPageRangesHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.PageBlobGetPageRangesExceptionHeaders}},queryParameters:[tu,tb,tv,tW,rj],urlParameters:[tc],headerParameters:[tm,th,tg,tA,tB,tq,tY,t2,t4,t5],isXML:!0,serializer:oj},oU={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:ti.PageList,headersMapper:ti.PageBlobGetPageRangesDiffHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.PageBlobGetPageRangesDiffExceptionHeaders}},queryParameters:[tu,tb,tv,tW,rj,{parameterPath:["options","prevsnapshot"],mapper:{serializedName:"prevsnapshot",xmlName:"prevsnapshot",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg,tA,tB,tq,tY,t2,t4,t5,{parameterPath:["options","prevSnapshotUrl"],mapper:{serializedName:"x-ms-previous-snapshot-url",xmlName:"x-ms-previous-snapshot-url",type:{name:"String"}}}],isXML:!0,serializer:oj},o$={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.PageBlobResizeHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.PageBlobResizeExceptionHeaders}},queryParameters:[tp,tu],urlParameters:[tc],headerParameters:[tm,th,tg,tA,tB,tq,tZ,t0,t1,t2,t4,t5,rs,rR],isXML:!0,serializer:oj},oF={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:ti.PageBlobUpdateSequenceNumberHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.PageBlobUpdateSequenceNumberExceptionHeaders}},queryParameters:[tp,tu],urlParameters:[tc],headerParameters:[tm,th,tg,tA,tB,tq,t2,t4,t5,rx,{parameterPath:"sequenceNumberAction",mapper:{serializedName:"x-ms-sequence-number-action",required:!0,xmlName:"x-ms-sequence-number-action",type:{name:"Enum",allowedValues:["max","update","increment"]}}}],isXML:!0,serializer:oj},oV={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:ti.PageBlobCopyIncrementalHeaders},default:{bodyMapper:ti.StorageError,headersMapper:ti.PageBlobCopyIncrementalExceptionHeaders}},queryParameters:[tu,{parameterPath:"comp",mapper:{defaultValue:"incrementalcopy",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[tc],headerParameters:[tm,th,tg,tB,tq,t2,t4,t5,ru],isXML:!0,serializer:oj};function oK(e){if(void 0!==e)return e}function oX(e,t){if(e&&!t)throw RangeError("Customer-provided encryption key must be used over HTTPS.");e&&!e.encryptionAlgorithm&&(e.encryptionAlgorithm="AES256")}function oG(e){let t=(e._response.parsedBody.pageRange||[]).map(e=>({offset:e.start,count:e.end-e.start})),r=(e._response.parsedBody.clearRange||[]).map(e=>({offset:e.start,count:e.end-e.start}));return Object.assign(Object.assign({},e),{pageRange:t,clearRange:r,_response:Object.assign(Object.assign({},e._response),{parsedBody:{pageRange:t,clearRange:r}})})}(x=$||($={})).Hot="Hot",x.Cool="Cool",x.Cold="Cold",x.Archive="Archive",(O=F||(F={})).P4="P4",O.P6="P6",O.P10="P10",O.P15="P15",O.P20="P20",O.P30="P30",O.P40="P40",O.P50="P50",O.P60="P60",O.P70="P70",O.P80="P80",(w=V||(V={})).StorageOAuthScopes="https://storage.azure.com/.default",w.DiskComputeOAuthScopes="https://disk.compute.azure.com/.default";class oQ extends Error{constructor(e){super(e),this.name="PollerStoppedError",Object.setPrototypeOf(this,oQ.prototype)}}class oW extends Error{constructor(e){super(e),this.name="PollerCancelledError",Object.setPrototypeOf(this,oW.prototype)}}class oJ{constructor(e){this.resolveOnUnsuccessful=!1,this.stopped=!0,this.pollProgressCallbacks=[],this.operation=e,this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.promise.catch(()=>{})}async startPolling(e={}){for(this.stopped&&(this.stopped=!1);!this.isStopped()&&!this.isDone();)await this.poll(e),await this.delay()}async pollOnce(e={}){this.isDone()||(this.operation=await this.operation.update({abortSignal:e.abortSignal,fireProgress:this.fireProgress.bind(this)})),this.processUpdatedState()}fireProgress(e){for(let t of this.pollProgressCallbacks)t(e)}async cancelOnce(e={}){this.operation=await this.operation.cancel(e)}poll(e={}){if(!this.pollOncePromise){this.pollOncePromise=this.pollOnce(e);let t=()=>{this.pollOncePromise=void 0};this.pollOncePromise.then(t,t).catch(this.reject)}return this.pollOncePromise}processUpdatedState(){if(this.operation.state.error&&(this.stopped=!0,!this.resolveOnUnsuccessful))throw this.reject(this.operation.state.error),this.operation.state.error;if(this.operation.state.isCancelled&&(this.stopped=!0,!this.resolveOnUnsuccessful)){let e=new oW("Operation was canceled");throw this.reject(e),e}this.isDone()&&this.resolve&&this.resolve(this.getResult())}async pollUntilDone(e={}){return this.stopped&&this.startPolling(e).catch(this.reject),this.processUpdatedState(),this.promise}onProgress(e){return this.pollProgressCallbacks.push(e),()=>{this.pollProgressCallbacks=this.pollProgressCallbacks.filter(t=>t!==e)}}isDone(){let e=this.operation.state;return!!(e.isCompleted||e.isCancelled||e.error)}stopPolling(){!this.stopped&&(this.stopped=!0,this.reject&&this.reject(new oQ("This poller is already stopped")))}isStopped(){return this.stopped}cancelOperation(e={}){if(this.cancelPromise){if(e.abortSignal)throw Error("A cancel request is currently pending")}else this.cancelPromise=this.cancelOnce(e);return this.cancelPromise}getOperationState(){return this.operation.state}getResult(){let e=this.operation.state;return e.result}toString(){return this.operation.toString()}}class oY extends oJ{constructor(e){let t;let{blobClient:r,copySource:n,intervalInMs:s=15e3,onProgress:i,resumeFrom:o,startCopyFromURLOptions:a}=e;o&&(t=JSON.parse(o).state);let l=o2(Object.assign(Object.assign({},t),{blobClient:r,copySource:n,startCopyFromURLOptions:a}));super(l),"function"==typeof i&&this.onProgress(i),this.intervalInMs=s}delay(){return s7(this.intervalInMs)}}let oZ=async function(e={}){let t=this.state,{copyId:r}=t;return t.isCompleted||(r&&await t.blobClient.abortCopyFromURL(r,{abortSignal:e.abortSignal}),t.isCancelled=!0),o2(t)},o0=async function(e={}){let t=this.state,{blobClient:r,copySource:n,startCopyFromURLOptions:s}=t;if(t.isStarted){if(!t.isCompleted)try{let r=await t.blobClient.getProperties({abortSignal:e.abortSignal}),{copyStatus:n,copyProgress:s}=r,i=t.copyProgress;s&&(t.copyProgress=s),"pending"===n&&s!==i&&"function"==typeof e.fireProgress?e.fireProgress(t):"success"===n?(t.result=r,t.isCompleted=!0):"failed"===n&&(t.error=Error(`Blob copy failed with reason: "${r.copyStatusDescription||"unknown"}"`),t.isCompleted=!0)}catch(e){t.error=e,t.isCompleted=!0}}else{t.isStarted=!0;let e=await r.startCopyFromURL(n,s);t.copyId=e.copyId,"success"===e.copyStatus&&(t.result=e,t.isCompleted=!0)}return o2(t)},o1=function(){return JSON.stringify({state:this.state},(e,t)=>{if("blobClient"!==e)return t})};function o2(e){return{state:Object.assign({},e),cancel:oZ,toString:o1,update:o0}}function o4(e){if(e.offset<0)throw RangeError("Range.offset cannot be smaller than 0.");if(e.count&&e.count<=0)throw RangeError("Range.count must be larger than 0. Leave it undefined if you want a range from offset to the end.");return e.count?`bytes=${e.offset}-${e.offset+e.count-1}`:`bytes=${e.offset}-`}var o5=r(512);(E=K||(K={}))[E.Good=0]="Good",E[E.Error=1]="Error";class o3{constructor(e=5){if(this.actives=0,this.completed=0,this.offset=0,this.operations=[],this.state=K.Good,e<1)throw RangeError("concurrency must be larger than 0");this.concurrency=e,this.emitter=new o5.EventEmitter}addOperation(e){this.operations.push(async()=>{try{this.actives++,await e(),this.actives--,this.completed++,this.parallelExecute()}catch(e){this.emitter.emit("error",e)}})}async do(){return 0===this.operations.length?Promise.resolve():(this.parallelExecute(),new Promise((e,t)=>{this.emitter.on("finish",e),this.emitter.on("error",e=>{this.state=K.Error,t(e)})}))}nextOperation(){return this.offset<this.operations.length?this.operations[this.offset++]:null}parallelExecute(){if(this.state!==K.Error){if(this.completed>=this.operations.length){this.emitter.emit("finish");return}for(;this.actives<this.concurrency;){let e=this.nextOperation();if(!e)return;e()}}}}class o6{}async function o9(e){let t=new FileReader;return new Promise((r,n)=>{t.onloadend=e=>{r(e.target.result)},t.onerror=n,t.readAsText(e)})}let o8=function(){},o7=function(){};var ae=r(7133).lW;class at extends i${constructor(e,t,r,n){let s,i;if(n=n||{},ii(t))i=e,s=t;else if(Q&&t instanceof il||t instanceof sW||W(t))i=e,s=ia(t,n=r);else if(t||"string"==typeof t){if(t&&"string"==typeof t&&r&&"string"==typeof r){let o=sv(e);if("AccountConnString"===o.kind){if(Q){let e=new il(o.accountName,o.accountKey);i=sS(sS(o.url,encodeURIComponent(t)),encodeURIComponent(r)),n.proxyOptions||(n.proxyOptions=Y(o.proxyUri)),s=ia(e,n)}else throw Error("Account connection string is only supported in Node.js environment")}else if("SASConnString"===o.kind)i=sS(sS(o.url,encodeURIComponent(t)),encodeURIComponent(r))+"?"+o.accountSas,s=ia(new sW,n);else throw Error("Connection string must be either an Account connection string or a SAS connection string")}else throw Error("Expecting non-empty strings for containerName and blobName parameters")}else i=e,r&&"string"!=typeof r&&(n=r),s=ia(new sW,n);super(i,s),({blobName:this._name,containerName:this._containerName}=this.getBlobAndContainerNamesFromUrl()),this.blobContext=new i0(this.storageClientContext),this._snapshot=sC(this.url,sp.Parameters.SNAPSHOT),this._versionId=sC(this.url,sp.Parameters.VERSIONID)}get name(){return this._name}get containerName(){return this._containerName}withSnapshot(e){return new at(sP(this.url,sp.Parameters.SNAPSHOT,0===e.length?void 0:e),this.pipeline)}withVersion(e){return new at(sP(this.url,sp.Parameters.VERSIONID,0===e.length?void 0:e),this.pipeline)}getAppendBlobClient(){return new ar(this.url,this.pipeline)}getBlockBlobClient(){return new an(this.url,this.pipeline)}getPageBlobClient(){return new as(this.url,this.pipeline)}async download(e=0,t,r={}){var n;r.conditions=r.conditions||{},r.conditions=r.conditions||{},oX(r.customerProvidedKey,this.isHttps);let{span:s,updatedOptions:i}=iF("BlobClient-download",r);try{let s=await this.blobContext.download(Object.assign({abortSignal:r.abortSignal,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions}),requestOptions:{onDownloadProgress:Q?void 0:r.onProgress},range:0!==e||t?o4({offset:e,count:t}):void 0,rangeGetContentMD5:r.rangeGetContentMD5,rangeGetContentCRC64:r.rangeGetContentCrc64,snapshot:r.snapshot,cpkInfo:r.customerProvidedKey},iV(i))),o=Object.assign(Object.assign({},s),{_response:s._response,objectReplicationDestinationPolicyId:s.objectReplicationPolicyId,objectReplicationSourceProperties:sq(s.objectReplicationRules)});if(!Q)return o;if((void 0===r.maxRetryRequests||r.maxRetryRequests<0)&&(r.maxRetryRequests=5),void 0===s.contentLength)throw RangeError("File download response doesn't contain valid content length header");if(!s.etag)throw RangeError("File download response doesn't contain valid etag header");return new(1)(o,async t=>{var n;let i={leaseAccessConditions:r.conditions,modifiedAccessConditions:{ifMatch:r.conditions.ifMatch||s.etag,ifModifiedSince:r.conditions.ifModifiedSince,ifNoneMatch:r.conditions.ifNoneMatch,ifUnmodifiedSince:r.conditions.ifUnmodifiedSince,ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions},range:o4({count:e+s.contentLength-t,offset:t}),rangeGetContentMD5:r.rangeGetContentMD5,rangeGetContentCRC64:r.rangeGetContentCrc64,snapshot:r.snapshot,cpkInfo:r.customerProvidedKey};return(await this.blobContext.download(Object.assign({abortSignal:r.abortSignal},i))).readableStreamBody},e,s.contentLength,{maxRetryRequests:r.maxRetryRequests,onProgress:r.onProgress})}catch(e){throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}async exists(e={}){let{span:t,updatedOptions:r}=iF("BlobClient-exists",e);try{return oX(e.customerProvidedKey,this.isHttps),await this.getProperties({abortSignal:e.abortSignal,customerProvidedKey:e.customerProvidedKey,conditions:e.conditions,tracingOptions:r.tracingOptions}),!0}catch(e){if(404===e.statusCode)return!1;if(409===e.statusCode&&("BlobUsesCustomerSpecifiedEncryption"===e.details.errorCode||"BlobDoesNotUseCustomerSpecifiedEncryption"===e.details.errorCode))return!0;throw t.setStatus({code:k.ERROR,message:e.message}),e}finally{t.end()}}async getProperties(e={}){var t;let{span:r,updatedOptions:n}=iF("BlobClient-getProperties",e);try{e.conditions=e.conditions||{},oX(e.customerProvidedKey,this.isHttps);let r=await this.blobContext.getProperties(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey},iV(n)));return Object.assign(Object.assign({},r),{_response:r._response,objectReplicationDestinationPolicyId:r.objectReplicationPolicyId,objectReplicationSourceProperties:sq(r.objectReplicationRules)})}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async delete(e={}){var t;let{span:r,updatedOptions:n}=iF("BlobClient-delete",e);e.conditions=e.conditions||{};try{return await this.blobContext.delete(Object.assign({abortSignal:e.abortSignal,deleteSnapshots:e.deleteSnapshots,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions})},iV(n)))}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async deleteIfExists(e={}){var t,r;let{span:n,updatedOptions:s}=iF("BlobClient-deleteIfExists",e);try{let e=await this.delete(s);return Object.assign(Object.assign({succeeded:!0},e),{_response:e._response})}catch(e){if((null===(t=e.details)||void 0===t?void 0:t.errorCode)==="BlobNotFound")return n.setStatus({code:k.ERROR,message:"Expected exception when deleting a blob or snapshot only if it exists."}),Object.assign(Object.assign({succeeded:!1},null===(r=e.response)||void 0===r?void 0:r.parsedHeaders),{_response:e.response});throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async undelete(e={}){let{span:t,updatedOptions:r}=iF("BlobClient-undelete",e);try{return await this.blobContext.undelete(Object.assign({abortSignal:e.abortSignal},iV(r)))}catch(e){throw t.setStatus({code:k.ERROR,message:e.message}),e}finally{t.end()}}async setHTTPHeaders(e,t={}){var r;let{span:n,updatedOptions:s}=iF("BlobClient-setHTTPHeaders",t);t.conditions=t.conditions||{};try{return oX(t.customerProvidedKey,this.isHttps),await this.blobContext.setHttpHeaders(Object.assign({abortSignal:t.abortSignal,blobHttpHeaders:e,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions})},iV(s)))}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async setMetadata(e,t={}){var r;let{span:n,updatedOptions:s}=iF("BlobClient-setMetadata",t);t.conditions=t.conditions||{};try{return oX(t.customerProvidedKey,this.isHttps),await this.blobContext.setMetadata(Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,metadata:e,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope},iV(s)))}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async setTags(e,t={}){var r;let{span:n,updatedOptions:s}=iF("BlobClient-setTags",t);try{return await this.blobContext.setTags(Object.assign(Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions})},iV(s)),{tags:function(e){if(void 0===e)return;let t={blobTagSet:[]};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let n=e[r];t.blobTagSet.push({key:r,value:n})}return t}(e)}))}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async getTags(e={}){var t;let{span:r,updatedOptions:n}=iF("BlobClient-getTags",e);try{let r=await this.blobContext.getTags(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions})},iV(n))),s=Object.assign(Object.assign({},r),{_response:r._response,tags:sA({blobTagSet:r.blobTagSet})||{}});return s}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}getBlobLeaseClient(e){return new oy(this,e)}async createSnapshot(e={}){var t;let{span:r,updatedOptions:n}=iF("BlobClient-createSnapshot",e);e.conditions=e.conditions||{};try{return oX(e.customerProvidedKey,this.isHttps),await this.blobContext.createSnapshot(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,metadata:e.metadata,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey,encryptionScope:e.encryptionScope},iV(n)))}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async beginCopyFromURL(e,t={}){let r=new oY({blobClient:{abortCopyFromURL:(...e)=>this.abortCopyFromURL(...e),getProperties:(...e)=>this.getProperties(...e),startCopyFromURL:(...e)=>this.startCopyFromURL(...e)},copySource:e,intervalInMs:t.intervalInMs,onProgress:t.onProgress,resumeFrom:t.resumeFrom,startCopyFromURLOptions:t});return await r.poll(),r}async abortCopyFromURL(e,t={}){let{span:r,updatedOptions:n}=iF("BlobClient-abortCopyFromURL",t);try{return await this.blobContext.abortCopyFromURL(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions},iV(n)))}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async syncCopyFromURL(e,t={}){var r,n,s;let{span:i,updatedOptions:o}=iF("BlobClient-syncCopyFromURL",t);t.conditions=t.conditions||{},t.sourceConditions=t.sourceConditions||{};try{return await this.blobContext.copyFromURL(e,Object.assign({abortSignal:t.abortSignal,metadata:t.metadata,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:t.sourceConditions.ifMatch,sourceIfModifiedSince:t.sourceConditions.ifModifiedSince,sourceIfNoneMatch:t.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:t.sourceConditions.ifUnmodifiedSince},sourceContentMD5:t.sourceContentMD5,copySourceAuthorization:sk(t.sourceAuthorization),tier:oK(t.tier),blobTagsString:sI(t.tags),immutabilityPolicyExpiry:null===(n=t.immutabilityPolicy)||void 0===n?void 0:n.expiriesOn,immutabilityPolicyMode:null===(s=t.immutabilityPolicy)||void 0===s?void 0:s.policyMode,legalHold:t.legalHold,encryptionScope:t.encryptionScope,copySourceTags:t.copySourceTags},iV(o)))}catch(e){throw i.setStatus({code:k.ERROR,message:e.message}),e}finally{i.end()}}async setAccessTier(e,t={}){var r;let{span:n,updatedOptions:s}=iF("BlobClient-setAccessTier",t);try{return await this.blobContext.setTier(oK(e),Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),rehydratePriority:t.rehydratePriority},iV(s)))}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async downloadToBuffer(e,t,r,n={}){let s;let i=0,o=0,a=n;e instanceof ae?(s=e,i=t||0,o="number"==typeof r?r:0):(i="number"==typeof e?e:0,o="number"==typeof t?t:0,a=r||{});let{span:l,updatedOptions:c}=iF("BlobClient-downloadToBuffer",a);try{if(a.blockSize||(a.blockSize=0),a.blockSize<0)throw RangeError("blockSize option must be >= 0");if(0===a.blockSize&&(a.blockSize=4194304),i<0)throw RangeError("offset option must be >= 0");if(o&&o<=0)throw RangeError("count option must be greater than 0");if(a.conditions||(a.conditions={}),!o){let e=await this.getProperties(Object.assign(Object.assign({},a),{tracingOptions:Object.assign(Object.assign({},a.tracingOptions),iV(c))}));if((o=e.contentLength-i)<0)throw RangeError(`offset ${i} shouldn't be larger than blob size ${e.contentLength}`)}if(!s)try{s=ae.alloc(o)}catch(e){throw Error(`Unable to allocate the buffer of size: ${o}(in bytes). Please try passing your own buffer to the "downloadToBuffer" method or try using other methods like "download" or "downloadToFile".	 ${e.message}`)}if(s.length<o)throw RangeError(`The buffer's size should be equal to or larger than the request count of bytes: ${o}`);let e=0,t=new o3(a.concurrency);for(let r=i;r<i+o;r+=a.blockSize)t.addOperation(async()=>{let t=i+o;r+a.blockSize<t&&(t=r+a.blockSize);let n=await this.download(r,t-r,{abortSignal:a.abortSignal,conditions:a.conditions,maxRetryRequests:a.maxRetryRequestsPerBlock,customerProvidedKey:a.customerProvidedKey,tracingOptions:Object.assign(Object.assign({},a.tracingOptions),iV(c))});n.readableStreamBody,await void 0,e+=t-r,a.onProgress&&a.onProgress({loadedBytes:e})});return await t.do(),s}catch(e){throw l.setStatus({code:k.ERROR,message:e.message}),e}finally{l.end()}}async downloadToFile(e,t=0,r,n={}){let{span:s,updatedOptions:i}=iF("BlobClient-downloadToFile",n);try{let e=await this.download(t,r,Object.assign(Object.assign({},n),{tracingOptions:Object.assign(Object.assign({},n.tracingOptions),iV(i))}));return e.readableStreamBody&&await void e.readableStreamBody,e.blobDownloadStream=void 0,e}catch(e){throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}getBlobAndContainerNamesFromUrl(){let e,t;try{let r=nV.parse(this.url);if("blob"===r.getHost().split(".")[1]){let n=r.getPath().match("/([^/]*)(/(.*))?");e=n[1],t=n[3]}else if(sT(r)){let n=r.getPath().match("/([^/]*)/([^/]*)(/(.*))?");e=n[2],t=n[4]}else{let n=r.getPath().match("/([^/]*)(/(.*))?");e=n[1],t=n[3]}if(e=decodeURIComponent(e),t=(t=decodeURIComponent(t)).replace(/\\/g,"/"),!e)throw Error("Provided containerName is invalid.");return{blobName:t,containerName:e}}catch(e){throw Error("Unable to extract blobName and containerName with provided information.")}}async startCopyFromURL(e,t={}){var r,n,s;let{span:i,updatedOptions:o}=iF("BlobClient-startCopyFromURL",t);t.conditions=t.conditions||{},t.sourceConditions=t.sourceConditions||{};try{return await this.blobContext.startCopyFromURL(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:t.sourceConditions.ifMatch,sourceIfModifiedSince:t.sourceConditions.ifModifiedSince,sourceIfNoneMatch:t.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:t.sourceConditions.ifUnmodifiedSince,sourceIfTags:t.sourceConditions.tagConditions},immutabilityPolicyExpiry:null===(n=t.immutabilityPolicy)||void 0===n?void 0:n.expiriesOn,immutabilityPolicyMode:null===(s=t.immutabilityPolicy)||void 0===s?void 0:s.policyMode,legalHold:t.legalHold,rehydratePriority:t.rehydratePriority,tier:oK(t.tier),blobTagsString:sI(t.tags),sealBlob:t.sealBlob},iV(o)))}catch(e){throw i.setStatus({code:k.ERROR,message:e.message}),e}finally{i.end()}}generateSasUrl(e){return new Promise(t=>{if(!(this.credential instanceof il))throw RangeError("Can only generate the SAS when the client is initialized with a shared key credential");let r=iJ(Object.assign({containerName:this._containerName,blobName:this._name,snapshotTime:this._snapshot,versionId:this._versionId},e),this.credential).toString();t(sx(this.url,r))})}async deleteImmutabilityPolicy(e){let{span:t,updatedOptions:r}=iF("BlobClient-deleteImmutabilityPolicy",e);try{return await this.blobContext.deleteImmutabilityPolicy(Object.assign({abortSignal:null==e?void 0:e.abortSignal},iV(r)))}catch(e){throw t.setStatus({code:k.ERROR,message:e.message}),e}finally{t.end()}}async setImmutabilityPolicy(e,t){let{span:r,updatedOptions:n}=iF("BlobClient-setImmutabilityPolicy",t);try{return await this.blobContext.setImmutabilityPolicy(Object.assign({abortSignal:null==t?void 0:t.abortSignal,immutabilityPolicyExpiry:e.expiriesOn,immutabilityPolicyMode:e.policyMode,modifiedAccessConditions:null==t?void 0:t.modifiedAccessCondition},iV(n)))}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async setLegalHold(e,t){let{span:r,updatedOptions:n}=iF("BlobClient-setLegalHold",t);try{return await this.blobContext.setLegalHold(e,Object.assign({abortSignal:null==t?void 0:t.abortSignal},iV(n)))}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}}class ar extends at{constructor(e,t,r,n){let s,i;if(n=n||{},ii(t))i=e,s=t;else if(Q&&t instanceof il||t instanceof sW||W(t))i=e,s=ia(t,n=r);else if(t||"string"==typeof t){if(t&&"string"==typeof t&&r&&"string"==typeof r){let o=sv(e);if("AccountConnString"===o.kind){if(Q){let e=new il(o.accountName,o.accountKey);i=sS(sS(o.url,encodeURIComponent(t)),encodeURIComponent(r)),n.proxyOptions||(n.proxyOptions=Y(o.proxyUri)),s=ia(e,n)}else throw Error("Account connection string is only supported in Node.js environment")}else if("SASConnString"===o.kind)i=sS(sS(o.url,encodeURIComponent(t)),encodeURIComponent(r))+"?"+o.accountSas,s=ia(new sW,n);else throw Error("Connection string must be either an Account connection string or a SAS connection string")}else throw Error("Expecting non-empty strings for containerName and blobName parameters")}else i=e,s=ia(new sW,n);super(i,s),this.appendBlobContext=new ob(this.storageClientContext)}withSnapshot(e){return new ar(sP(this.url,sp.Parameters.SNAPSHOT,0===e.length?void 0:e),this.pipeline)}async create(e={}){var t,r,n;let{span:s,updatedOptions:i}=iF("AppendBlobClient-create",e);e.conditions=e.conditions||{};try{return oX(e.customerProvidedKey,this.isHttps),await this.appendBlobContext.create(0,Object.assign({abortSignal:e.abortSignal,blobHttpHeaders:e.blobHTTPHeaders,leaseAccessConditions:e.conditions,metadata:e.metadata,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey,encryptionScope:e.encryptionScope,immutabilityPolicyExpiry:null===(r=e.immutabilityPolicy)||void 0===r?void 0:r.expiriesOn,immutabilityPolicyMode:null===(n=e.immutabilityPolicy)||void 0===n?void 0:n.policyMode,legalHold:e.legalHold,blobTagsString:sI(e.tags)},iV(i)))}catch(e){throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}async createIfNotExists(e={}){var t,r;let{span:n,updatedOptions:s}=iF("AppendBlobClient-createIfNotExists",e);try{let e=await this.create(Object.assign(Object.assign({},s),{conditions:{ifNoneMatch:"*"}}));return Object.assign(Object.assign({succeeded:!0},e),{_response:e._response})}catch(e){if((null===(t=e.details)||void 0===t?void 0:t.errorCode)==="BlobAlreadyExists")return n.setStatus({code:k.ERROR,message:"Expected exception when creating a blob only if it does not already exist."}),Object.assign(Object.assign({succeeded:!1},null===(r=e.response)||void 0===r?void 0:r.parsedHeaders),{_response:e.response});throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async seal(e={}){var t;let{span:r,updatedOptions:n}=iF("AppendBlobClient-seal",e);e.conditions=e.conditions||{};try{return await this.appendBlobContext.seal(Object.assign({abortSignal:e.abortSignal,appendPositionAccessConditions:e.conditions,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions})},iV(n)))}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async appendBlock(e,t,r={}){var n;let{span:s,updatedOptions:i}=iF("AppendBlobClient-appendBlock",r);r.conditions=r.conditions||{};try{return oX(r.customerProvidedKey,this.isHttps),await this.appendBlobContext.appendBlock(t,e,Object.assign({abortSignal:r.abortSignal,appendPositionAccessConditions:r.conditions,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions}),requestOptions:{onUploadProgress:r.onProgress},transactionalContentMD5:r.transactionalContentMD5,transactionalContentCrc64:r.transactionalContentCrc64,cpkInfo:r.customerProvidedKey,encryptionScope:r.encryptionScope},iV(i)))}catch(e){throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}async appendBlockFromURL(e,t,r,n={}){var s;let{span:i,updatedOptions:o}=iF("AppendBlobClient-appendBlockFromURL",n);n.conditions=n.conditions||{},n.sourceConditions=n.sourceConditions||{};try{return oX(n.customerProvidedKey,this.isHttps),await this.appendBlobContext.appendBlockFromUrl(e,0,Object.assign({abortSignal:n.abortSignal,sourceRange:o4({offset:t,count:r}),sourceContentMD5:n.sourceContentMD5,sourceContentCrc64:n.sourceContentCrc64,leaseAccessConditions:n.conditions,appendPositionAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(s=n.conditions)||void 0===s?void 0:s.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:n.sourceConditions.ifMatch,sourceIfModifiedSince:n.sourceConditions.ifModifiedSince,sourceIfNoneMatch:n.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:n.sourceConditions.ifUnmodifiedSince},copySourceAuthorization:sk(n.sourceAuthorization),cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope},iV(o)))}catch(e){throw i.setStatus({code:k.ERROR,message:e.message}),e}finally{i.end()}}}class an extends at{constructor(e,t,r,n){let s,i;if(n=n||{},ii(t))i=e,s=t;else if(Q&&t instanceof il||t instanceof sW||W(t))i=e,s=ia(t,n=r);else if(t||"string"==typeof t){if(t&&"string"==typeof t&&r&&"string"==typeof r){let o=sv(e);if("AccountConnString"===o.kind){if(Q){let e=new il(o.accountName,o.accountKey);i=sS(sS(o.url,encodeURIComponent(t)),encodeURIComponent(r)),n.proxyOptions||(n.proxyOptions=Y(o.proxyUri)),s=ia(e,n)}else throw Error("Account connection string is only supported in Node.js environment")}else if("SASConnString"===o.kind)i=sS(sS(o.url,encodeURIComponent(t)),encodeURIComponent(r))+"?"+o.accountSas,s=ia(new sW,n);else throw Error("Connection string must be either an Account connection string or a SAS connection string")}else throw Error("Expecting non-empty strings for containerName and blobName parameters")}else i=e,r&&"string"!=typeof r&&(n=r),s=ia(new sW,n);super(i,s),this.blockBlobContext=new oO(this.storageClientContext),this._blobContext=new i0(this.storageClientContext)}withSnapshot(e){return new an(sP(this.url,sp.Parameters.SNAPSHOT,0===e.length?void 0:e),this.pipeline)}async query(e,t={}){var r;oX(t.customerProvidedKey,this.isHttps);let{span:n,updatedOptions:s}=iF("BlockBlobClient-query",t);try{if(!Q)throw Error("This operation currently is only supported in Node.js.");oX(t.customerProvidedKey,this.isHttps);let n=await this._blobContext.query(Object.assign({abortSignal:t.abortSignal,queryRequest:{queryType:"SQL",expression:e,inputSerialization:sB(t.inputTextConfiguration),outputSerialization:sB(t.outputTextConfiguration)},leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),cpkInfo:t.customerProvidedKey},iV(s)));return new of(n,{abortSignal:t.abortSignal,onProgress:t.onProgress,onError:t.onError})}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async upload(e,t,r={}){var n,s,i;r.conditions=r.conditions||{};let{span:o,updatedOptions:a}=iF("BlockBlobClient-upload",r);try{return oX(r.customerProvidedKey,this.isHttps),await this.blockBlobContext.upload(t,e,Object.assign({abortSignal:r.abortSignal,blobHttpHeaders:r.blobHTTPHeaders,leaseAccessConditions:r.conditions,metadata:r.metadata,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions}),requestOptions:{onUploadProgress:r.onProgress},cpkInfo:r.customerProvidedKey,encryptionScope:r.encryptionScope,immutabilityPolicyExpiry:null===(s=r.immutabilityPolicy)||void 0===s?void 0:s.expiriesOn,immutabilityPolicyMode:null===(i=r.immutabilityPolicy)||void 0===i?void 0:i.policyMode,legalHold:r.legalHold,tier:oK(r.tier),blobTagsString:sI(r.tags)},iV(a)))}catch(e){throw o.setStatus({code:k.ERROR,message:e.message}),e}finally{o.end()}}async syncUploadFromURL(e,t={}){var r,n,s,i,o;t.conditions=t.conditions||{};let{span:a,updatedOptions:l}=iF("BlockBlobClient-syncUploadFromURL",t);try{return oX(t.customerProvidedKey,this.isHttps),await this.blockBlobContext.putBlobFromUrl(0,e,Object.assign(Object.assign(Object.assign({},t),{blobHttpHeaders:t.blobHTTPHeaders,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:t.conditions.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:null===(r=t.sourceConditions)||void 0===r?void 0:r.ifMatch,sourceIfModifiedSince:null===(n=t.sourceConditions)||void 0===n?void 0:n.ifModifiedSince,sourceIfNoneMatch:null===(s=t.sourceConditions)||void 0===s?void 0:s.ifNoneMatch,sourceIfUnmodifiedSince:null===(i=t.sourceConditions)||void 0===i?void 0:i.ifUnmodifiedSince,sourceIfTags:null===(o=t.sourceConditions)||void 0===o?void 0:o.tagConditions},cpkInfo:t.customerProvidedKey,copySourceAuthorization:sk(t.sourceAuthorization),tier:oK(t.tier),blobTagsString:sI(t.tags),copySourceTags:t.copySourceTags}),iV(l)))}catch(e){throw a.setStatus({code:k.ERROR,message:e.message}),e}finally{a.end()}}async stageBlock(e,t,r,n={}){let{span:s,updatedOptions:i}=iF("BlockBlobClient-stageBlock",n);try{return oX(n.customerProvidedKey,this.isHttps),await this.blockBlobContext.stageBlock(e,r,t,Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,requestOptions:{onUploadProgress:n.onProgress},transactionalContentMD5:n.transactionalContentMD5,transactionalContentCrc64:n.transactionalContentCrc64,cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope},iV(i)))}catch(e){throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}async stageBlockFromURL(e,t,r=0,n,s={}){let{span:i,updatedOptions:o}=iF("BlockBlobClient-stageBlockFromURL",s);try{return oX(s.customerProvidedKey,this.isHttps),await this.blockBlobContext.stageBlockFromURL(e,0,t,Object.assign({abortSignal:s.abortSignal,leaseAccessConditions:s.conditions,sourceContentMD5:s.sourceContentMD5,sourceContentCrc64:s.sourceContentCrc64,sourceRange:0!==r||n?o4({offset:r,count:n}):void 0,cpkInfo:s.customerProvidedKey,encryptionScope:s.encryptionScope,copySourceAuthorization:sk(s.sourceAuthorization)},iV(o)))}catch(e){throw i.setStatus({code:k.ERROR,message:e.message}),e}finally{i.end()}}async commitBlockList(e,t={}){var r,n,s;t.conditions=t.conditions||{};let{span:i,updatedOptions:o}=iF("BlockBlobClient-commitBlockList",t);try{return oX(t.customerProvidedKey,this.isHttps),await this.blockBlobContext.commitBlockList({latest:e},Object.assign({abortSignal:t.abortSignal,blobHttpHeaders:t.blobHTTPHeaders,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope,immutabilityPolicyExpiry:null===(n=t.immutabilityPolicy)||void 0===n?void 0:n.expiriesOn,immutabilityPolicyMode:null===(s=t.immutabilityPolicy)||void 0===s?void 0:s.policyMode,legalHold:t.legalHold,tier:oK(t.tier),blobTagsString:sI(t.tags)},iV(o)))}catch(e){throw i.setStatus({code:k.ERROR,message:e.message}),e}finally{i.end()}}async getBlockList(e,t={}){var r;let{span:n,updatedOptions:s}=iF("BlockBlobClient-getBlockList",t);try{let n=await this.blockBlobContext.getBlockList(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions})},iV(s)));return n.committedBlocks||(n.committedBlocks=[]),n.uncommittedBlocks||(n.uncommittedBlocks=[]),n}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async uploadData(e,t={}){let{span:r,updatedOptions:n}=iF("BlockBlobClient-uploadData",t);try{if(Q){let t;return t=e instanceof ae?e:e instanceof ArrayBuffer?ae.from(e):ae.from(e.buffer,e.byteOffset,e.byteLength),this.uploadSeekableInternal((e,r)=>t.slice(e,e+r),t.byteLength,n)}{let t=new Blob([e]);return this.uploadSeekableInternal((e,r)=>t.slice(e,e+r),t.size,n)}}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async uploadBrowserData(e,t={}){let{span:r,updatedOptions:n}=iF("BlockBlobClient-uploadBrowserData",t);try{let t=new Blob([e]);return await this.uploadSeekableInternal((e,r)=>t.slice(e,e+r),t.size,n)}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async uploadSeekableInternal(e,t,r={}){if(r.blockSize||(r.blockSize=0),r.blockSize<0||r.blockSize>4194304e3)throw RangeError("blockSize option must be >= 0 and <= 4194304000");if(0===r.maxSingleShotSize||r.maxSingleShotSize||(r.maxSingleShotSize=268435456),r.maxSingleShotSize<0||r.maxSingleShotSize>268435456)throw RangeError("maxSingleShotSize option must be >= 0 and <= 268435456");if(0===r.blockSize){if(t>2097152e8)throw RangeError(`${t} is too larger to upload to a block blob.`);t>r.maxSingleShotSize&&(r.blockSize=Math.ceil(t/5e4),r.blockSize<4194304&&(r.blockSize=4194304))}r.blobHTTPHeaders||(r.blobHTTPHeaders={}),r.conditions||(r.conditions={});let{span:n,updatedOptions:s}=iF("BlockBlobClient-uploadSeekableInternal",r);try{if(t<=r.maxSingleShotSize)return await this.upload(e(0,t),t,s);let n=Math.floor((t-1)/r.blockSize)+1;if(n>5e4)throw RangeError("The buffer's size is too big or the BlockSize is too small;the number of blocks must be <= 50000");let i=[],o=e2(),a=0,l=new o3(r.concurrency);for(let c=0;c<n;c++)l.addOperation(async()=>{let l=sw(o,c),d=r.blockSize*c,p=c===n-1?t:d+r.blockSize,u=p-d;i.push(l),await this.stageBlock(l,e(d,u),u,{abortSignal:r.abortSignal,conditions:r.conditions,encryptionScope:r.encryptionScope,tracingOptions:s.tracingOptions}),a+=u,r.onProgress&&r.onProgress({loadedBytes:a})});return await l.do(),this.commitBlockList(i,s)}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async uploadFile(e,t={}){let{span:r,updatedOptions:n}=iF("BlockBlobClient-uploadFile",t);try{let r=(await o8(e)).size;return await this.uploadSeekableInternal((t,r)=>()=>o7(e,{autoClose:!0,end:r?t+r-1:1/0,start:t}),r,Object.assign(Object.assign({},t),{tracingOptions:Object.assign(Object.assign({},t.tracingOptions),iV(n))}))}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async uploadStream(e,t=8388608,r=5,n={}){n.blobHTTPHeaders||(n.blobHTTPHeaders={}),n.conditions||(n.conditions={});let{span:s,updatedOptions:i}=iF("BlockBlobClient-uploadStream",n);try{let s=0,o=e2(),a=0,l=[],c=new o6(e,t,r,async(e,t)=>{let r=sw(o,s);l.push(r),s++,await this.stageBlock(r,e,t,{conditions:n.conditions,encryptionScope:n.encryptionScope,tracingOptions:i.tracingOptions}),a+=t,n.onProgress&&n.onProgress({loadedBytes:a})},Math.ceil(r/4*3));return await c.do(),await this.commitBlockList(l,Object.assign(Object.assign({},n),{tracingOptions:Object.assign(Object.assign({},n.tracingOptions),iV(i))}))}catch(e){throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}}class as extends at{constructor(e,t,r,n){let s,i;if(n=n||{},ii(t))i=e,s=t;else if(Q&&t instanceof il||t instanceof sW||W(t))i=e,s=ia(t,n=r);else if(t||"string"==typeof t){if(t&&"string"==typeof t&&r&&"string"==typeof r){let o=sv(e);if("AccountConnString"===o.kind){if(Q){let e=new il(o.accountName,o.accountKey);i=sS(sS(o.url,encodeURIComponent(t)),encodeURIComponent(r)),n.proxyOptions||(n.proxyOptions=Y(o.proxyUri)),s=ia(e,n)}else throw Error("Account connection string is only supported in Node.js environment")}else if("SASConnString"===o.kind)i=sS(sS(o.url,encodeURIComponent(t)),encodeURIComponent(r))+"?"+o.accountSas,s=ia(new sW,n);else throw Error("Connection string must be either an Account connection string or a SAS connection string")}else throw Error("Expecting non-empty strings for containerName and blobName parameters")}else i=e,s=ia(new sW,n);super(i,s),this.pageBlobContext=new oq(this.storageClientContext)}withSnapshot(e){return new as(sP(this.url,sp.Parameters.SNAPSHOT,0===e.length?void 0:e),this.pipeline)}async create(e,t={}){var r,n,s;t.conditions=t.conditions||{};let{span:i,updatedOptions:o}=iF("PageBlobClient-create",t);try{return oX(t.customerProvidedKey,this.isHttps),await this.pageBlobContext.create(0,e,Object.assign({abortSignal:t.abortSignal,blobHttpHeaders:t.blobHTTPHeaders,blobSequenceNumber:t.blobSequenceNumber,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope,immutabilityPolicyExpiry:null===(n=t.immutabilityPolicy)||void 0===n?void 0:n.expiriesOn,immutabilityPolicyMode:null===(s=t.immutabilityPolicy)||void 0===s?void 0:s.policyMode,legalHold:t.legalHold,tier:oK(t.tier),blobTagsString:sI(t.tags)},iV(o)))}catch(e){throw i.setStatus({code:k.ERROR,message:e.message}),e}finally{i.end()}}async createIfNotExists(e,t={}){var r,n;let{span:s,updatedOptions:i}=iF("PageBlobClient-createIfNotExists",t);try{let r=await this.create(e,Object.assign(Object.assign({},t),{conditions:{ifNoneMatch:"*"},tracingOptions:i.tracingOptions}));return Object.assign(Object.assign({succeeded:!0},r),{_response:r._response})}catch(e){if((null===(r=e.details)||void 0===r?void 0:r.errorCode)==="BlobAlreadyExists")return s.setStatus({code:k.ERROR,message:"Expected exception when creating a blob only if it does not already exist."}),Object.assign(Object.assign({succeeded:!1},null===(n=e.response)||void 0===n?void 0:n.parsedHeaders),{_response:e.response});throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}async uploadPages(e,t,r,n={}){var s;n.conditions=n.conditions||{};let{span:i,updatedOptions:o}=iF("PageBlobClient-uploadPages",n);try{return oX(n.customerProvidedKey,this.isHttps),await this.pageBlobContext.uploadPages(r,e,Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(s=n.conditions)||void 0===s?void 0:s.tagConditions}),requestOptions:{onUploadProgress:n.onProgress},range:o4({offset:t,count:r}),sequenceNumberAccessConditions:n.conditions,transactionalContentMD5:n.transactionalContentMD5,transactionalContentCrc64:n.transactionalContentCrc64,cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope},iV(o)))}catch(e){throw i.setStatus({code:k.ERROR,message:e.message}),e}finally{i.end()}}async uploadPagesFromURL(e,t,r,n,s={}){var i;s.conditions=s.conditions||{},s.sourceConditions=s.sourceConditions||{};let{span:o,updatedOptions:a}=iF("PageBlobClient-uploadPagesFromURL",s);try{return oX(s.customerProvidedKey,this.isHttps),await this.pageBlobContext.uploadPagesFromURL(e,o4({offset:t,count:n}),0,o4({offset:r,count:n}),Object.assign({abortSignal:s.abortSignal,sourceContentMD5:s.sourceContentMD5,sourceContentCrc64:s.sourceContentCrc64,leaseAccessConditions:s.conditions,sequenceNumberAccessConditions:s.conditions,modifiedAccessConditions:Object.assign(Object.assign({},s.conditions),{ifTags:null===(i=s.conditions)||void 0===i?void 0:i.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:s.sourceConditions.ifMatch,sourceIfModifiedSince:s.sourceConditions.ifModifiedSince,sourceIfNoneMatch:s.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:s.sourceConditions.ifUnmodifiedSince},cpkInfo:s.customerProvidedKey,encryptionScope:s.encryptionScope,copySourceAuthorization:sk(s.sourceAuthorization)},iV(a)))}catch(e){throw o.setStatus({code:k.ERROR,message:e.message}),e}finally{o.end()}}async clearPages(e=0,t,r={}){var n;r.conditions=r.conditions||{};let{span:s,updatedOptions:i}=iF("PageBlobClient-clearPages",r);try{return await this.pageBlobContext.clearPages(0,Object.assign({abortSignal:r.abortSignal,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions}),range:o4({offset:e,count:t}),sequenceNumberAccessConditions:r.conditions,cpkInfo:r.customerProvidedKey,encryptionScope:r.encryptionScope},iV(i)))}catch(e){throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}async getPageRanges(e=0,t,r={}){var n;r.conditions=r.conditions||{};let{span:s,updatedOptions:i}=iF("PageBlobClient-getPageRanges",r);try{return await this.pageBlobContext.getPageRanges(Object.assign({abortSignal:r.abortSignal,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions}),range:o4({offset:e,count:t})},iV(i))).then(oG)}catch(e){throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}async listPageRangesSegment(e=0,t,r,n={}){var s;let{span:i,updatedOptions:o}=iF("PageBlobClient-getPageRangesSegment",n);try{return await this.pageBlobContext.getPageRanges(Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(s=n.conditions)||void 0===s?void 0:s.tagConditions}),range:o4({offset:e,count:t}),marker:r,maxPageSize:n.maxPageSize},iV(o)))}catch(e){throw i.setStatus({code:k.ERROR,message:e.message}),e}finally{i.end()}}listPageRangeItemSegments(e=0,t,r,n={}){return u(this,arguments,function*(){let s;if(r||void 0===r)do r=(s=yield p(this.listPageRangesSegment(e,t,r,n))).continuationToken,yield yield p((yield p(s)));while(r)})}listPageRangeItems(e=0,t,r={}){return u(this,arguments,function*(){let n;try{for(var s,i,o,a=h(this.listPageRangeItemSegments(e,t,n,r));!(o=yield p(a.next())).done;){let e=o.value;yield p((yield*m(h(sH(e)))))}}catch(e){s={error:e}}finally{try{o&&!o.done&&(i=a.return)&&(yield p(i.call(a)))}finally{if(s)throw s.error}}})}listPageRanges(e=0,t,r={}){r.conditions=r.conditions||{};let n=this.listPageRangeItems(e,t,r);return{next:()=>n.next(),[Symbol.asyncIterator](){return this},byPage:(n={})=>this.listPageRangeItemSegments(e,t,n.continuationToken,Object.assign({maxPageSize:n.maxPageSize},r))}}async getPageRangesDiff(e,t,r,n={}){var s;n.conditions=n.conditions||{};let{span:i,updatedOptions:o}=iF("PageBlobClient-getPageRangesDiff",n);try{return await this.pageBlobContext.getPageRangesDiff(Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(s=n.conditions)||void 0===s?void 0:s.tagConditions}),prevsnapshot:r,range:o4({offset:e,count:t})},iV(o))).then(oG)}catch(e){throw i.setStatus({code:k.ERROR,message:e.message}),e}finally{i.end()}}async listPageRangesDiffSegment(e,t,r,n,s){var i;let{span:o,updatedOptions:a}=iF("PageBlobClient-getPageRangesDiffSegment",s);try{return await this.pageBlobContext.getPageRangesDiff(Object.assign({abortSignal:null==s?void 0:s.abortSignal,leaseAccessConditions:null==s?void 0:s.conditions,modifiedAccessConditions:Object.assign(Object.assign({},null==s?void 0:s.conditions),{ifTags:null===(i=null==s?void 0:s.conditions)||void 0===i?void 0:i.tagConditions}),prevsnapshot:r,range:o4({offset:e,count:t}),marker:n,maxPageSize:null==s?void 0:s.maxPageSize},iV(a)))}catch(e){throw o.setStatus({code:k.ERROR,message:e.message}),e}finally{o.end()}}listPageRangeDiffItemSegments(e,t,r,n,s){return u(this,arguments,function*(){let i;if(n||void 0===n)do n=(i=yield p(this.listPageRangesDiffSegment(e,t,r,n,s))).continuationToken,yield yield p((yield p(i)));while(n)})}listPageRangeDiffItems(e,t,r,n){return u(this,arguments,function*(){let s;try{for(var i,o,a,l=h(this.listPageRangeDiffItemSegments(e,t,r,s,n));!(a=yield p(l.next())).done;){let e=a.value;yield p((yield*m(h(sH(e)))))}}catch(e){i={error:e}}finally{try{a&&!a.done&&(o=l.return)&&(yield p(o.call(l)))}finally{if(i)throw i.error}}})}listPageRangesDiff(e,t,r,n={}){n.conditions=n.conditions||{};let s=this.listPageRangeDiffItems(e,t,r,Object.assign({},n));return{next:()=>s.next(),[Symbol.asyncIterator](){return this},byPage:(s={})=>this.listPageRangeDiffItemSegments(e,t,r,s.continuationToken,Object.assign({maxPageSize:s.maxPageSize},n))}}async getPageRangesDiffForManagedDisks(e,t,r,n={}){var s;n.conditions=n.conditions||{};let{span:i,updatedOptions:o}=iF("PageBlobClient-GetPageRangesDiffForManagedDisks",n);try{return await this.pageBlobContext.getPageRangesDiff(Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(s=n.conditions)||void 0===s?void 0:s.tagConditions}),prevSnapshotUrl:r,range:o4({offset:e,count:t})},iV(o))).then(oG)}catch(e){throw i.setStatus({code:k.ERROR,message:e.message}),e}finally{i.end()}}async resize(e,t={}){var r;t.conditions=t.conditions||{};let{span:n,updatedOptions:s}=iF("PageBlobClient-resize",t);try{return await this.pageBlobContext.resize(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions}),encryptionScope:t.encryptionScope},iV(s)))}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async updateSequenceNumber(e,t,r={}){var n;r.conditions=r.conditions||{};let{span:s,updatedOptions:i}=iF("PageBlobClient-updateSequenceNumber",r);try{return await this.pageBlobContext.updateSequenceNumber(e,Object.assign({abortSignal:r.abortSignal,blobSequenceNumber:t,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(n=r.conditions)||void 0===n?void 0:n.tagConditions})},iV(i)))}catch(e){throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}async startCopyIncremental(e,t={}){var r;let{span:n,updatedOptions:s}=iF("PageBlobClient-startCopyIncremental",t);try{return await this.pageBlobContext.copyIncremental(e,Object.assign({abortSignal:t.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(r=t.conditions)||void 0===r?void 0:r.tagConditions})},iV(s)))}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}}async function ai(e){let t=await e.blobBody;return o9(t)}class ao{constructor(e,t){if(!e||!e.contentType)throw RangeError("batchResponse is malformed or doesn't contain valid content-type.");if(!t||0===t.size)throw RangeError("Invalid state: subRequests is not provided or size is 0.");this.batchResponse=e,this.subRequests=t,this.responseBatchBoundary=this.batchResponse.contentType.split("=")[1],this.perResponsePrefix=`--${this.responseBatchBoundary}\r
`,this.batchResponseEnding=`--${this.responseBatchBoundary}--`}async parseBatchResponse(){if(202!==this.batchResponse._response.status)throw Error(`Invalid state: batch request failed with status: '${this.batchResponse._response.status}'.`);let e=await ai(this.batchResponse),t=e.split(this.batchResponseEnding)[0].split(this.perResponsePrefix).slice(1),r=t.length;if(r!==this.subRequests.size&&1!==r)throw Error("Invalid state: sub responses' count is not equal to sub requests' count.");let n=Array(r),s=0,i=0;for(let e=0;e<r;e++){let r=t[e],o={};o.headers=new s0;let a=r.split(`\r
`),l=!1,c=!1,d=!1,p=-1;for(let e of a){if(!l){if(e.startsWith(su.CONTENT_ID)&&(p=parseInt(e.split(": ")[1])),e.startsWith(sm)){l=!0;let t=e.split(" ");o.status=parseInt(t[1]),o.statusMessage=t.slice(2).join(" ")}continue}if(""===e.trim()){c||(c=!0);continue}if(c)o.bodyAsText||(o.bodyAsText=""),o.bodyAsText+=e;else{if(-1===e.indexOf(": "))throw Error(`Invalid state: find non-empty line '${e}' without HTTP header delimiter ': '.`);let t=e.split(": ");o.headers.set(t[0],t[1]),t[0]===su.X_MS_ERROR_CODE&&(o.errorCode=t[1],d=!0)}}-1!==p&&Number.isInteger(p)&&p>=0&&p<this.subRequests.size&&void 0===n[p]?(o._request=this.subRequests.get(p),n[p]=o):sl.error(`subResponses[${e}] is dropped as the Content-ID is not found or invalid, Content-ID: ${p}`),d?i++:s++}return{subResponses:n,subResponsesSucceededCount:s,subResponsesFailedCount:i}}}(N=X||(X={}))[N.LOCKED=0]="LOCKED",N[N.UNLOCKED=1]="UNLOCKED";class aa{static async lock(e){return new Promise(t=>{void 0===this.keys[e]||this.keys[e]===X.UNLOCKED?(this.keys[e]=X.LOCKED,t()):this.onUnlockEvent(e,()=>{this.keys[e]=X.LOCKED,t()})})}static async unlock(e){return new Promise(t=>{this.keys[e]===X.LOCKED&&this.emitUnlockEvent(e),delete this.keys[e],t()})}static onUnlockEvent(e,t){void 0===this.listeners[e]?this.listeners[e]=[t]:this.listeners[e].push(t)}static emitUnlockEvent(e){if(void 0!==this.listeners[e]&&this.listeners[e].length>0){let t=this.listeners[e].shift();setImmediate(()=>{t.call(this)})}}}aa.keys={},aa.listeners={};class al{constructor(){this.batch="batch",this.batchRequest=new ac}getMultiPartContentType(){return this.batchRequest.getMultipartContentType()}getHttpRequestBody(){return this.batchRequest.getHttpRequestBody()}getSubRequests(){return this.batchRequest.getSubRequests()}async addSubRequestInternal(e,t){await aa.lock(this.batch);try{this.batchRequest.preAddSubRequest(e),await t(),this.batchRequest.postAddSubRequest(e)}finally{await aa.unlock(this.batch)}}setBatchType(e){if(this.batchType||(this.batchType=e),this.batchType!==e)throw RangeError(`BlobBatch only supports one operation type per batch and it already is being used for ${this.batchType} operations.`)}async deleteBlob(e,t,r){let n,s;if("string"==typeof e&&(Q&&t instanceof il||t instanceof sW||W(t)))n=e,s=t;else if(e instanceof at)n=e.url,s=e.credential,r=t;else throw RangeError("Invalid arguments. Either url and credential, or BlobClient need be provided.");r||(r={});let{span:i,updatedOptions:o}=iF("BatchDeleteRequest-addSubRequest",r);try{this.setBatchType("delete"),await this.addSubRequestInternal({url:n,credential:s},async()=>{await new at(n,this.batchRequest.createPipeline(s)).delete(o)})}catch(e){throw i.setStatus({code:k.ERROR,message:e.message}),e}finally{i.end()}}async setBlobAccessTier(e,t,r,n){let s,i,o;if("string"==typeof e&&(Q&&t instanceof il||t instanceof sW||W(t)))s=e,i=t,o=r;else if(e instanceof at)s=e.url,i=e.credential,o=t,n=r;else throw RangeError("Invalid arguments. Either url and credential, or BlobClient need be provided.");n||(n={});let{span:a,updatedOptions:l}=iF("BatchSetTierRequest-addSubRequest",n);try{this.setBatchType("setAccessTier"),await this.addSubRequestInternal({url:s,credential:i},async()=>{await new at(s,this.batchRequest.createPipeline(i)).setAccessTier(o,l)})}catch(e){throw a.setStatus({code:k.ERROR,message:e.message}),e}finally{a.end()}}}class ac{constructor(){this.operationCount=0,this.body="";let e=e2();this.boundary=`batch_${e}`,this.subRequestPrefix=`--${this.boundary}\r
${su.CONTENT_TYPE}: application/http\r
${su.CONTENT_TRANSFER_ENCODING}: binary`,this.multipartContentType=`multipart/mixed; boundary=${this.boundary}`,this.batchRequestEnding=`--${this.boundary}--`,this.subRequests=new Map}createPipeline(e){let t=e instanceof sW,r=3+(t?0:1),n=Array(r);return n[0]=st(),n[1]=new am,t||(n[2]=W(e)?sj(iw(e,sd),e):e),n[r-1]=new ap(this),new io(n,{})}appendSubRequestToBody(e){for(let t of(this.body+=[this.subRequestPrefix,`${su.CONTENT_ID}: ${this.operationCount}`,"",`${e.method.toString()} ${function(e){let t=nV.parse(e),r=t.getPath();if(!r)throw RangeError("Invalid url without valid path.");let n=t.getQuery()||"";return""!==(n=n.trim())&&(n=n.startsWith("?")?n:`?${n}`),`${r}${n}`}(e.url)} ${sm}\r
`].join("\r\n"),e.headers.headersArray()))this.body+=`${t.name}: ${t.value}\r
`;this.body+="\r\n"}preAddSubRequest(e){if(this.operationCount>=256)throw RangeError("Cannot exceed 256 sub requests in a single batch");let t=sR(e.url);if(!t||""===t)throw RangeError(`Invalid url for sub request: '${e.url}'`)}postAddSubRequest(e){this.subRequests.set(this.operationCount,e),this.operationCount++}getHttpRequestBody(){return`${this.body}${this.batchRequestEnding}\r
`}getMultipartContentType(){return this.multipartContentType}getSubRequests(){return this.subRequests}}class ad extends np{constructor(e,t,r){super(t,r),this.dummyResponse={request:new iS,status:200,headers:new s0},this.batchRequest=e}async sendRequest(e){return await this.batchRequest.appendSubRequestToBody(e),this.dummyResponse}}class ap{constructor(e){this.batchRequest=e}create(e,t){return new ad(this.batchRequest,e,t)}}class au extends np{constructor(e,t){super(e,t)}async sendRequest(e){let t="";for(let r of e.headers.headersArray())sN(r.name,su.X_MS_VERSION)&&(t=r.name);return""!==t&&e.headers.remove(t),this._nextPolicy.sendRequest(e)}}class am{create(e,t){return new au(e,t)}}class ah{constructor(e,t,r){let n;n=ii(t)?t:t?ia(t,r):ia(new sW,r);let s=new iU(e,n.toServiceClientOptions()),i=sR(e);i&&"/"!==i?this.serviceOrContainerContext=new r1(s):this.serviceOrContainerContext=new rV(s)}createBatch(){return new al}async deleteBlobs(e,t,r){let n=new al;for(let s of e)"string"==typeof s?await n.deleteBlob(s,t,r):await n.deleteBlob(s,t);return this.submitBatch(n)}async setBlobsAccessTier(e,t,r,n){let s=new al;for(let i of e)"string"==typeof i?await s.setBlobAccessTier(i,t,r,n):await s.setBlobAccessTier(i,t,r);return this.submitBatch(s)}async submitBatch(e,t={}){if(!e||0===e.getSubRequests().size)throw RangeError("Batch request should contain one or more sub requests.");let{span:r,updatedOptions:n}=iF("BlobBatchClient-submitBatch",t);try{let r=e.getHttpRequestBody(),s=await this.serviceOrContainerContext.submitBatch(new Blob([r]).size,e.getMultiPartContentType(),r,Object.assign(Object.assign({},t),iV(n))),i=new ao(s,e.getSubRequests()),o=await i.parseBatchResponse(),a={_response:s._response,contentType:s.contentType,errorCode:s.errorCode,requestId:s.requestId,clientRequestId:s.clientRequestId,version:s.version,subResponses:o.subResponses,subResponsesSucceededCount:o.subResponsesSucceededCount,subResponsesFailedCount:o.subResponsesFailedCount};return a}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}}class ag extends i${constructor(e,t,r){let n,s;if(r=r||{},ii(t))s=e,n=t;else if(Q&&t instanceof il||t instanceof sW||W(t))s=e,n=ia(t,r);else if(t||"string"==typeof t){if(t&&"string"==typeof t){let i=sv(e);if("AccountConnString"===i.kind){if(Q){let e=new il(i.accountName,i.accountKey);s=sS(i.url,encodeURIComponent(t)),r.proxyOptions||(r.proxyOptions=Y(i.proxyUri)),n=ia(e,r)}else throw Error("Account connection string is only supported in Node.js environment")}else if("SASConnString"===i.kind)s=sS(i.url,encodeURIComponent(t))+"?"+i.accountSas,n=ia(new sW,r);else throw Error("Connection string must be either an Account connection string or a SAS connection string")}else throw Error("Expecting non-empty strings for containerName parameter")}else s=e,n=ia(new sW,r);super(s,n),this._containerName=this.getContainerNameFromUrl(),this.containerContext=new r1(this.storageClientContext)}get containerName(){return this._containerName}async create(e={}){let{span:t,updatedOptions:r}=iF("ContainerClient-create",e);try{return await this.containerContext.create(Object.assign(Object.assign({},e),iV(r)))}catch(e){throw t.setStatus({code:k.ERROR,message:e.message}),e}finally{t.end()}}async createIfNotExists(e={}){var t,r;let{span:n,updatedOptions:s}=iF("ContainerClient-createIfNotExists",e);try{let e=await this.create(s);return Object.assign(Object.assign({succeeded:!0},e),{_response:e._response})}catch(e){if((null===(t=e.details)||void 0===t?void 0:t.errorCode)==="ContainerAlreadyExists")return n.setStatus({code:k.ERROR,message:"Expected exception when creating a container only if it does not already exist."}),Object.assign(Object.assign({succeeded:!1},null===(r=e.response)||void 0===r?void 0:r.parsedHeaders),{_response:e.response});throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async exists(e={}){let{span:t,updatedOptions:r}=iF("ContainerClient-exists",e);try{return await this.getProperties({abortSignal:e.abortSignal,tracingOptions:r.tracingOptions}),!0}catch(e){if(404===e.statusCode)return t.setStatus({code:k.ERROR,message:"Expected exception when checking container existence"}),!1;throw t.setStatus({code:k.ERROR,message:e.message}),e}finally{t.end()}}getBlobClient(e){return new at(sS(this.url,sL(e)),this.pipeline)}getAppendBlobClient(e){return new ar(sS(this.url,sL(e)),this.pipeline)}getBlockBlobClient(e){return new an(sS(this.url,sL(e)),this.pipeline)}getPageBlobClient(e){return new as(sS(this.url,sL(e)),this.pipeline)}async getProperties(e={}){e.conditions||(e.conditions={});let{span:t,updatedOptions:r}=iF("ContainerClient-getProperties",e);try{return await this.containerContext.getProperties(Object.assign(Object.assign({abortSignal:e.abortSignal},e.conditions),iV(r)))}catch(e){throw t.setStatus({code:k.ERROR,message:e.message}),e}finally{t.end()}}async delete(e={}){e.conditions||(e.conditions={});let{span:t,updatedOptions:r}=iF("ContainerClient-delete",e);try{return await this.containerContext.delete(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,modifiedAccessConditions:e.conditions},iV(r)))}catch(e){throw t.setStatus({code:k.ERROR,message:e.message}),e}finally{t.end()}}async deleteIfExists(e={}){var t,r;let{span:n,updatedOptions:s}=iF("ContainerClient-deleteIfExists",e);try{let e=await this.delete(s);return Object.assign(Object.assign({succeeded:!0},e),{_response:e._response})}catch(e){if((null===(t=e.details)||void 0===t?void 0:t.errorCode)==="ContainerNotFound")return n.setStatus({code:k.ERROR,message:"Expected exception when deleting a container only if it exists."}),Object.assign(Object.assign({succeeded:!1},null===(r=e.response)||void 0===r?void 0:r.parsedHeaders),{_response:e.response});throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async setMetadata(e,t={}){if(t.conditions||(t.conditions={}),t.conditions.ifUnmodifiedSince)throw RangeError("the IfUnmodifiedSince must have their default values because they are ignored by the blob service");let{span:r,updatedOptions:n}=iF("ContainerClient-setMetadata",t);try{return await this.containerContext.setMetadata(Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,metadata:e,modifiedAccessConditions:t.conditions},iV(n)))}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async getAccessPolicy(e={}){e.conditions||(e.conditions={});let{span:t,updatedOptions:r}=iF("ContainerClient-getAccessPolicy",e);try{let t=await this.containerContext.getAccessPolicy(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions},iV(r))),n={_response:t._response,blobPublicAccess:t.blobPublicAccess,date:t.date,etag:t.etag,errorCode:t.errorCode,lastModified:t.lastModified,requestId:t.requestId,clientRequestId:t.clientRequestId,signedIdentifiers:[],version:t.version};for(let e of t){let t;e.accessPolicy&&(t={permissions:e.accessPolicy.permissions},e.accessPolicy.expiresOn&&(t.expiresOn=new Date(e.accessPolicy.expiresOn)),e.accessPolicy.startsOn&&(t.startsOn=new Date(e.accessPolicy.startsOn))),n.signedIdentifiers.push({accessPolicy:t,id:e.id})}return n}catch(e){throw t.setStatus({code:k.ERROR,message:e.message}),e}finally{t.end()}}async setAccessPolicy(e,t,r={}){r.conditions=r.conditions||{};let{span:n,updatedOptions:s}=iF("ContainerClient-setAccessPolicy",r);try{let n=[];for(let e of t||[])n.push({accessPolicy:{expiresOn:e.accessPolicy.expiresOn?sO(e.accessPolicy.expiresOn):"",permissions:e.accessPolicy.permissions,startsOn:e.accessPolicy.startsOn?sO(e.accessPolicy.startsOn):""},id:e.id});return await this.containerContext.setAccessPolicy(Object.assign({abortSignal:r.abortSignal,access:e,containerAcl:n,leaseAccessConditions:r.conditions,modifiedAccessConditions:r.conditions},iV(s)))}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}getBlobLeaseClient(e){return new oy(this,e)}async uploadBlockBlob(e,t,r,n={}){let{span:s,updatedOptions:i}=iF("ContainerClient-uploadBlockBlob",n);try{let n=this.getBlockBlobClient(e),s=await n.upload(t,r,i);return{blockBlobClient:n,response:s}}catch(e){throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}async deleteBlob(e,t={}){let{span:r,updatedOptions:n}=iF("ContainerClient-deleteBlob",t);try{let r=this.getBlobClient(e);return t.versionId&&(r=r.withVersion(t.versionId)),await r.delete(n)}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async listBlobFlatSegment(e,t={}){let{span:r,updatedOptions:n}=iF("ContainerClient-listBlobFlatSegment",t);try{var s;let r=await this.containerContext.listBlobFlatSegment(Object.assign(Object.assign({marker:e},t),iV(n))),i=Object.assign(Object.assign({},r),{_response:Object.assign(Object.assign({},r._response),{parsedBody:(s=r._response.parsedBody,Object.assign(Object.assign({},s),{segment:{blobItems:s.segment.blobItems.map(e=>{let t=Object.assign(Object.assign({},e),{name:sz(e.name)});return t})}}))}),segment:Object.assign(Object.assign({},r.segment),{blobItems:r.segment.blobItems.map(e=>{let t=Object.assign(Object.assign({},e),{name:sz(e.name),tags:sA(e.blobTags),objectReplicationSourceProperties:sq(e.objectReplicationMetadata)});return t})})});return i}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async listBlobHierarchySegment(e,t,r={}){var n,s,i;let{span:o,updatedOptions:a}=iF("ContainerClient-listBlobHierarchySegment",r);try{let o=await this.containerContext.listBlobHierarchySegment(e,Object.assign(Object.assign({marker:t},r),iV(a))),l=Object.assign(Object.assign({},o),{_response:Object.assign(Object.assign({},o._response),{parsedBody:(s=o._response.parsedBody,Object.assign(Object.assign({},s),{segment:{blobPrefixes:null===(i=s.segment.blobPrefixes)||void 0===i?void 0:i.map(e=>{let t=Object.assign(Object.assign({},e),{name:sz(e.name)});return t}),blobItems:s.segment.blobItems.map(e=>{let t=Object.assign(Object.assign({},e),{name:sz(e.name)});return t})}}))}),segment:Object.assign(Object.assign({},o.segment),{blobItems:o.segment.blobItems.map(e=>{let t=Object.assign(Object.assign({},e),{name:sz(e.name),tags:sA(e.blobTags),objectReplicationSourceProperties:sq(e.objectReplicationMetadata)});return t}),blobPrefixes:null===(n=o.segment.blobPrefixes)||void 0===n?void 0:n.map(e=>{let t=Object.assign(Object.assign({},e),{name:sz(e.name)});return t})})});return l}catch(e){throw o.setStatus({code:k.ERROR,message:e.message}),e}finally{o.end()}}listSegments(e,t={}){return u(this,arguments,function*(){let r;if(e||void 0===e)do e=(r=yield p(this.listBlobFlatSegment(e,t))).continuationToken,yield yield p((yield p(r)));while(e)})}listItems(e={}){return u(this,arguments,function*(){let t;try{for(var r,n,s,i=h(this.listSegments(t,e));!(s=yield p(i.next())).done;){let e=s.value;yield p((yield*m(h(e.segment.blobItems))))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&(yield p(n.call(i)))}finally{if(r)throw r.error}}})}listBlobsFlat(e={}){let t=[];e.includeCopy&&t.push("copy"),e.includeDeleted&&t.push("deleted"),e.includeMetadata&&t.push("metadata"),e.includeSnapshots&&t.push("snapshots"),e.includeVersions&&t.push("versions"),e.includeUncommitedBlobs&&t.push("uncommittedblobs"),e.includeTags&&t.push("tags"),e.includeDeletedWithVersions&&t.push("deletedwithversions"),e.includeImmutabilityPolicy&&t.push("immutabilitypolicy"),e.includeLegalHold&&t.push("legalhold"),""===e.prefix&&(e.prefix=void 0);let r=Object.assign(Object.assign({},e),t.length>0?{include:t}:{}),n=this.listItems(r);return{next:()=>n.next(),[Symbol.asyncIterator](){return this},byPage:(e={})=>this.listSegments(e.continuationToken,Object.assign({maxPageSize:e.maxPageSize},r))}}listHierarchySegments(e,t,r={}){return u(this,arguments,function*(){let n;if(t||void 0===t)do t=(n=yield p(this.listBlobHierarchySegment(e,t,r))).continuationToken,yield yield p((yield p(n)));while(t)})}listItemsByHierarchy(e,t={}){return u(this,arguments,function*(){let r;try{for(var n,s,i,o=h(this.listHierarchySegments(e,r,t));!(i=yield p(o.next())).done;){let e=i.value,t=e.segment;if(t.blobPrefixes)for(let e of t.blobPrefixes)yield yield p(Object.assign({kind:"prefix"},e));for(let e of t.blobItems)yield yield p(Object.assign({kind:"blob"},e))}}catch(e){n={error:e}}finally{try{i&&!i.done&&(s=o.return)&&(yield p(s.call(o)))}finally{if(n)throw n.error}}})}listBlobsByHierarchy(e,t={}){if(""===e)throw RangeError("delimiter should contain one or more characters");let r=[];t.includeCopy&&r.push("copy"),t.includeDeleted&&r.push("deleted"),t.includeMetadata&&r.push("metadata"),t.includeSnapshots&&r.push("snapshots"),t.includeVersions&&r.push("versions"),t.includeUncommitedBlobs&&r.push("uncommittedblobs"),t.includeTags&&r.push("tags"),t.includeDeletedWithVersions&&r.push("deletedwithversions"),t.includeImmutabilityPolicy&&r.push("immutabilitypolicy"),t.includeLegalHold&&r.push("legalhold"),""===t.prefix&&(t.prefix=void 0);let n=Object.assign(Object.assign({},t),r.length>0?{include:r}:{}),s=this.listItemsByHierarchy(e,n);return{next:async()=>s.next(),[Symbol.asyncIterator](){return this},byPage:(t={})=>this.listHierarchySegments(e,t.continuationToken,Object.assign({maxPageSize:t.maxPageSize},n))}}async findBlobsByTagsSegment(e,t,r={}){let{span:n,updatedOptions:s}=iF("ContainerClient-findBlobsByTagsSegment",r);try{let n=await this.containerContext.filterBlobs(Object.assign({abortSignal:r.abortSignal,where:e,marker:t,maxPageSize:r.maxPageSize},iV(s))),i=Object.assign(Object.assign({},n),{_response:n._response,blobs:n.blobs.map(e=>{var t;let r="";return(null===(t=e.tags)||void 0===t?void 0:t.blobTagSet.length)===1&&(r=e.tags.blobTagSet[0].value),Object.assign(Object.assign({},e),{tags:sA(e.tags),tagValue:r})})});return i}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}findBlobsByTagsSegments(e,t,r={}){return u(this,arguments,function*(){let n;if(t||void 0===t)do(n=yield p(this.findBlobsByTagsSegment(e,t,r))).blobs=n.blobs||[],t=n.continuationToken,yield yield p(n);while(t)})}findBlobsByTagsItems(e,t={}){return u(this,arguments,function*(){let r;try{for(var n,s,i,o=h(this.findBlobsByTagsSegments(e,r,t));!(i=yield p(o.next())).done;){let e=i.value;yield p((yield*m(h(e.blobs))))}}catch(e){n={error:e}}finally{try{i&&!i.done&&(s=o.return)&&(yield p(s.call(o)))}finally{if(n)throw n.error}}})}findBlobsByTags(e,t={}){let r=Object.assign({},t),n=this.findBlobsByTagsItems(e,r);return{next:()=>n.next(),[Symbol.asyncIterator](){return this},byPage:(t={})=>this.findBlobsByTagsSegments(e,t.continuationToken,Object.assign({maxPageSize:t.maxPageSize},r))}}getContainerNameFromUrl(){let e;try{let t=nV.parse(this.url);if(e="blob"===t.getHost().split(".")[1]?t.getPath().split("/")[1]:sT(t)?t.getPath().split("/")[2]:t.getPath().split("/")[1],!(e=decodeURIComponent(e)))throw Error("Provided containerName is invalid.");return e}catch(e){throw Error("Unable to extract containerName with provided information.")}}generateSasUrl(e){return new Promise(t=>{if(!(this.credential instanceof il))throw RangeError("Can only generate the SAS when the client is initialized with a shared key credential");let r=iJ(Object.assign({containerName:this._containerName},e),this.credential).toString();t(sx(this.url,r))})}getBlobBatchClient(){return new ah(this.url,this.pipeline)}}class ay{constructor(){this.read=!1,this.write=!1,this.delete=!1,this.deleteVersion=!1,this.list=!1,this.add=!1,this.create=!1,this.update=!1,this.process=!1,this.tag=!1,this.filter=!1,this.setImmutabilityPolicy=!1,this.permanentDelete=!1}static parse(e){let t=new ay;for(let r of e)switch(r){case"r":t.read=!0;break;case"w":t.write=!0;break;case"d":t.delete=!0;break;case"x":t.deleteVersion=!0;break;case"l":t.list=!0;break;case"a":t.add=!0;break;case"c":t.create=!0;break;case"u":t.update=!0;break;case"p":t.process=!0;break;case"t":t.tag=!0;break;case"f":t.filter=!0;break;case"i":t.setImmutabilityPolicy=!0;break;case"y":t.permanentDelete=!0;break;default:throw RangeError(`Invalid permission character: ${r}`)}return t}static from(e){let t=new ay;return e.read&&(t.read=!0),e.write&&(t.write=!0),e.delete&&(t.delete=!0),e.deleteVersion&&(t.deleteVersion=!0),e.filter&&(t.filter=!0),e.tag&&(t.tag=!0),e.list&&(t.list=!0),e.add&&(t.add=!0),e.create&&(t.create=!0),e.update&&(t.update=!0),e.process&&(t.process=!0),e.setImmutabilityPolicy&&(t.setImmutabilityPolicy=!0),e.permanentDelete&&(t.permanentDelete=!0),t}toString(){let e=[];return this.read&&e.push("r"),this.write&&e.push("w"),this.delete&&e.push("d"),this.deleteVersion&&e.push("x"),this.filter&&e.push("f"),this.tag&&e.push("t"),this.list&&e.push("l"),this.add&&e.push("a"),this.create&&e.push("c"),this.update&&e.push("u"),this.process&&e.push("p"),this.setImmutabilityPolicy&&e.push("i"),this.permanentDelete&&e.push("y"),e.join("")}}class af{constructor(){this.service=!1,this.container=!1,this.object=!1}static parse(e){let t=new af;for(let r of e)switch(r){case"s":t.service=!0;break;case"c":t.container=!0;break;case"o":t.object=!0;break;default:throw RangeError(`Invalid resource type: ${r}`)}return t}toString(){let e=[];return this.service&&e.push("s"),this.container&&e.push("c"),this.object&&e.push("o"),e.join("")}}class ab{constructor(){this.blob=!1,this.file=!1,this.queue=!1,this.table=!1}static parse(e){let t=new ab;for(let r of e)switch(r){case"b":t.blob=!0;break;case"f":t.file=!0;break;case"q":t.queue=!0;break;case"t":t.table=!0;break;default:throw RangeError(`Invalid service character: ${r}`)}return t}toString(){let e=[];return this.blob&&e.push("b"),this.table&&e.push("t"),this.queue&&e.push("q"),this.file&&e.push("f"),e.join("")}}class av extends i${constructor(e,t,r){super(e,ii(t)?t:Q&&t instanceof il||t instanceof sW||W(t)?ia(t,r):ia(new sW,r)),this.serviceContext=new rV(this.storageClientContext)}static fromConnectionString(e,t){t=t||{};let r=sv(e);if("AccountConnString"===r.kind){if(Q){let e=new il(r.accountName,r.accountKey);t.proxyOptions||(t.proxyOptions=Y(r.proxyUri));let n=ia(e,t);return new av(r.url,n)}throw Error("Account connection string is only supported in Node.js environment")}if("SASConnString"===r.kind){let e=ia(new sW,t);return new av(r.url+"?"+r.accountSas,e)}throw Error("Connection string must be either an Account connection string or a SAS connection string")}getContainerClient(e){return new ag(sS(this.url,encodeURIComponent(e)),this.pipeline)}async createContainer(e,t={}){let{span:r,updatedOptions:n}=iF("BlobServiceClient-createContainer",t);try{let t=this.getContainerClient(e),r=await t.create(n);return{containerClient:t,containerCreateResponse:r}}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async deleteContainer(e,t={}){let{span:r,updatedOptions:n}=iF("BlobServiceClient-deleteContainer",t);try{let t=this.getContainerClient(e);return await t.delete(n)}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async undeleteContainer(e,t,r={}){let{span:n,updatedOptions:s}=iF("BlobServiceClient-undeleteContainer",r);try{let n=this.getContainerClient(r.destinationContainerName||e),i=new r1(n.storageClientContext),o=await i.restore(Object.assign({deletedContainerName:e,deletedContainerVersion:t},s));return{containerClient:n,containerUndeleteResponse:o}}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}async renameContainer(e,t,r={}){var n;let{span:s,updatedOptions:i}=iF("BlobServiceClient-renameContainer",r);try{let s=this.getContainerClient(t),o=new r1(s.storageClientContext),a=await o.rename(e,Object.assign(Object.assign({},i),{sourceLeaseId:null===(n=r.sourceCondition)||void 0===n?void 0:n.leaseId}));return{containerClient:s,containerRenameResponse:a}}catch(e){throw s.setStatus({code:k.ERROR,message:e.message}),e}finally{s.end()}}async getProperties(e={}){let{span:t,updatedOptions:r}=iF("BlobServiceClient-getProperties",e);try{return await this.serviceContext.getProperties(Object.assign({abortSignal:e.abortSignal},iV(r)))}catch(e){throw t.setStatus({code:k.ERROR,message:e.message}),e}finally{t.end()}}async setProperties(e,t={}){let{span:r,updatedOptions:n}=iF("BlobServiceClient-setProperties",t);try{return await this.serviceContext.setProperties(e,Object.assign({abortSignal:t.abortSignal},iV(n)))}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async getStatistics(e={}){let{span:t,updatedOptions:r}=iF("BlobServiceClient-getStatistics",e);try{return await this.serviceContext.getStatistics(Object.assign({abortSignal:e.abortSignal},iV(r)))}catch(e){throw t.setStatus({code:k.ERROR,message:e.message}),e}finally{t.end()}}async getAccountInfo(e={}){let{span:t,updatedOptions:r}=iF("BlobServiceClient-getAccountInfo",e);try{return await this.serviceContext.getAccountInfo(Object.assign({abortSignal:e.abortSignal},iV(r)))}catch(e){throw t.setStatus({code:k.ERROR,message:e.message}),e}finally{t.end()}}async listContainersSegment(e,t={}){let{span:r,updatedOptions:n}=iF("BlobServiceClient-listContainersSegment",t);try{return await this.serviceContext.listContainersSegment(Object.assign(Object.assign(Object.assign({abortSignal:t.abortSignal,marker:e},t),{include:"string"==typeof t.include?[t.include]:t.include}),iV(n)))}catch(e){throw r.setStatus({code:k.ERROR,message:e.message}),e}finally{r.end()}}async findBlobsByTagsSegment(e,t,r={}){let{span:n,updatedOptions:s}=iF("BlobServiceClient-findBlobsByTagsSegment",r);try{let n=await this.serviceContext.filterBlobs(Object.assign({abortSignal:r.abortSignal,where:e,marker:t,maxPageSize:r.maxPageSize},iV(s))),i=Object.assign(Object.assign({},n),{_response:n._response,blobs:n.blobs.map(e=>{var t;let r="";return(null===(t=e.tags)||void 0===t?void 0:t.blobTagSet.length)===1&&(r=e.tags.blobTagSet[0].value),Object.assign(Object.assign({},e),{tags:sA(e.tags),tagValue:r})})});return i}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}findBlobsByTagsSegments(e,t,r={}){return u(this,arguments,function*(){let n;if(t||void 0===t)do(n=yield p(this.findBlobsByTagsSegment(e,t,r))).blobs=n.blobs||[],t=n.continuationToken,yield yield p(n);while(t)})}findBlobsByTagsItems(e,t={}){return u(this,arguments,function*(){let r;try{for(var n,s,i,o=h(this.findBlobsByTagsSegments(e,r,t));!(i=yield p(o.next())).done;){let e=i.value;yield p((yield*m(h(e.blobs))))}}catch(e){n={error:e}}finally{try{i&&!i.done&&(s=o.return)&&(yield p(s.call(o)))}finally{if(n)throw n.error}}})}findBlobsByTags(e,t={}){let r=Object.assign({},t),n=this.findBlobsByTagsItems(e,r);return{next:()=>n.next(),[Symbol.asyncIterator](){return this},byPage:(t={})=>this.findBlobsByTagsSegments(e,t.continuationToken,Object.assign({maxPageSize:t.maxPageSize},r))}}listSegments(e,t={}){return u(this,arguments,function*(){let r;if(e||void 0===e)do(r=yield p(this.listContainersSegment(e,t))).containerItems=r.containerItems||[],e=r.continuationToken,yield yield p((yield p(r)));while(e)})}listItems(e={}){return u(this,arguments,function*(){let t;try{for(var r,n,s,i=h(this.listSegments(t,e));!(s=yield p(i.next())).done;){let e=s.value;yield p((yield*m(h(e.containerItems))))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&(yield p(n.call(i)))}finally{if(r)throw r.error}}})}listContainers(e={}){""===e.prefix&&(e.prefix=void 0);let t=[];e.includeDeleted&&t.push("deleted"),e.includeMetadata&&t.push("metadata"),e.includeSystem&&t.push("system");let r=Object.assign(Object.assign({},e),t.length>0?{include:t}:{}),n=this.listItems(r);return{next:()=>n.next(),[Symbol.asyncIterator](){return this},byPage:(e={})=>this.listSegments(e.continuationToken,Object.assign({maxPageSize:e.maxPageSize},r))}}async getUserDelegationKey(e,t,r={}){let{span:n,updatedOptions:s}=iF("BlobServiceClient-getUserDelegationKey",r);try{let n=await this.serviceContext.getUserDelegationKey({startsOn:sO(e,!1),expiresOn:sO(t,!1)},Object.assign({abortSignal:r.abortSignal},iV(s))),i={signedObjectId:n.signedObjectId,signedTenantId:n.signedTenantId,signedStartsOn:new Date(n.signedStartsOn),signedExpiresOn:new Date(n.signedExpiresOn),signedService:n.signedService,signedVersion:n.signedVersion,value:n.value},o=Object.assign({_response:n._response,requestId:n.requestId,clientRequestId:n.clientRequestId,version:n.version,date:n.date,errorCode:n.errorCode},i);return o}catch(e){throw n.setStatus({code:k.ERROR,message:e.message}),e}finally{n.end()}}getBlobBatchClient(){return new ah(this.url,this.pipeline)}generateAccountSasUrl(e,t=ay.parse("r"),r="sco",n={}){if(!(this.credential instanceof il))throw RangeError("Can only generate the account SAS when the client is initialized with a shared key credential");if(void 0===e){let t=new Date;e=new Date(t.getTime()+36e5)}let s=(function(e,t){let r;let n=e.version?e.version:sc;if(e.permissions&&e.permissions.setImmutabilityPolicy&&n<"2020-08-04")throw RangeError("'version' must be >= '2020-08-04' when provided 'i' permission.");if(e.permissions&&e.permissions.deleteVersion&&n<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when provided 'x' permission.");if(e.permissions&&e.permissions.permanentDelete&&n<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when provided 'y' permission.");if(e.permissions&&e.permissions.tag&&n<"2019-12-12")throw RangeError("'version' must be >= '2019-12-12' when provided 't' permission.");if(e.permissions&&e.permissions.filter&&n<"2019-12-12")throw RangeError("'version' must be >= '2019-12-12' when provided 'f' permission.");if(e.encryptionScope&&n<"2020-12-06")throw RangeError("'version' must be >= '2020-12-06' when provided 'encryptionScope' in SAS.");let s=ay.parse(e.permissions.toString()),i=ab.parse(e.services).toString(),o=af.parse(e.resourceTypes).toString();r=n>="2020-12-06"?[t.accountName,s,i,o,e.startsOn?sO(e.startsOn,!1):"",sO(e.expiresOn,!1),e.ipRange?iQ(e.ipRange):"",e.protocol?e.protocol:"",n,e.encryptionScope?e.encryptionScope:"",""].join("\n"):[t.accountName,s,i,o,e.startsOn?sO(e.startsOn,!1):"",sO(e.expiresOn,!1),e.ipRange?iQ(e.ipRange):"",e.protocol?e.protocol:"",n,""].join("\n");let a=t.computeHMACSHA256(r);return new iW(n,a,s.toString(),i,o,e.protocol,e.startsOn,e.expiresOn,e.ipRange,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,e.encryptionScope)})(Object.assign({permissions:t,expiresOn:e,resourceTypes:r,services:ab.parse("b").toString()},n),this.credential).toString();return sx(this.url,s)}}},512:function(e){var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise(function(r,n){function s(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",s),r([].slice.call(arguments))}g(e,t,i,{once:!0}),"error"!==t&&"function"==typeof e.on&&g(e,"error",s,{once:!0})})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){if(a(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),void 0===o)o=i[t]=r,++e._eventsCount;else if("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(s=l(e))>0&&o.length>s&&!o.warned){o.warned=!0;var s,i,o,c=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,console&&console.warn&&console.warn(c)}return e}function d(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=d.bind(n);return s.listener=r,n.wrapFn=s,s}function u(e,t,r){var n=e._events;if(void 0===n)return[];var s=n[t];return void 0===s?[]:"function"==typeof s?r?[s.listener||s]:[s]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(s):h(s,s.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function h(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function s(i){n.once&&e.removeEventListener(t,s),r(i)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var s="error"===e,i=this._events;if(void 0!==i)s=s&&void 0===i.error;else if(!s)return!1;if(s){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,a=Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else for(var c=l.length,d=h(l,c),r=0;r<c;++r)n(d[r],this,t);return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,p(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,p(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,s,i,o;if(a(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(s=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){o=r[i].listener,s=i;break}if(s<0)return this;0===s?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,s),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var s,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(s=i[n])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return u(this,e,!0)},i.prototype.rawListeners=function(e){return u(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},i.prototype.listenerCount=m,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}}]);