(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{7724:function(e,t,n){Promise.resolve().then(n.bind(n,7267))},7267:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var i=n(7437),a=n(3075),l=n(6716),o=n(4883),s=n(9576),r=n(3538),c=n(2265);n(6282);var d=n(3580),u=n(9222),m=n(4033),h=n(1512);let p="http://localhost:3000";function v(e){let{params:t}=e,{id:n}=t,v=(0,m.useRouter)(),x=(0,c.useRef)(null),[f,g]=(0,c.useState)([]),[y,j]=(0,c.useState)(!1),[w,b]=(0,c.useState)(null),[N,C]=(0,c.useState)(),[S,k]=(0,c.useState)([]),[_,Z]=(0,c.useState)(),[V,G]=(0,c.useState)(!1),[I,L]=(0,c.useState)(),[R,M]=(0,c.useState)(),[E,P]=(0,c.useState)([]),[A,W]=(0,c.useState)(0),[T,z]=(0,c.useState)(),[F,O]=(0,c.useState)(),[B,$]=(0,c.useState)(null),D=new FormData;D.append("titleReview",I),D.append("titleItem",R),D.append("category",F),D.append("desc",T),D.append("rating",A),D.append("likes",0),D.append("file",B),E.forEach(e=>{e.name?D.append("tags",e.name):D.append("tags",e)});let U=async e=>{e.preventDefault(),j(!0);try{let e=await u.Z.post(p+"/api/review/edit/".concat(n),D,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});await u.Z.post("/api/tags",E),j(!1),201===e.status&&v.push("/")}catch(e){G(e),console.log(e),j(!1)}};return(0,c.useEffect)(()=>{let e=async()=>{j(!0);try{let e=await u.Z.get(p+"/api/category").then(e=>e.data);g(e);let t=await u.Z.get(p+"/api/tags").then(e=>e.data);k(t);let i=await u.Z.get(p+"/api/review/".concat(n)).then(e=>e.data);Z(i),L(i.titleReview),M(i.titleItem),O(i.category._id),z(i.desc),P(i.tags),W(i.rating),C(i.img),j(!1)}catch(e){console.log(e),G(e.message),j(!1)}};e()},[]),(0,i.jsxs)("main",{children:[w&&(0,i.jsxs)("div",{className:"container position-absolute top-0 start-0 end-0 bottom-0 z-2 bg-body pb-5",children:[(0,i.jsx)(d.Z,{data:_}),(0,i.jsx)(l.Z,{variant:"secondary",className:"mb-5",onClick:e=>b(!1),children:"Close preview"})]}),(0,i.jsxs)(o.Z,{onSubmit:U,children:[y&&(0,i.jsx)(h.Z,{}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col col-auto mt-2 mb-4",children:[(0,i.jsx)("div",{style:{maxWidth:"150px",minHeight:"200px"},className:"mb-4 p-2 rounded overflow-hidden border",children:(0,i.jsx)("img",{alt:"",src:N,className:"object-fit-cover w-100 h-auto"})}),(0,i.jsx)("input",{ref:x,type:"file",accept:"image/*",name:"image",id:"selectFile",hidden:!0,onChange:e=>{$(e.target.files[0]),C(URL.createObjectURL(e.target.files[0]))}}),(0,i.jsx)(l.Z,{onClick:()=>{var e;null===(e=x.current)||void 0===e||e.click()},className:"w-100",variant:"primary",children:"Edit image"})]}),(0,i.jsxs)("div",{className:"col",style:{minWidth:"80%"},children:[(0,i.jsxs)(o.Z.Group,{className:"mb-3",children:[(0,i.jsx)(o.Z.Label,{children:(0,i.jsx)("h2",{children:"Title of review"})}),(0,i.jsx)(o.Z.Control,{type:"text",value:I,name:"titleReview",placeholder:"Enter title of your review",onChange:e=>L(e.target.value)})]}),(0,i.jsxs)(o.Z.Group,{className:"mb-3",children:[(0,i.jsx)(o.Z.Label,{children:(0,i.jsx)("h4",{children:"Title of movie, book, game, etc"})}),(0,i.jsx)(o.Z.Control,{type:"text",value:R,name:"titleItem",placeholder:"Enter title of movie, book, game, etc...",onChange:e=>M(e.target.value)})]}),(0,i.jsxs)(o.Z.Group,{className:"mb-3",children:[(0,i.jsx)(o.Z.Label,{children:"Choice category"}),(0,i.jsx)(a.Z,{children:(0,i.jsx)(o.Z.Select,{name:"category","aria-label":"category",onChange:e=>O(e.target.value),children:f.map(e=>(0,i.jsx)("option",{selected:e._id===F,value:e._id,children:e.name},e.key))})})]}),(0,i.jsxs)(o.Z.Group,{className:"mb-3",children:[(0,i.jsx)(o.Z.Label,{children:"Enter tags for your review"}),(0,i.jsx)(r.pY,{id:"basic-typeahead-multiple",labelKey:"name",allowNew:!0,multiple:!0,onChange:P,options:S,placeholder:"Choose several tags...",selected:E,className:"text-body"})]}),(0,i.jsxs)(o.Z.Group,{className:"mb-3",controlId:"desc",children:[(0,i.jsx)(o.Z.Label,{children:"Your review"}),(0,i.jsx)(o.Z.Control,{name:"desc",as:"textarea",rows:4,value:T,maxLength:4096,placeholder:"Text of review",onChange:e=>z(e.target.value)})]}),(0,i.jsxs)(o.Z.Group,{className:"mb-4 d-flex flex-column",children:[(0,i.jsx)(o.Z.Label,{children:"Your grade from 0 - 10"}),(0,i.jsx)(s.i,{size:25,iconsCount:10,initialValue:A,onClick:e=>{W(e)}})]}),V&&(0,i.jsx)("p",{className:"text-danger",children:V.message}),(0,i.jsxs)("div",{children:[(0,i.jsx)(l.Z,{variant:"secondary",className:"me-3 mb-3",onClick:e=>b(!0),children:"Preview"}),(0,i.jsx)(l.Z,{type:"submit",variant:"primary",className:"mb-3 shadow-sm",style:{width:"180px"},children:"Submit"}),V&&(0,i.jsx)("p",{className:"text-danger mt-3",children:V.message})]})]})]})]})]})}},1512:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(7437),a=n(9639);function l(){return(0,i.jsx)("div",{className:"w-100 h-100 position-absolute z-2 d-flex justify-content-center align-items-center",children:(0,i.jsxs)("div",{className:"py-4 px-5 bg-primary rounded d-flex justify-content-center align-items-center",children:[(0,i.jsx)(a.Z,{animation:"border",variant:"light"}),"\xa0",(0,i.jsx)("p",{className:"m-0 text-light",children:"Loading... Please wait"})]})})}},3580:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(7437);n(2749);var a=n(9588);function l(e){var t,n,l;let{data:o}=e;return(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)("div",{style:{maxWidth:"150px"},className:"mt-2 me-3",children:(0,i.jsx)("img",{src:null==o?void 0:o.img,alt:"",className:"object-fit-cover w-100 h-auto",style:{minWidth:"70px"}})}),(0,i.jsxs)("div",{className:"w-75",style:{minWidth:"180px"},children:[(0,i.jsx)("h2",{children:null==o?void 0:o.titleReview}),(0,i.jsx)("h4",{children:null==o?void 0:o.titleItem}),(0,i.jsx)("p",{children:null==o?void 0:null===(t=o.category)||void 0===t?void 0:t.name}),(0,i.jsx)("p",{children:null==o?void 0:o.tags.map(e=>(0,i.jsx)("span",{className:"rbt-token p-1",children:e+" "}))}),(0,i.jsx)(a.D,{children:null==o?void 0:o.desc}),(0,i.jsxs)("p",{children:["Rate: ",null==o?void 0:o.rating]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsxs)("p",{children:["Review likes: ",null==o?void 0:null===(n=o.likes)||void 0===n?void 0:n.length]}),(null==o?void 0:null===(l=o.author)||void 0===l?void 0:l.name)&&(0,i.jsxs)("p",{children:["Author: \xa0",null==o?void 0:o.author.name]})]})]})]}),(0,i.jsx)("hr",{className:"w-100"})]})}},4033:function(e,t,n){e.exports=n(8165)},9639:function(e,t,n){"use strict";var i=n(4440),a=n.n(i),l=n(2265),o=n(7127),s=n(7437);let r=l.forwardRef(({bsPrefix:e,variant:t,animation:n="border",size:i,as:l="div",className:r,...c},d)=>{e=(0,o.vE)(e,"spinner");let u=`${e}-${n}`;return(0,s.jsx)(l,{ref:d,...c,className:a()(r,u,i&&`${u}-${i}`,t&&`text-${t}`)})});r.displayName="Spinner",t.Z=r},9576:function(e,t,n){"use strict";var i=n(7437),a=n(2265),l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function o(e,t,n){if(n||2==arguments.length)for(var i,a=0,l=t.length;a<l;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}function s(e){var t=e.size,n=void 0===t?25:t,a=e.SVGstrokeColor,o=e.SVGstorkeWidth,s=e.SVGclassName,r=e.SVGstyle;return i.jsx("svg",l({className:void 0===s?"star-svg":s,style:r,stroke:void 0===a?"currentColor":a,fill:"currentColor",strokeWidth:void 0===o?0:o,viewBox:"0 0 24 24",width:n,height:n,xmlns:"http://www.w3.org/2000/svg"},{children:i.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}))}function r(e,t){switch(t.type){case"PointerMove":return l(l({},e),{hoverValue:t.payload,hoverIndex:t.index});case"PointerLeave":return l(l({},e),{ratingValue:e.ratingValue,hoverIndex:0,hoverValue:null});case"MouseClick":return l(l({},e),{valueIndex:e.hoverIndex,ratingValue:t.payload});default:return e}}function c(){return"undefined"!=typeof window&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||"undefined"!=typeof navigator&&navigator.maxTouchPoints>0}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".style-module_starRatingWrap__q-lJC{display:inline-block;touch-action:none}.style-module_simpleStarRating__nWUxf{display:inline-block;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.style-module_fillIcons__6---A{display:inline-block;overflow:hidden;position:absolute;top:0;white-space:nowrap}.style-module_emptyIcons__Bg-FZ{display:inline-block}.style-module_tooltip__tKc3i{background-color:#333;border-radius:5px;color:#fff;display:inline-block;padding:5px 15px;vertical-align:middle}"),t.i=function(e){var t,n,d=e.onClick,u=e.onPointerMove,m=e.onPointerEnter,h=e.onPointerLeave,p=e.initialValue,v=void 0===p?0:p,x=e.iconsCount,f=void 0===x?5:x,g=e.size,y=void 0===g?40:g,j=e.readonly,w=void 0!==j&&j,b=e.rtl,N=void 0!==b&&b,C=e.customIcons,S=void 0===C?[]:C,k=e.allowFraction,_=void 0!==k&&k,Z=e.style,V=e.className,G=void 0===V?"react-simple-star-rating":V,I=e.transition,L=void 0!==I&&I,R=e.allowHover,M=void 0===R||R,E=e.disableFillHover,P=void 0!==E&&E,A=e.fillIcon,W=void 0===A?null:A,T=e.fillColor,z=void 0===T?"#ffbc0b":T,F=e.fillColorArray,O=void 0===F?[]:F,B=e.fillStyle,$=e.fillClassName,D=void 0===$?"filled-icons":$,U=e.emptyIcon,Y=void 0===U?null:U,H=e.emptyColor,K=e.emptyStyle,q=e.emptyClassName,J=void 0===q?"empty-icons":q,X=e.allowTitleTag,Q=e.showTooltip,ee=e.tooltipDefaultText,et=e.tooltipArray,en=void 0===et?[]:et,ei=e.tooltipStyle,ea=e.tooltipClassName,el=void 0===ea?"react-simple-star-rating-tooltip":ea,eo=e.SVGclassName,es=void 0===eo?"star-svg":eo,er=e.titleSeparator,ec=void 0===er?"out of":er,ed=e.SVGstyle,eu=e.SVGstorkeWidth,em=void 0===eu?0:eu,eh=e.SVGstrokeColor,ep=void 0===eh?"currentColor":eh,ev=a.useReducer(r,{hoverIndex:0,valueIndex:0,ratingValue:v,hoverValue:null}),ex=ev[0],ef=ex.ratingValue,eg=ex.hoverValue,ey=ex.hoverIndex,ej=ex.valueIndex,ew=ev[1];a.useEffect(function(){v&&ew({type:"MouseClick",payload:0})},[v]);var eb=a.useMemo(function(){return _?2*f:f},[_,f]),eN=a.useMemo(function(){return v>eb?0:_||Math.floor(v)===v?Math.round(v/f*100):2*Math.ceil(v)*10},[_,v,f,eb]),eC=a.useMemo(function(){return(_?2*v-1:v-1)||0},[_,v]),eS=a.useCallback(function(e){return f%2!=0?e/2/10:e*f/100},[f]),ek=function(e){for(var t=e.clientX,n=e.currentTarget.children[0].getBoundingClientRect(),i=n.left,a=n.right,l=n.width,o=N?a-t:t-i,s=eb,r=Math.round(l/eb),c=0;c<=eb;c+=1)if(o<=r*c){s=0===c&&o<r?0:c;break}var d=s-1;s>0&&(ew({type:"PointerMove",payload:100*s/eb,index:d}),u&&eg&&u(eS(eg),d,e))},e_=function(e){eg&&(ew({type:"MouseClick",payload:eg}),d&&d(eS(eg),ey,e))},eZ=a.useMemo(function(){if(M){if(P){var e=ef&&ef||eN;return eg&&eg>e?eg:e}return eg&&eg||ef&&ef||eN}return ef&&ef||eN},[M,P,eg,ef,eN]);a.useEffect(function(){en.length>eb&&console.error("tooltipArray Array length is bigger then Icons Count length.")},[en.length,eb]);var eV=a.useCallback(function(e){return eg&&e[ey]||ef&&e[ej]||v&&e[eC]},[eg,ey,ef,ej,v,eC]),eG=a.useMemo(function(){return eg&&eS(eg)||ef&&eS(ef)||v&&eS(eN)},[eg,eS,ef,v,eN]);return i.jsxs("span",l({className:"style-module_starRatingWrap__q-lJC",style:{direction:"".concat(N?"rtl":"ltr")}},{children:[i.jsxs("span",l({className:"".concat("style-module_simpleStarRating__nWUxf"," ").concat(G),style:l({cursor:w?"":"pointer"},Z),onPointerMove:w?void 0:ek,onPointerEnter:w?void 0:function(e){m&&m(e),c()&&ek(e)},onPointerLeave:w?void 0:function(e){c()&&e_(),ew({type:"PointerLeave"}),h&&h(e)},onClick:w?void 0:e_,"aria-hidden":"true"},{children:[i.jsx("span",l({className:"".concat("style-module_emptyIcons__Bg-FZ"," ").concat(J),style:l({color:void 0===H?"#cccccc":H},K)},{children:o([],Array(f),!0).map(function(e,t){var n;return i.jsx(a.Fragment,{children:(null===(n=S[t])||void 0===n?void 0:n.icon)||Y||i.jsx(s,{SVGclassName:es,SVGstyle:ed,SVGstorkeWidth:em,SVGstrokeColor:ep,size:y})},t)})})),i.jsx("span",l({className:"".concat("style-module_fillIcons__6---A"," ").concat(D),style:l(((t={})[N?"right":"left"]=0,t.color=eV(O)||z,t.transition=L?"width .2s ease, color .2s ease":"",t.width="".concat(eZ,"%"),t),B),title:void 0===X||X?"".concat(eG," ").concat(ec," ").concat(f):void 0},{children:o([],Array(f),!0).map(function(e,t){var n;return i.jsx(a.Fragment,{children:(null===(n=S[t])||void 0===n?void 0:n.icon)||W||i.jsx(s,{SVGclassName:es,SVGstyle:ed,SVGstorkeWidth:em,SVGstrokeColor:ep,size:y})},t)})}))]})),void 0!==Q&&Q&&i.jsx("span",l({className:"".concat("style-module_tooltip__tKc3i"," ").concat(el),style:l(((n={})[N?"marginRight":"marginLeft"]=20,n),ei)},{children:(en.length>0?eV(en):eG)||(void 0===ee?"Your Rate":ee)}))]}))}}},function(e){e.O(0,[302,222,883,471,753,588,971,596,744],function(){return e(e.s=7724)}),_N_E=e.O()}]);