(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{7724:function(e,t,i){Promise.resolve().then(i.bind(i,7267))},7267:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return x}});var n=i(7437),l=i(3075),o=i(6716),a=i(4883),s=i(9576),r=i(3538),c=i(2265);i(6282);var d=i(2749),u=i(9222),h=i(4033),v=i(2115),m=i(1512);let p="http://localhost:3000";function x(e){let{params:t}=e,{id:i}=t,x=(0,c.useRef)(null),[f,g]=(0,c.useState)([]),y=(0,h.useRouter)(),[j,w]=(0,c.useState)(!1),[b,N]=(0,c.useState)(null),[C,S]=(0,c.useState)(),[_,k]=(0,c.useState)([]),[Z,V]=(0,c.useState)(),[G,I]=(0,c.useState)(!1),[L,R]=(0,c.useState)(),[M,E]=(0,c.useState)(),[P,W]=(0,c.useState)([]),[A,T]=(0,c.useState)(0),[z,O]=(0,c.useState)(),[F,B]=(0,c.useState)(),[D,$]=(0,c.useState)(null),{data:H,status:J}=(0,d.useSession)(),U=new FormData;U.append("titleReview",L),U.append("titleItem",M),U.append("category",F),U.append("desc",z),U.append("rating",A),U.append("likes",0),U.append("file",D),P.forEach(e=>{U.append("tags",JSON.stringify(e))});let Y=async e=>{e.preventDefault(),w(!0);try{let e=await u.Z.post(p+"/api/review/edit/".concat(i),U,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});w(!1),201===e.status&&y.push("/")}catch(e){I(e),console.log(e),w(!1)}};return(0,c.useEffect)(()=>{let e=async()=>{w(!0);try{let e=await u.Z.get(p+"/api/category").then(e=>e.data);g(e);let t=await u.Z.get(p+"/api/tags").then(e=>e.data);k(t);let n=await u.Z.get(p+"/api/review/".concat(i)).then(e=>e.data);V(n),R(n.titleReview),E(n.titleItem),B(n.category._id),O(n.desc),W(n.tags.map(e=>JSON.parse(e))),T(n.rating),S(n.img),w(!1)}catch(e){console.log(e),I(e.message),w(!1)}};e()},[]),(0,n.jsxs)("main",{children:[b&&(0,n.jsxs)("div",{className:"container position-absolute top-0 start-0 end-0 bottom-0 z-2 bg-body pb-5",children:[(0,n.jsx)(v.Z,{reviewData:body}),(0,n.jsx)(o.Z,{variant:"secondary",className:"mb-5",onClick:e=>N(!1),children:"Close preview"})]}),(0,n.jsxs)(a.Z,{onSubmit:Y,children:[j&&(0,n.jsx)(m.Z,{}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col col-auto mt-2 mb-4",children:[(0,n.jsx)("div",{style:{maxWidth:"150px",minHeight:"200px"},className:"mb-4 p-2 rounded overflow-hidden border",children:(0,n.jsx)("img",{alt:"",src:C,className:"object-fit-cover w-100 h-auto"})}),(0,n.jsx)("input",{ref:x,type:"file",accept:"image/*",name:"image",id:"selectFile",hidden:!0,onChange:e=>{$(e.target.files[0]),S(URL.createObjectURL(e.target.files[0]))}}),(0,n.jsx)(o.Z,{onClick:()=>{var e;null===(e=x.current)||void 0===e||e.click()},className:"w-100",variant:"primary",children:"Edit image"})]}),(0,n.jsxs)("div",{className:"col",style:{minWidth:"80%"},children:[(0,n.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,n.jsx)(a.Z.Label,{children:(0,n.jsx)("h2",{children:"Title of review"})}),(0,n.jsx)(a.Z.Control,{type:"text",value:L,name:"titleReview",placeholder:"Enter title of your review",onChange:e=>R(e.target.value)})]}),(0,n.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,n.jsx)(a.Z.Label,{children:(0,n.jsx)("h4",{children:"Title of movie, book, game, etc"})}),(0,n.jsx)(a.Z.Control,{type:"text",value:M,name:"titleItem",placeholder:"Enter title of movie, book, game, etc...",onChange:e=>E(e.target.value)})]}),(0,n.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,n.jsx)(a.Z.Label,{children:"Choice category"}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(a.Z.Select,{name:"category","aria-label":"category",onChange:e=>B(e.target.value),children:f.map(e=>(0,n.jsx)("option",{selected:e._id===F,value:e._id,children:e.name},e.key))})})]}),(0,n.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,n.jsx)(a.Z.Label,{children:"Enter tags for your review"}),(0,n.jsx)(r.pY,{id:"basic-typeahead-multiple",labelKey:"name",allowNew:!0,multiple:!0,onChange:W,options:_,placeholder:"Choose several tags...",selected:P,className:"text-body"})]}),(0,n.jsxs)(a.Z.Group,{className:"mb-3",controlId:"desc",children:[(0,n.jsx)(a.Z.Label,{children:"Your review"}),(0,n.jsx)(a.Z.Control,{name:"desc",as:"textarea",rows:4,value:z,maxLength:4096,placeholder:"Text of review",onChange:e=>O(e.target.value)})]}),(0,n.jsxs)(a.Z.Group,{className:"mb-4 d-flex flex-column",children:[(0,n.jsx)(a.Z.Label,{children:"Your grade from 0 - 10"}),(0,n.jsx)(s.i,{size:25,iconsCount:10,initialValue:A,onClick:e=>{T(e)}})]}),G&&(0,n.jsx)("p",{className:"text-danger",children:G.message}),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.Z,{variant:"secondary",className:"me-3 mb-3",onClick:e=>N(!0),children:"Preview"}),(0,n.jsx)(o.Z,{type:"submit",variant:"primary",className:"mb-3 shadow-sm",style:{width:"180px"},children:"Submit"}),G&&(0,n.jsx)("p",{className:"text-danger mt-3",children:G.message})]})]})]})]})]})}},1512:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var n=i(7437),l=i(9639);function o(){return(0,n.jsx)("div",{className:"w-100 h-100 position-absolute z-2 d-flex justify-content-center align-items-center",children:(0,n.jsxs)("div",{className:"py-4 px-5 bg-primary rounded d-flex justify-content-center align-items-center",children:[(0,n.jsx)(l.Z,{animation:"border",variant:"light"}),"\xa0",(0,n.jsx)("p",{className:"m-0 text-light",children:"Loading... Please wait"})]})})}},2115:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(7437),l=i(2749),o=i(1396),a=i.n(o),s=i(8829),r=i.n(s),c=i(9588);function d(e){var t,i,o,s,d,u,h;let{main:v,data:m,highlight:p}=e,{data:x,status:f}=(0,l.useSession)();return(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsxs)("div",{className:"d-flex",children:[(0,n.jsx)(a(),{href:"/review/".concat(null==m?void 0:m._id),className:"text-decoration-none text-body mt-2 me-3",children:(0,n.jsx)("div",{style:{maxWidth:"150px"},children:(0,n.jsx)("img",{src:null==m?void 0:m.img,alt:"",className:"object-fit-cover w-100 h-auto",style:{minWidth:"70px"}})})}),(0,n.jsxs)("div",{className:"w-75",style:{minWidth:"180px"},children:[(0,n.jsxs)(a(),{href:"/review/".concat(m._id),className:"text-decoration-none text-body",children:[(0,n.jsx)("h2",{children:null==m?void 0:m.titleReview}),(0,n.jsx)("h4",{children:null==m?void 0:m.titleItem}),(0,n.jsx)("p",{children:null==m?void 0:null===(t=m.category)||void 0===t?void 0:t.name}),(0,n.jsx)("p",{children:null==m?void 0:m.tags.map(e=>(0,n.jsx)("span",{className:"rbt-token p-1",children:e+" "}))}),v?(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(r(),{highlightClassName:"bg-warning",searchWords:[p],autoEscape:!0,textToHighlight:(null==m?void 0:null===(i=m.desc)||void 0===i?void 0:i.substring(0,200))+"..."})}):(0,n.jsx)(c.D,{children:null==m?void 0:m.desc}),(0,n.jsxs)("p",{children:["Rate: ",null==m?void 0:m.rating]})]}),(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsxs)("p",{children:["Review likes: ",null==m?void 0:null===(o=m.likes)||void 0===o?void 0:o.length]}),(null==m?void 0:null===(s=m.author)||void 0===s?void 0:s.name)&&(0,n.jsxs)("p",{children:["Author: \xa0",(0,n.jsx)(a(),{href:(null==m?void 0:null===(d=m.author)||void 0===d?void 0:d._id)===(null==x?void 0:null===(u=x.user)||void 0===u?void 0:u.id)?"/profile":"/profile/".concat(null==m?void 0:null===(h=m.author)||void 0===h?void 0:h._id),className:"text-primary",children:null==m?void 0:m.author.name})]})]})]})]}),(0,n.jsx)("hr",{className:"w-100"})]})}},4033:function(e,t,i){e.exports=i(8165)},9639:function(e,t,i){"use strict";var n=i(4440),l=i.n(n),o=i(2265),a=i(7127),s=i(7437);let r=o.forwardRef(({bsPrefix:e,variant:t,animation:i="border",size:n,as:o="div",className:r,...c},d)=>{e=(0,a.vE)(e,"spinner");let u=`${e}-${i}`;return(0,s.jsx)(o,{ref:d,...c,className:l()(r,u,n&&`${u}-${n}`,t&&`text-${t}`)})});r.displayName="Spinner",t.Z=r},9576:function(e,t,i){"use strict";var n=i(7437),l=i(2265),o=function(){return(o=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var l in t=arguments[i])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};function a(e,t,i){if(i||2==arguments.length)for(var n,l=0,o=t.length;l<o;l++)!n&&l in t||(n||(n=Array.prototype.slice.call(t,0,l)),n[l]=t[l]);return e.concat(n||Array.prototype.slice.call(t))}function s(e){var t=e.size,i=void 0===t?25:t,l=e.SVGstrokeColor,a=e.SVGstorkeWidth,s=e.SVGclassName,r=e.SVGstyle;return n.jsx("svg",o({className:void 0===s?"star-svg":s,style:r,stroke:void 0===l?"currentColor":l,fill:"currentColor",strokeWidth:void 0===a?0:a,viewBox:"0 0 24 24",width:i,height:i,xmlns:"http://www.w3.org/2000/svg"},{children:n.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}))}function r(e,t){switch(t.type){case"PointerMove":return o(o({},e),{hoverValue:t.payload,hoverIndex:t.index});case"PointerLeave":return o(o({},e),{ratingValue:e.ratingValue,hoverIndex:0,hoverValue:null});case"MouseClick":return o(o({},e),{valueIndex:e.hoverIndex,ratingValue:t.payload});default:return e}}function c(){return"undefined"!=typeof window&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||"undefined"!=typeof navigator&&navigator.maxTouchPoints>0}!function(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===i&&n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}(".style-module_starRatingWrap__q-lJC{display:inline-block;touch-action:none}.style-module_simpleStarRating__nWUxf{display:inline-block;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.style-module_fillIcons__6---A{display:inline-block;overflow:hidden;position:absolute;top:0;white-space:nowrap}.style-module_emptyIcons__Bg-FZ{display:inline-block}.style-module_tooltip__tKc3i{background-color:#333;border-radius:5px;color:#fff;display:inline-block;padding:5px 15px;vertical-align:middle}"),t.i=function(e){var t,i,d=e.onClick,u=e.onPointerMove,h=e.onPointerEnter,v=e.onPointerLeave,m=e.initialValue,p=void 0===m?0:m,x=e.iconsCount,f=void 0===x?5:x,g=e.size,y=void 0===g?40:g,j=e.readonly,w=void 0!==j&&j,b=e.rtl,N=void 0!==b&&b,C=e.customIcons,S=void 0===C?[]:C,_=e.allowFraction,k=void 0!==_&&_,Z=e.style,V=e.className,G=void 0===V?"react-simple-star-rating":V,I=e.transition,L=void 0!==I&&I,R=e.allowHover,M=void 0===R||R,E=e.disableFillHover,P=void 0!==E&&E,W=e.fillIcon,A=void 0===W?null:W,T=e.fillColor,z=void 0===T?"#ffbc0b":T,O=e.fillColorArray,F=void 0===O?[]:O,B=e.fillStyle,D=e.fillClassName,$=void 0===D?"filled-icons":D,H=e.emptyIcon,J=void 0===H?null:H,U=e.emptyColor,Y=e.emptyStyle,K=e.emptyClassName,q=void 0===K?"empty-icons":K,X=e.allowTitleTag,Q=e.showTooltip,ee=e.tooltipDefaultText,et=e.tooltipArray,ei=void 0===et?[]:et,en=e.tooltipStyle,el=e.tooltipClassName,eo=void 0===el?"react-simple-star-rating-tooltip":el,ea=e.SVGclassName,es=void 0===ea?"star-svg":ea,er=e.titleSeparator,ec=void 0===er?"out of":er,ed=e.SVGstyle,eu=e.SVGstorkeWidth,eh=void 0===eu?0:eu,ev=e.SVGstrokeColor,em=void 0===ev?"currentColor":ev,ep=l.useReducer(r,{hoverIndex:0,valueIndex:0,ratingValue:p,hoverValue:null}),ex=ep[0],ef=ex.ratingValue,eg=ex.hoverValue,ey=ex.hoverIndex,ej=ex.valueIndex,ew=ep[1];l.useEffect(function(){p&&ew({type:"MouseClick",payload:0})},[p]);var eb=l.useMemo(function(){return k?2*f:f},[k,f]),eN=l.useMemo(function(){return p>eb?0:k||Math.floor(p)===p?Math.round(p/f*100):2*Math.ceil(p)*10},[k,p,f,eb]),eC=l.useMemo(function(){return(k?2*p-1:p-1)||0},[k,p]),eS=l.useCallback(function(e){return f%2!=0?e/2/10:e*f/100},[f]),e_=function(e){for(var t=e.clientX,i=e.currentTarget.children[0].getBoundingClientRect(),n=i.left,l=i.right,o=i.width,a=N?l-t:t-n,s=eb,r=Math.round(o/eb),c=0;c<=eb;c+=1)if(a<=r*c){s=0===c&&a<r?0:c;break}var d=s-1;s>0&&(ew({type:"PointerMove",payload:100*s/eb,index:d}),u&&eg&&u(eS(eg),d,e))},ek=function(e){eg&&(ew({type:"MouseClick",payload:eg}),d&&d(eS(eg),ey,e))},eZ=l.useMemo(function(){if(M){if(P){var e=ef&&ef||eN;return eg&&eg>e?eg:e}return eg&&eg||ef&&ef||eN}return ef&&ef||eN},[M,P,eg,ef,eN]);l.useEffect(function(){ei.length>eb&&console.error("tooltipArray Array length is bigger then Icons Count length.")},[ei.length,eb]);var eV=l.useCallback(function(e){return eg&&e[ey]||ef&&e[ej]||p&&e[eC]},[eg,ey,ef,ej,p,eC]),eG=l.useMemo(function(){return eg&&eS(eg)||ef&&eS(ef)||p&&eS(eN)},[eg,eS,ef,p,eN]);return n.jsxs("span",o({className:"style-module_starRatingWrap__q-lJC",style:{direction:"".concat(N?"rtl":"ltr")}},{children:[n.jsxs("span",o({className:"".concat("style-module_simpleStarRating__nWUxf"," ").concat(G),style:o({cursor:w?"":"pointer"},Z),onPointerMove:w?void 0:e_,onPointerEnter:w?void 0:function(e){h&&h(e),c()&&e_(e)},onPointerLeave:w?void 0:function(e){c()&&ek(),ew({type:"PointerLeave"}),v&&v(e)},onClick:w?void 0:ek,"aria-hidden":"true"},{children:[n.jsx("span",o({className:"".concat("style-module_emptyIcons__Bg-FZ"," ").concat(q),style:o({color:void 0===U?"#cccccc":U},Y)},{children:a([],Array(f),!0).map(function(e,t){var i;return n.jsx(l.Fragment,{children:(null===(i=S[t])||void 0===i?void 0:i.icon)||J||n.jsx(s,{SVGclassName:es,SVGstyle:ed,SVGstorkeWidth:eh,SVGstrokeColor:em,size:y})},t)})})),n.jsx("span",o({className:"".concat("style-module_fillIcons__6---A"," ").concat($),style:o(((t={})[N?"right":"left"]=0,t.color=eV(F)||z,t.transition=L?"width .2s ease, color .2s ease":"",t.width="".concat(eZ,"%"),t),B),title:void 0===X||X?"".concat(eG," ").concat(ec," ").concat(f):void 0},{children:a([],Array(f),!0).map(function(e,t){var i;return n.jsx(l.Fragment,{children:(null===(i=S[t])||void 0===i?void 0:i.icon)||A||n.jsx(s,{SVGclassName:es,SVGstyle:ed,SVGstorkeWidth:eh,SVGstrokeColor:em,size:y})},t)})}))]})),void 0!==Q&&Q&&n.jsx("span",o({className:"".concat("style-module_tooltip__tKc3i"," ").concat(eo),style:o(((i={})[N?"marginRight":"marginLeft"]=20,i),en)},{children:(ei.length>0?eV(ei):eG)||(void 0===ee?"Your Rate":ee)}))]}))}}},function(e){e.O(0,[504,749,222,883,471,195,588,971,596,744],function(){return e(e.s=7724)}),_N_E=e.O()}]);