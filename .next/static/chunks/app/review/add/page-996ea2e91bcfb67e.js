(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{4974:function(e,t,s){Promise.resolve().then(s.bind(s,2976))},2976:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(7437),l=s(3075),i=s(6716),n=s(4883),r=s(9576),o=s(553),c=s(2265);s(6282);var u=s(2749),d=s(9222),h=s(4033);function m(){let[e,t]=(0,c.useState)(null),[s,m]=(0,c.useState)([]),[x,p]=(0,c.useState)([]),g=(0,c.useRef)(null),j=(0,h.useRouter)(),[v,f]=(0,c.useState)(),[b,y]=(0,c.useState)(),[w,Z]=(0,c.useState)([]),[C,N]=(0,c.useState)(0),[S,k]=(0,c.useState)(),[L,E]=(0,c.useState)(),[G,_]=(0,c.useState)(),{data:R,status:T}=(0,u.useSession)();console.log(R,T);let I=async t=>{t.preventDefault();let s={titleReview:v,titleItem:b,category:L,tags:w,img:e,desc:S,author:R.user.id,rating:C,reviewRating:0,likes:0};console.log(s);try{let e=await d.Z.post("/api/review/add",s);201===e.status&&j.push("/")}catch(e){_(e),console.log(e)}};return(0,c.useEffect)(()=>{let e=async()=>{try{let e=await d.Z.get("/api/review/category").then(e=>e.data);m(e)}catch(e){console.log(e)}};e();let t=async()=>{try{let e=await d.Z.get("/api/review/tags").then(e=>e.data);p(e)}catch(e){console.log(e)}};t()},[]),(0,a.jsx)("main",{children:(0,a.jsx)(n.Z,{onSubmit:I,style:{marginTop:"100px"},children:(0,a.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,a.jsxs)("div",{className:"me-5 mt-2",children:[(0,a.jsx)("div",{style:{width:"156px",height:"231px"},className:"mb-4 rounded overflow-hidden border",children:(0,a.jsx)("img",{alt:"",src:e,className:"object-fit-cover",style:{width:"158px",height:"234px",textIndent:"100vw",marginLeft:"-2px",marginTop:"-2px"}})}),(0,a.jsxs)(n.Z.Group,{controlId:"formFile",children:[(0,a.jsx)(n.Z.Control,{type:"file",hidden:!0,ref:g,onChange:e=>{let s=e.target.files;s.length>0?t(URL.createObjectURL(e.target.files[0])):t(null)}}),(0,a.jsx)(i.Z,{onClick:()=>{var e;null===(e=g.current)||void 0===e||e.click()},className:"w-100",variant:"primary",children:"Choose image"})]})]}),(0,a.jsxs)("div",{className:"w-50",children:[(0,a.jsxs)(n.Z.Group,{className:"mb-3",children:[(0,a.jsx)(n.Z.Label,{children:(0,a.jsx)("h2",{children:"Title of review"})}),(0,a.jsx)(n.Z.Control,{type:"text",name:"titleReview",placeholder:"Enter title of your review",onChange:e=>f(e.target.value)})]}),(0,a.jsxs)(n.Z.Group,{className:"mb-3",children:[(0,a.jsx)(n.Z.Label,{children:(0,a.jsx)("h4",{children:"Title of movie, book, game, etc"})}),(0,a.jsx)(n.Z.Control,{type:"text",name:"titleItem",placeholder:"Enter title of movie, book, game, etc...",onChange:e=>y(e.target.value)})]}),(0,a.jsxs)(n.Z.Group,{className:"mb-3",children:[(0,a.jsx)(n.Z.Label,{children:"Choice category"}),(0,a.jsx)(l.Z,{children:(0,a.jsxs)(n.Z.Select,{name:"category","aria-label":"category",onChange:e=>E(e.target.value),children:[(0,a.jsx)("option",{children:"Choose category"}),s.map(e=>(0,a.jsx)("option",{value:e._id,children:e.name}))]})})]}),(0,a.jsxs)(n.Z.Group,{className:"mb-3",children:[(0,a.jsx)(n.Z.Label,{children:"Enter tags for your review"}),(0,a.jsx)(o.pY,{id:"basic-typeahead-multiple",labelKey:"name",multiple:!0,onChange:Z,options:x,placeholder:"Choose several tags...",selected:w,className:"text-body"})]}),(0,a.jsxs)(n.Z.Group,{className:"mb-3",controlId:"desc",children:[(0,a.jsx)(n.Z.Label,{children:"Your review"}),(0,a.jsx)(n.Z.Control,{name:"desc",as:"textarea",rows:4,style:{resize:"none"},placeholder:"Text of review (with markdown formation) Lorem ipsum, dolor sit amet consectetur adipisicing elit. Sunt, expedita incidunt accusantium dolores ipsam praesentium et! Nesciunt iusto at, deleniti voluptas nihil vitae non necessitatibus autem a, odit minus consequuntur!",onChange:e=>k(e.target.value)})]}),(0,a.jsxs)(n.Z.Group,{className:"mb-4 d-flex flex-column",children:[(0,a.jsx)(n.Z.Label,{children:"Your grade from 0 - 10"}),(0,a.jsx)(r.i,{size:25,iconsCount:10,onClick:e=>{N(e)}})]}),(0,a.jsx)(i.Z,{type:"submit",variant:"primary",className:"shadow-sm",style:{width:"180px"},children:"Submit"})]})]})})})}}},function(e){e.O(0,[222,153,86,49,971,596,744],function(){return e(e.s=4974)}),_N_E=e.O()}]);