(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{4974:function(e,t,n){Promise.resolve().then(n.bind(n,2976))},2976:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var i=n(7437);n(6282);var o=n(3075),l=n(6716),a=n(4883),s=n(3538),r=n(9576),c=n(2265),d=n(2749),u=n(9222),h=n(4033),m=n(3580),p=n(1512);function v(){let e=(0,h.useRouter)(),t=(0,c.useRef)(null),[n,v]=(0,c.useState)([]),[x,f]=(0,c.useState)(!1),[y,g]=(0,c.useState)(null),[j,b]=(0,c.useState)(),[w,C]=(0,c.useState)(),[N,k]=(0,c.useState)([]),[S,_]=(0,c.useState)([]),[Z,V]=(0,c.useState)(),[G,I]=(0,c.useState)(),[L,M]=(0,c.useState)(0),[R,E]=(0,c.useState)(),[P,W]=(0,c.useState)(),[A,T]=(0,c.useState)(null),[z,F]=(0,c.useState)(),{data:O,status:q}=(0,d.useSession)(),B={titleReview:Z,titleItem:G,category:P,tags:N.map(e=>e.name),desc:R,likes:[],author:null==O?void 0:O.user.id,rating:L,img:j},$=new FormData;$.append("titleReview",Z),$.append("titleItem",G),$.append("category",P),$.append("desc",R),$.append("author",null==O?void 0:O.user.id),$.append("rating",L),$.append("likes",0),$.append("file",A),N.forEach(e=>{$.append("tags",e.name)});let D=async t=>{if(t.preventDefault(),w){f(!0);try{let t=await u.Z.post("http://localhost:3000/api/review/add",$,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});400===t.status&&F(t.message),await u.Z.post("/api/tags",N),f(!1),201===t.status&&e.push("/")}catch(e){F(e),console.log(e),f(!1)}}};return(0,c.useEffect)(()=>{let e=async()=>{try{let e=await u.Z.get("/api/category").then(e=>e.data);v(e)}catch(e){F(e),console.log(e)}};e();let t=async()=>{try{let e=await u.Z.get("/api/tags").then(e=>e.data);_(e)}catch(e){F(e),console.log(e)}};t()},[]),(0,i.jsxs)("main",{children:[y&&(0,i.jsxs)("div",{className:"container position-absolute top-0 start-0 end-0 bottom-0 z-2 bg-body pb-5",children:[(0,i.jsx)(m.Z,{data:B}),(0,i.jsx)(l.Z,{variant:"secondary",className:"mb-5",onClick:e=>g(!1),children:"Close preview"})]}),(0,i.jsxs)(a.Z,{onSubmit:D,children:[x&&(0,i.jsx)(p.Z,{}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col col-auto mt-2 mb-4",children:[(0,i.jsx)("div",{style:{maxWidth:"150px",minHeight:"200px"},className:"mb-4 p-2 rounded overflow-hidden border",children:(0,i.jsx)("img",{alt:"",src:j,className:"object-fit-cover w-100 h-auto"})}),(0,i.jsx)("input",{ref:t,type:"file",accept:"image/*",name:"image",id:"selectFile",hidden:!0,onChange:e=>{T(e.target.files[0]),b(URL.createObjectURL(e.target.files[0]))}}),(0,i.jsx)(l.Z,{onClick:()=>{var e;null===(e=t.current)||void 0===e||e.click()},className:"w-100",variant:"primary",children:"Choose image"})]}),(0,i.jsxs)("div",{className:"col",style:{minWidth:"80%"},children:[(0,i.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,i.jsx)(a.Z.Label,{children:(0,i.jsx)("h2",{children:"Title of review"})}),(0,i.jsx)(a.Z.Control,{required:!0,type:"text",name:"titleReview",placeholder:"Enter title of your review",onChange:e=>V(e.target.value)})]}),(0,i.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,i.jsx)(a.Z.Label,{children:(0,i.jsx)("h4",{children:"Title of movie, book, game, etc"})}),(0,i.jsx)(a.Z.Control,{required:!0,type:"text",name:"titleItem",placeholder:"Enter title of movie, book, game, etc...",onChange:e=>I(e.target.value)})]}),(0,i.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,i.jsx)(a.Z.Label,{children:"Choice category"}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)(a.Z.Select,{required:!0,name:"category","aria-label":"category",onChange:e=>W(e.target.value),children:[(0,i.jsx)("option",{selected:!0,disabled:!0,children:"Choose category"}),n.map(e=>(0,i.jsx)("option",{value:e._id,children:e.name},e.key))]})})]}),(0,i.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,i.jsx)(a.Z.Label,{children:"Enter tags for your review"}),(0,i.jsx)(s.pY,{id:"basic-typeahead-multiple",labelKey:"name",allowNew:!0,multiple:!0,onChange:k,options:S,placeholder:"Choose several tags...",selected:N,className:"text-body"})]}),(0,i.jsxs)(a.Z.Group,{className:"mb-3",controlId:"desc",children:[(0,i.jsx)(a.Z.Label,{children:"Your review"}),(0,i.jsx)(a.Z.Control,{name:"desc",as:"textarea",rows:4,required:!0,maxLength:4096,placeholder:"Text of review",onChange:e=>E(e.target.value)})]}),(0,i.jsxs)(a.Z.Group,{className:"mb-4 d-flex flex-column",children:[(0,i.jsx)(a.Z.Label,{children:"Your grade from 1 - 10"}),(0,i.jsx)(r.i,{size:25,iconsCount:10,onClick:e=>{M(e)}})]}),z&&(0,i.jsx)("p",{className:"text-danger",children:z.message}),!1==w&&(0,i.jsx)("p",{className:"text-danger",children:"Fill all fields"}),(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)(l.Z,{variant:"secondary",className:"me-3 mb-3",onClick:()=>{g(!0),window.scrollTo({top:0,behavior:"smooth"})},children:"Preview"}),(0,i.jsx)(l.Z,{type:"submit",variant:"primary",className:"shadow-sm mb-3",style:{width:"180px",minWidth:"120px"},onClick:()=>{C(!1),""!=n&&N.length>0&&L>0&&null!=A&&""!=Z&&""!=G&&""!=R&&C(!0)},children:"Submit"})]})]})]})]})]})}},1512:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(7437),o=n(9639);function l(){return(0,i.jsx)("div",{className:"w-100 h-100 position-absolute z-2 d-flex justify-content-center align-items-center",children:(0,i.jsxs)("div",{className:"py-4 px-5 bg-primary rounded d-flex justify-content-center align-items-center",children:[(0,i.jsx)(o.Z,{animation:"border",variant:"light"}),"\xa0",(0,i.jsx)("p",{className:"m-0 text-light",children:"Loading... Please wait"})]})})}},3580:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(7437);n(2749);var o=n(9588);function l(e){var t,n,l;let{data:a}=e;return(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)("div",{style:{maxWidth:"150px"},className:"mt-2 me-3",children:(0,i.jsx)("img",{src:null==a?void 0:a.img,alt:"",className:"object-fit-cover w-100 h-auto",style:{minWidth:"70px"}})}),(0,i.jsxs)("div",{className:"w-75",style:{minWidth:"180px"},children:[(0,i.jsx)("h2",{children:null==a?void 0:a.titleReview}),(0,i.jsx)("h4",{children:null==a?void 0:a.titleItem}),(0,i.jsx)("p",{children:null==a?void 0:null===(t=a.category)||void 0===t?void 0:t.name}),(0,i.jsx)("p",{children:null==a?void 0:a.tags.map(e=>(0,i.jsx)("span",{className:"rbt-token p-1",children:e+" "}))}),(0,i.jsx)(o.D,{children:null==a?void 0:a.desc}),(0,i.jsxs)("p",{children:["Rate: ",null==a?void 0:a.rating]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsxs)("p",{children:["Review likes: ",null==a?void 0:null===(n=a.likes)||void 0===n?void 0:n.length]}),(null==a?void 0:null===(l=a.author)||void 0===l?void 0:l.name)&&(0,i.jsxs)("p",{children:["Author: \xa0",null==a?void 0:a.author.name]})]})]})]}),(0,i.jsx)("hr",{className:"w-100"})]})}},4033:function(e,t,n){e.exports=n(8165)},9639:function(e,t,n){"use strict";var i=n(4440),o=n.n(i),l=n(2265),a=n(7127),s=n(7437);let r=l.forwardRef(({bsPrefix:e,variant:t,animation:n="border",size:i,as:l="div",className:r,...c},d)=>{e=(0,a.vE)(e,"spinner");let u=`${e}-${n}`;return(0,s.jsx)(l,{ref:d,...c,className:o()(r,u,i&&`${u}-${i}`,t&&`text-${t}`)})});r.displayName="Spinner",t.Z=r},9576:function(e,t,n){"use strict";var i=n(7437),o=n(2265),l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t,n){if(n||2==arguments.length)for(var i,o=0,l=t.length;o<l;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}function s(e){var t=e.size,n=void 0===t?25:t,o=e.SVGstrokeColor,a=e.SVGstorkeWidth,s=e.SVGclassName,r=e.SVGstyle;return i.jsx("svg",l({className:void 0===s?"star-svg":s,style:r,stroke:void 0===o?"currentColor":o,fill:"currentColor",strokeWidth:void 0===a?0:a,viewBox:"0 0 24 24",width:n,height:n,xmlns:"http://www.w3.org/2000/svg"},{children:i.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}))}function r(e,t){switch(t.type){case"PointerMove":return l(l({},e),{hoverValue:t.payload,hoverIndex:t.index});case"PointerLeave":return l(l({},e),{ratingValue:e.ratingValue,hoverIndex:0,hoverValue:null});case"MouseClick":return l(l({},e),{valueIndex:e.hoverIndex,ratingValue:t.payload});default:return e}}function c(){return"undefined"!=typeof window&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||"undefined"!=typeof navigator&&navigator.maxTouchPoints>0}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".style-module_starRatingWrap__q-lJC{display:inline-block;touch-action:none}.style-module_simpleStarRating__nWUxf{display:inline-block;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.style-module_fillIcons__6---A{display:inline-block;overflow:hidden;position:absolute;top:0;white-space:nowrap}.style-module_emptyIcons__Bg-FZ{display:inline-block}.style-module_tooltip__tKc3i{background-color:#333;border-radius:5px;color:#fff;display:inline-block;padding:5px 15px;vertical-align:middle}"),t.i=function(e){var t,n,d=e.onClick,u=e.onPointerMove,h=e.onPointerEnter,m=e.onPointerLeave,p=e.initialValue,v=void 0===p?0:p,x=e.iconsCount,f=void 0===x?5:x,y=e.size,g=void 0===y?40:y,j=e.readonly,b=void 0!==j&&j,w=e.rtl,C=void 0!==w&&w,N=e.customIcons,k=void 0===N?[]:N,S=e.allowFraction,_=void 0!==S&&S,Z=e.style,V=e.className,G=void 0===V?"react-simple-star-rating":V,I=e.transition,L=void 0!==I&&I,M=e.allowHover,R=void 0===M||M,E=e.disableFillHover,P=void 0!==E&&E,W=e.fillIcon,A=void 0===W?null:W,T=e.fillColor,z=void 0===T?"#ffbc0b":T,F=e.fillColorArray,O=void 0===F?[]:F,q=e.fillStyle,B=e.fillClassName,$=void 0===B?"filled-icons":B,D=e.emptyIcon,U=void 0===D?null:D,Y=e.emptyColor,H=e.emptyStyle,K=e.emptyClassName,J=void 0===K?"empty-icons":K,X=e.allowTitleTag,Q=e.showTooltip,ee=e.tooltipDefaultText,et=e.tooltipArray,en=void 0===et?[]:et,ei=e.tooltipStyle,eo=e.tooltipClassName,el=void 0===eo?"react-simple-star-rating-tooltip":eo,ea=e.SVGclassName,es=void 0===ea?"star-svg":ea,er=e.titleSeparator,ec=void 0===er?"out of":er,ed=e.SVGstyle,eu=e.SVGstorkeWidth,eh=void 0===eu?0:eu,em=e.SVGstrokeColor,ep=void 0===em?"currentColor":em,ev=o.useReducer(r,{hoverIndex:0,valueIndex:0,ratingValue:v,hoverValue:null}),ex=ev[0],ef=ex.ratingValue,ey=ex.hoverValue,eg=ex.hoverIndex,ej=ex.valueIndex,eb=ev[1];o.useEffect(function(){v&&eb({type:"MouseClick",payload:0})},[v]);var ew=o.useMemo(function(){return _?2*f:f},[_,f]),eC=o.useMemo(function(){return v>ew?0:_||Math.floor(v)===v?Math.round(v/f*100):2*Math.ceil(v)*10},[_,v,f,ew]),eN=o.useMemo(function(){return(_?2*v-1:v-1)||0},[_,v]),ek=o.useCallback(function(e){return f%2!=0?e/2/10:e*f/100},[f]),eS=function(e){for(var t=e.clientX,n=e.currentTarget.children[0].getBoundingClientRect(),i=n.left,o=n.right,l=n.width,a=C?o-t:t-i,s=ew,r=Math.round(l/ew),c=0;c<=ew;c+=1)if(a<=r*c){s=0===c&&a<r?0:c;break}var d=s-1;s>0&&(eb({type:"PointerMove",payload:100*s/ew,index:d}),u&&ey&&u(ek(ey),d,e))},e_=function(e){ey&&(eb({type:"MouseClick",payload:ey}),d&&d(ek(ey),eg,e))},eZ=o.useMemo(function(){if(R){if(P){var e=ef&&ef||eC;return ey&&ey>e?ey:e}return ey&&ey||ef&&ef||eC}return ef&&ef||eC},[R,P,ey,ef,eC]);o.useEffect(function(){en.length>ew&&console.error("tooltipArray Array length is bigger then Icons Count length.")},[en.length,ew]);var eV=o.useCallback(function(e){return ey&&e[eg]||ef&&e[ej]||v&&e[eN]},[ey,eg,ef,ej,v,eN]),eG=o.useMemo(function(){return ey&&ek(ey)||ef&&ek(ef)||v&&ek(eC)},[ey,ek,ef,v,eC]);return i.jsxs("span",l({className:"style-module_starRatingWrap__q-lJC",style:{direction:"".concat(C?"rtl":"ltr")}},{children:[i.jsxs("span",l({className:"".concat("style-module_simpleStarRating__nWUxf"," ").concat(G),style:l({cursor:b?"":"pointer"},Z),onPointerMove:b?void 0:eS,onPointerEnter:b?void 0:function(e){h&&h(e),c()&&eS(e)},onPointerLeave:b?void 0:function(e){c()&&e_(),eb({type:"PointerLeave"}),m&&m(e)},onClick:b?void 0:e_,"aria-hidden":"true"},{children:[i.jsx("span",l({className:"".concat("style-module_emptyIcons__Bg-FZ"," ").concat(J),style:l({color:void 0===Y?"#cccccc":Y},H)},{children:a([],Array(f),!0).map(function(e,t){var n;return i.jsx(o.Fragment,{children:(null===(n=k[t])||void 0===n?void 0:n.icon)||U||i.jsx(s,{SVGclassName:es,SVGstyle:ed,SVGstorkeWidth:eh,SVGstrokeColor:ep,size:g})},t)})})),i.jsx("span",l({className:"".concat("style-module_fillIcons__6---A"," ").concat($),style:l(((t={})[C?"right":"left"]=0,t.color=eV(O)||z,t.transition=L?"width .2s ease, color .2s ease":"",t.width="".concat(eZ,"%"),t),q),title:void 0===X||X?"".concat(eG," ").concat(ec," ").concat(f):void 0},{children:a([],Array(f),!0).map(function(e,t){var n;return i.jsx(o.Fragment,{children:(null===(n=k[t])||void 0===n?void 0:n.icon)||A||i.jsx(s,{SVGclassName:es,SVGstyle:ed,SVGstorkeWidth:eh,SVGstrokeColor:ep,size:g})},t)})}))]})),void 0!==Q&&Q&&i.jsx("span",l({className:"".concat("style-module_tooltip__tKc3i"," ").concat(el),style:l(((n={})[C?"marginRight":"marginLeft"]=20,n),ei)},{children:(en.length>0?eV(en):eG)||(void 0===ee?"Your Rate":ee)}))]}))}}},function(e){e.O(0,[302,222,883,471,753,588,971,596,744],function(){return e(e.s=4974)}),_N_E=e.O()}]);