(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{4974:function(e,t,i){Promise.resolve().then(i.bind(i,2976))},2976:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i(7437);i(6282);var o=i(3075),l=i(6716),a=i(4883),s=i(3538),r=i(9576),c=i(2265),d=i(2749),u=i(9222),h=i(4033),v=i(2115),m=i(1512);function p(){let e=(0,h.useRouter)(),t=(0,c.useRef)(null),[i,p]=(0,c.useState)([]),[x,f]=(0,c.useState)(!1),[g,y]=(0,c.useState)(null),[j,b]=(0,c.useState)(),[w,N]=(0,c.useState)(),[C,S]=(0,c.useState)([]),[k,_]=(0,c.useState)([]),[Z,V]=(0,c.useState)(),[G,I]=(0,c.useState)(),[L,M]=(0,c.useState)(0),[R,A]=(0,c.useState)(),[E,T]=(0,c.useState)(),[W,P]=(0,c.useState)(null),[z,F]=(0,c.useState)(),{data:O,status:D}=(0,d.useSession)(),q={titleReview:Z,titleItem:G,category:E,tags:C.map(e=>JSON.stringify(e)),desc:R,likes:[],author:null==O?void 0:O.user.id,rating:L,img:j},B=new FormData;B.append("titleReview",Z),B.append("titleItem",G),B.append("category",E),B.append("desc",R),B.append("author",null==O?void 0:O.user.id),B.append("rating",L),B.append("likes",0),B.append("file",W),C.forEach(e=>{B.append("tags",e.name)});let $=async t=>{if(t.preventDefault(),w){f(!0);try{let t=await u.Z.post("http://localhost:3000/api/review/add",B,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});400===t.status&&F(t.message),await u.Z.post("/api/tags",C),f(!1),201===t.status&&e.push("/")}catch(e){F(e),console.log(e),f(!1)}}};return(0,c.useEffect)(()=>{let e=async()=>{try{let e=await u.Z.get("/api/category").then(e=>e.data);p(e)}catch(e){F(e),console.log(e)}};e();let t=async()=>{try{let e=await u.Z.get("/api/tags").then(e=>e.data);_(e)}catch(e){F(e),console.log(e)}};t()},[]),(0,n.jsxs)("main",{children:[g&&(0,n.jsxs)("div",{className:"container position-absolute top-0 start-0 end-0 bottom-0 z-2 bg-body pb-5",children:[(0,n.jsx)(v.Z,{reviewData:q}),(0,n.jsx)(l.Z,{variant:"secondary",className:"mb-5",onClick:e=>y(!1),children:"Close preview"})]}),(0,n.jsxs)(a.Z,{onSubmit:$,children:[x&&(0,n.jsx)(m.Z,{}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col col-auto mt-2 mb-4",children:[(0,n.jsx)("div",{style:{maxWidth:"150px",minHeight:"200px"},className:"mb-4 p-2 rounded overflow-hidden border",children:(0,n.jsx)("img",{alt:"",src:j,className:"object-fit-cover w-100 h-auto"})}),(0,n.jsx)("input",{ref:t,type:"file",accept:"image/*",name:"image",id:"selectFile",hidden:!0,onChange:e=>{P(e.target.files[0]),b(URL.createObjectURL(e.target.files[0]))}}),(0,n.jsx)(l.Z,{onClick:()=>{var e;null===(e=t.current)||void 0===e||e.click()},className:"w-100",variant:"primary",children:"Choose image"})]}),(0,n.jsxs)("div",{className:"col",style:{minWidth:"80%"},children:[(0,n.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,n.jsx)(a.Z.Label,{children:(0,n.jsx)("h2",{children:"Title of review"})}),(0,n.jsx)(a.Z.Control,{required:!0,type:"text",name:"titleReview",placeholder:"Enter title of your review",onChange:e=>V(e.target.value)})]}),(0,n.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,n.jsx)(a.Z.Label,{children:(0,n.jsx)("h4",{children:"Title of movie, book, game, etc"})}),(0,n.jsx)(a.Z.Control,{required:!0,type:"text",name:"titleItem",placeholder:"Enter title of movie, book, game, etc...",onChange:e=>I(e.target.value)})]}),(0,n.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,n.jsx)(a.Z.Label,{children:"Choice category"}),(0,n.jsx)(o.Z,{children:(0,n.jsxs)(a.Z.Select,{required:!0,name:"category","aria-label":"category",onChange:e=>T(e.target.value),children:[(0,n.jsx)("option",{selected:!0,disabled:!0,children:"Choose category"}),i.map(e=>(0,n.jsx)("option",{value:e._id,children:e.name},e.key))]})})]}),(0,n.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,n.jsx)(a.Z.Label,{children:"Enter tags for your review"}),(0,n.jsx)(s.pY,{id:"basic-typeahead-multiple",labelKey:"name",allowNew:!0,multiple:!0,onChange:S,options:k,placeholder:"Choose several tags...",selected:C,className:"text-body"})]}),(0,n.jsxs)(a.Z.Group,{className:"mb-3",controlId:"desc",children:[(0,n.jsx)(a.Z.Label,{children:"Your review"}),(0,n.jsx)(a.Z.Control,{name:"desc",as:"textarea",rows:4,required:!0,maxLength:4096,placeholder:"Text of review",onChange:e=>A(e.target.value)})]}),(0,n.jsxs)(a.Z.Group,{className:"mb-4 d-flex flex-column",children:[(0,n.jsx)(a.Z.Label,{children:"Your grade from 1 - 10"}),(0,n.jsx)(r.i,{size:25,iconsCount:10,onClick:e=>{M(e)}})]}),z&&(0,n.jsx)("p",{className:"text-danger",children:z.message}),!1==w&&(0,n.jsx)("p",{className:"text-danger",children:"Fill all fields"}),(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsx)(l.Z,{variant:"secondary",className:"me-3 mb-3",onClick:()=>{y(!0),window.scrollTo({top:0,behavior:"smooth"})},children:"Preview"}),(0,n.jsx)(l.Z,{type:"submit",variant:"primary",className:"shadow-sm mb-3",style:{width:"180px",minWidth:"120px"},onClick:()=>{N(!1),console.log("NOT VALID"),""!=i&&C.length>0&&L>0&&null!=W&&""!=Z&&""!=G&&""!=R&&(N(!0),console.log("VALID"))},children:"Submit"})]})]})]})]})]})}},1512:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});var n=i(7437),o=i(9639);function l(){return(0,n.jsx)("div",{className:"w-100 h-100 position-absolute z-2 d-flex justify-content-center align-items-center",children:(0,n.jsxs)("div",{className:"py-4 px-5 bg-primary rounded d-flex justify-content-center align-items-center",children:[(0,n.jsx)(o.Z,{animation:"border",variant:"light"}),"\xa0",(0,n.jsx)("p",{className:"m-0 text-light",children:"Loading... Please wait"})]})})}},2115:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(7437),o=i(2749),l=i(1396),a=i.n(l),s=i(8829),r=i.n(s),c=i(9588);function d(e){var t,i,l,s,d,u,h;let{main:v,data:m,highlight:p}=e,{data:x,status:f}=(0,o.useSession)();return(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsxs)("div",{className:"d-flex",children:[(0,n.jsx)(a(),{href:"/review/".concat(null==m?void 0:m._id),className:"text-decoration-none text-body mt-2 me-3",children:(0,n.jsx)("div",{style:{maxWidth:"150px"},children:(0,n.jsx)("img",{src:null==m?void 0:m.img,alt:"",className:"object-fit-cover w-100 h-auto",style:{minWidth:"70px"}})})}),(0,n.jsxs)("div",{className:"w-75",style:{minWidth:"180px"},children:[(0,n.jsxs)(a(),{href:"/review/".concat(m._id),className:"text-decoration-none text-body",children:[(0,n.jsx)("h2",{children:null==m?void 0:m.titleReview}),(0,n.jsx)("h4",{children:null==m?void 0:m.titleItem}),(0,n.jsx)("p",{children:null==m?void 0:null===(t=m.category)||void 0===t?void 0:t.name}),(0,n.jsx)("p",{children:null==m?void 0:m.tags.map(e=>(0,n.jsx)("span",{className:"rbt-token p-1",children:e+" "}))}),v?(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(r(),{highlightClassName:"bg-warning",searchWords:[p],autoEscape:!0,textToHighlight:(null==m?void 0:null===(i=m.desc)||void 0===i?void 0:i.substring(0,200))+"..."})}):(0,n.jsx)(c.D,{children:null==m?void 0:m.desc}),(0,n.jsxs)("p",{children:["Rate: ",null==m?void 0:m.rating]})]}),(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsxs)("p",{children:["Review likes: ",null==m?void 0:null===(l=m.likes)||void 0===l?void 0:l.length]}),(null==m?void 0:null===(s=m.author)||void 0===s?void 0:s.name)&&(0,n.jsxs)("p",{children:["Author: \xa0",(0,n.jsx)(a(),{href:(null==m?void 0:null===(d=m.author)||void 0===d?void 0:d._id)===(null==x?void 0:null===(u=x.user)||void 0===u?void 0:u.id)?"/profile":"/profile/".concat(null==m?void 0:null===(h=m.author)||void 0===h?void 0:h._id),className:"text-primary",children:null==m?void 0:m.author.name})]})]})]})]}),(0,n.jsx)("hr",{className:"w-100"})]})}},4033:function(e,t,i){e.exports=i(8165)},9639:function(e,t,i){"use strict";var n=i(4440),o=i.n(n),l=i(2265),a=i(7127),s=i(7437);let r=l.forwardRef(({bsPrefix:e,variant:t,animation:i="border",size:n,as:l="div",className:r,...c},d)=>{e=(0,a.vE)(e,"spinner");let u=`${e}-${i}`;return(0,s.jsx)(l,{ref:d,...c,className:o()(r,u,n&&`${u}-${n}`,t&&`text-${t}`)})});r.displayName="Spinner",t.Z=r},9576:function(e,t,i){"use strict";var n=i(7437),o=i(2265),l=function(){return(l=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t,i){if(i||2==arguments.length)for(var n,o=0,l=t.length;o<l;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function s(e){var t=e.size,i=void 0===t?25:t,o=e.SVGstrokeColor,a=e.SVGstorkeWidth,s=e.SVGclassName,r=e.SVGstyle;return n.jsx("svg",l({className:void 0===s?"star-svg":s,style:r,stroke:void 0===o?"currentColor":o,fill:"currentColor",strokeWidth:void 0===a?0:a,viewBox:"0 0 24 24",width:i,height:i,xmlns:"http://www.w3.org/2000/svg"},{children:n.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}))}function r(e,t){switch(t.type){case"PointerMove":return l(l({},e),{hoverValue:t.payload,hoverIndex:t.index});case"PointerLeave":return l(l({},e),{ratingValue:e.ratingValue,hoverIndex:0,hoverValue:null});case"MouseClick":return l(l({},e),{valueIndex:e.hoverIndex,ratingValue:t.payload});default:return e}}function c(){return"undefined"!=typeof window&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||"undefined"!=typeof navigator&&navigator.maxTouchPoints>0}!function(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".style-module_starRatingWrap__q-lJC{display:inline-block;touch-action:none}.style-module_simpleStarRating__nWUxf{display:inline-block;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.style-module_fillIcons__6---A{display:inline-block;overflow:hidden;position:absolute;top:0;white-space:nowrap}.style-module_emptyIcons__Bg-FZ{display:inline-block}.style-module_tooltip__tKc3i{background-color:#333;border-radius:5px;color:#fff;display:inline-block;padding:5px 15px;vertical-align:middle}"),t.i=function(e){var t,i,d=e.onClick,u=e.onPointerMove,h=e.onPointerEnter,v=e.onPointerLeave,m=e.initialValue,p=void 0===m?0:m,x=e.iconsCount,f=void 0===x?5:x,g=e.size,y=void 0===g?40:g,j=e.readonly,b=void 0!==j&&j,w=e.rtl,N=void 0!==w&&w,C=e.customIcons,S=void 0===C?[]:C,k=e.allowFraction,_=void 0!==k&&k,Z=e.style,V=e.className,G=void 0===V?"react-simple-star-rating":V,I=e.transition,L=void 0!==I&&I,M=e.allowHover,R=void 0===M||M,A=e.disableFillHover,E=void 0!==A&&A,T=e.fillIcon,W=void 0===T?null:T,P=e.fillColor,z=void 0===P?"#ffbc0b":P,F=e.fillColorArray,O=void 0===F?[]:F,D=e.fillStyle,q=e.fillClassName,B=void 0===q?"filled-icons":q,$=e.emptyIcon,H=void 0===$?null:$,U=e.emptyColor,Y=e.emptyStyle,J=e.emptyClassName,K=void 0===J?"empty-icons":J,X=e.allowTitleTag,Q=e.showTooltip,ee=e.tooltipDefaultText,et=e.tooltipArray,ei=void 0===et?[]:et,en=e.tooltipStyle,eo=e.tooltipClassName,el=void 0===eo?"react-simple-star-rating-tooltip":eo,ea=e.SVGclassName,es=void 0===ea?"star-svg":ea,er=e.titleSeparator,ec=void 0===er?"out of":er,ed=e.SVGstyle,eu=e.SVGstorkeWidth,eh=void 0===eu?0:eu,ev=e.SVGstrokeColor,em=void 0===ev?"currentColor":ev,ep=o.useReducer(r,{hoverIndex:0,valueIndex:0,ratingValue:p,hoverValue:null}),ex=ep[0],ef=ex.ratingValue,eg=ex.hoverValue,ey=ex.hoverIndex,ej=ex.valueIndex,eb=ep[1];o.useEffect(function(){p&&eb({type:"MouseClick",payload:0})},[p]);var ew=o.useMemo(function(){return _?2*f:f},[_,f]),eN=o.useMemo(function(){return p>ew?0:_||Math.floor(p)===p?Math.round(p/f*100):2*Math.ceil(p)*10},[_,p,f,ew]),eC=o.useMemo(function(){return(_?2*p-1:p-1)||0},[_,p]),eS=o.useCallback(function(e){return f%2!=0?e/2/10:e*f/100},[f]),ek=function(e){for(var t=e.clientX,i=e.currentTarget.children[0].getBoundingClientRect(),n=i.left,o=i.right,l=i.width,a=N?o-t:t-n,s=ew,r=Math.round(l/ew),c=0;c<=ew;c+=1)if(a<=r*c){s=0===c&&a<r?0:c;break}var d=s-1;s>0&&(eb({type:"PointerMove",payload:100*s/ew,index:d}),u&&eg&&u(eS(eg),d,e))},e_=function(e){eg&&(eb({type:"MouseClick",payload:eg}),d&&d(eS(eg),ey,e))},eZ=o.useMemo(function(){if(R){if(E){var e=ef&&ef||eN;return eg&&eg>e?eg:e}return eg&&eg||ef&&ef||eN}return ef&&ef||eN},[R,E,eg,ef,eN]);o.useEffect(function(){ei.length>ew&&console.error("tooltipArray Array length is bigger then Icons Count length.")},[ei.length,ew]);var eV=o.useCallback(function(e){return eg&&e[ey]||ef&&e[ej]||p&&e[eC]},[eg,ey,ef,ej,p,eC]),eG=o.useMemo(function(){return eg&&eS(eg)||ef&&eS(ef)||p&&eS(eN)},[eg,eS,ef,p,eN]);return n.jsxs("span",l({className:"style-module_starRatingWrap__q-lJC",style:{direction:"".concat(N?"rtl":"ltr")}},{children:[n.jsxs("span",l({className:"".concat("style-module_simpleStarRating__nWUxf"," ").concat(G),style:l({cursor:b?"":"pointer"},Z),onPointerMove:b?void 0:ek,onPointerEnter:b?void 0:function(e){h&&h(e),c()&&ek(e)},onPointerLeave:b?void 0:function(e){c()&&e_(),eb({type:"PointerLeave"}),v&&v(e)},onClick:b?void 0:e_,"aria-hidden":"true"},{children:[n.jsx("span",l({className:"".concat("style-module_emptyIcons__Bg-FZ"," ").concat(K),style:l({color:void 0===U?"#cccccc":U},Y)},{children:a([],Array(f),!0).map(function(e,t){var i;return n.jsx(o.Fragment,{children:(null===(i=S[t])||void 0===i?void 0:i.icon)||H||n.jsx(s,{SVGclassName:es,SVGstyle:ed,SVGstorkeWidth:eh,SVGstrokeColor:em,size:y})},t)})})),n.jsx("span",l({className:"".concat("style-module_fillIcons__6---A"," ").concat(B),style:l(((t={})[N?"right":"left"]=0,t.color=eV(O)||z,t.transition=L?"width .2s ease, color .2s ease":"",t.width="".concat(eZ,"%"),t),D),title:void 0===X||X?"".concat(eG," ").concat(ec," ").concat(f):void 0},{children:a([],Array(f),!0).map(function(e,t){var i;return n.jsx(o.Fragment,{children:(null===(i=S[t])||void 0===i?void 0:i.icon)||W||n.jsx(s,{SVGclassName:es,SVGstyle:ed,SVGstorkeWidth:eh,SVGstrokeColor:em,size:y})},t)})}))]})),void 0!==Q&&Q&&n.jsx("span",l({className:"".concat("style-module_tooltip__tKc3i"," ").concat(el),style:l(((i={})[N?"marginRight":"marginLeft"]=20,i),en)},{children:(ei.length>0?eV(ei):eG)||(void 0===ee?"Your Rate":ee)}))]}))}}},function(e){e.O(0,[504,749,222,883,471,195,588,971,596,744],function(){return e(e.s=4974)}),_N_E=e.O()}]);