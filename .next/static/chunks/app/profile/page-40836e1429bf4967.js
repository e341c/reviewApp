(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{6245:function(e,i,s){Promise.resolve().then(s.bind(s,3952))},3952:function(e,i,s){"use strict";s.r(i),s.d(i,{default:function(){return v}});var n=s(7437),l=s(1279),d=s(2759),r=s(1396),t=s.n(r),c=s(2749),a=s(2333),o=s(9222),u=s(6716),h=s(6526),x=s(4033);function v(e){var i,s;let{params:r}=e,v=(0,x.useRouter)(),{data:j,status:m}=(0,c.useSession)();j||v.push("/");let p=null==j?void 0:j.user.id;console.log(j);let{data:g,error:f,isLoading:w}=(0,a.ZP)("/api/profile/".concat(p),async()=>{let e=await o.Z.get("/api/profile/".concat(p));return e.data});return(console.log(g),w)?(0,n.jsx)("p",{children:"Loading..."}):f?(console.log(f),(0,n.jsx)("p",{children:f.message})):(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"d-flex",style:{marginTop:"100px"},children:[(0,n.jsxs)("div",{className:"me-5 w-75",children:[(0,n.jsxs)("div",{className:"mb-4 d-flex justify-content-between",children:[(0,n.jsx)("h1",{children:"Your reviews"}),p===(null==j?void 0:j.user.id)&&(0,n.jsx)("div",{children:(0,n.jsxs)(t(),{href:"/review/add",className:"btn btn-primary",children:[(0,n.jsx)(l.G,{icon:d.r8p,style:{width:"14px",height:"16px"}}),"\xa0 Add new"]})})]}),0===g[1].length&&(0,n.jsx)("p",{children:"There are no reviews here yet"}),null===(i=g[1])||void 0===i?void 0:i.map(e=>(0,n.jsx)(h.Z,{reviewData:e,id:p}))]}),(0,n.jsx)("div",{className:"w-25",children:(0,n.jsxs)("div",{className:"p-3 shadow rounded",children:[(0,n.jsx)("img",{src:"/images/avatar.jpeg",alt:"",className:"img-fluid rounded mb-3"}),(0,n.jsx)("p",{children:null==j?void 0:j.user.name}),(0,n.jsx)("p",{children:null==j?void 0:j.user.email}),(0,n.jsxs)("p",{children:[" ",(0,n.jsxs)("strong",{children:[" ",null===(s=g[1])||void 0===s?void 0:s.length," "]})," reviews "]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(l.G,{icon:d.m6i}),"\xa0",(0,n.jsx)("strong",{children:"120"}),"\xa0likes"]}),p===(null==j?void 0:j.user.id)&&(0,n.jsx)(u.Z,{variant:"outline-danger",onClick:()=>(0,c.signOut)(),children:"Log Out"})]})})]})})}},6526:function(e,i,s){"use strict";s.d(i,{Z:function(){return o}});var n=s(7437),l=s(2749),d=s(1396),r=s.n(d),t=s(2265),c=s(6598),a=s(9588);function o(e){var i,s;let{reviewData:d,id:o}=e,[u,h]=(0,t.useState)([]);console.log(d);let{data:x,status:v}=(0,l.useSession)();return d.length>0&&h(JSON.parse(JSON.stringify(d.tags))),(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsxs)(r(),{href:"/review/".concat(null==d?void 0:d._id),className:"text-decoration-none text-body d-flex",children:[(0,n.jsx)("div",{className:"me-5 mt-2",children:(0,n.jsx)("img",{src:null==d?void 0:d.img,alt:"",className:"object-fit-cover",style:{width:"156px",height:"231px",background:"red"}})}),(0,n.jsxs)("div",{className:"w-75",children:[(0,n.jsx)("h2",{children:null==d?void 0:d.titleReview}),(0,n.jsx)("h4",{children:null==d?void 0:d.titleItem}),(0,n.jsx)("p",{children:null==d?void 0:null===(i=d.category)||void 0===i?void 0:i.name}),(0,n.jsx)("p",{children:u.map(e=>{let i=JSON.parse(e);return i.name+" "})}),(0,n.jsx)(a.D,{children:(null==d?void 0:null===(s=d.desc)||void 0===s?void 0:s.substring(0,200))+"..."}),(0,n.jsxs)("p",{children:["Rate: ",null==d?void 0:d.rating]}),(0,n.jsx)("div",{className:"d-flex justify-content-between",children:(0,n.jsxs)("p",{children:["Review likes: ",null==d?void 0:d.likes]})})]})]}),o===(null==x?void 0:x.user.id)&&(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(c.Z.Toggle,{variant:"secondary",id:"dropdown-basic",children:"More actions"}),(0,n.jsxs)(c.Z.Menu,{children:[(0,n.jsx)(c.Z.Item,{href:"/review/edit/".concat(null==d?void 0:d._id),children:"Edit"}),(0,n.jsx)(c.Z.Divider,{}),(0,n.jsx)(c.Z.Item,{className:"text-danger",href:"/review/delete/".concat(null==d?void 0:d._id),children:"Delete"})]})]})]}),(0,n.jsx)("hr",{className:"w-100"})]})}}},function(e){e.O(0,[676,726,222,749,588,333,279,841,615,598,971,596,744],function(){return e(e.s=6245)}),_N_E=e.O()}]);