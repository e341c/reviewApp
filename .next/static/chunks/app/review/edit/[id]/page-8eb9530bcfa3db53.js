(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{7724:function(e,t,n){Promise.resolve().then(n.bind(n,7267))},7267:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=n(7437),l=n(3075),o=n(6716),a=n(4883),s=n(9576),r=n(3538),c=n(2265);n(6282),n(2749);var d=n(9222),u=n(4033),h=n(2115),v=n(1512);let m="http://localhost:3000";function p(e){let{params:t}=e,{id:n}=t,p=(0,c.useRef)(null),[x,f]=(0,c.useState)([]),g=(0,u.useRouter)(),[y,j]=(0,c.useState)(!1),[w,b]=(0,c.useState)(null),[N,C]=(0,c.useState)(),[S,_]=(0,c.useState)([]),[k,Z]=(0,c.useState)(),[V,G]=(0,c.useState)(!1),[I,L]=(0,c.useState)(),[R,M]=(0,c.useState)(),[E,P]=(0,c.useState)([]),[W,A]=(0,c.useState)(0),[T,z]=(0,c.useState)(),[F,O]=(0,c.useState)(),[B,$]=(0,c.useState)(null),D=new FormData;D.append("titleReview",I),D.append("titleItem",R),D.append("category",F),D.append("desc",T),D.append("rating",W),D.append("likes",0),D.append("file",B),E.forEach(e=>{e.name?(console.log(e.name),D.append("tags",e.name)):(console.log(e),D.append("tags",e))});let H=async e=>{e.preventDefault(),j(!0);try{let e=await d.Z.post(m+"/api/review/edit/".concat(n),D,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});j(!1),201===e.status&&g.push("/")}catch(e){G(e),console.log(e),j(!1)}};return(0,c.useEffect)(()=>{let e=async()=>{j(!0);try{let e=await d.Z.get(m+"/api/category").then(e=>e.data);f(e);let t=await d.Z.get(m+"/api/tags").then(e=>e.data);_(t);let i=await d.Z.get(m+"/api/review/".concat(n)).then(e=>e.data);Z(i),L(i.titleReview),M(i.titleItem),O(i.category._id),z(i.desc),P(i.tags),A(i.rating),C(i.img),console.log(i),j(!1)}catch(e){console.log(e),G(e.message),j(!1)}};e()},[]),(0,i.jsxs)("main",{children:[w&&(0,i.jsxs)("div",{className:"container position-absolute top-0 start-0 end-0 bottom-0 z-2 bg-body pb-5",children:[(0,i.jsx)(h.Z,{data:k}),(0,i.jsx)(o.Z,{variant:"secondary",className:"mb-5",onClick:e=>b(!1),children:"Close preview"})]}),(0,i.jsxs)(a.Z,{onSubmit:H,children:[y&&(0,i.jsx)(v.Z,{}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col col-auto mt-2 mb-4",children:[(0,i.jsx)("div",{style:{maxWidth:"150px",minHeight:"200px"},className:"mb-4 p-2 rounded overflow-hidden border",children:(0,i.jsx)("img",{alt:"",src:N,className:"object-fit-cover w-100 h-auto"})}),(0,i.jsx)("input",{ref:p,type:"file",accept:"image/*",name:"image",id:"selectFile",hidden:!0,onChange:e=>{$(e.target.files[0]),C(URL.createObjectURL(e.target.files[0]))}}),(0,i.jsx)(o.Z,{onClick:()=>{var e;null===(e=p.current)||void 0===e||e.click()},className:"w-100",variant:"primary",children:"Edit image"})]}),(0,i.jsxs)("div",{className:"col",style:{minWidth:"80%"},children:[(0,i.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,i.jsx)(a.Z.Label,{children:(0,i.jsx)("h2",{children:"Title of review"})}),(0,i.jsx)(a.Z.Control,{type:"text",value:I,name:"titleReview",placeholder:"Enter title of your review",onChange:e=>L(e.target.value)})]}),(0,i.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,i.jsx)(a.Z.Label,{children:(0,i.jsx)("h4",{children:"Title of movie, book, game, etc"})}),(0,i.jsx)(a.Z.Control,{type:"text",value:R,name:"titleItem",placeholder:"Enter title of movie, book, game, etc...",onChange:e=>M(e.target.value)})]}),(0,i.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,i.jsx)(a.Z.Label,{children:"Choice category"}),(0,i.jsx)(l.Z,{children:(0,i.jsx)(a.Z.Select,{name:"category","aria-label":"category",onChange:e=>O(e.target.value),children:x.map(e=>(0,i.jsx)("option",{selected:e._id===F,value:e._id,children:e.name},e.key))})})]}),(0,i.jsxs)(a.Z.Group,{className:"mb-3",children:[(0,i.jsx)(a.Z.Label,{children:"Enter tags for your review"}),(0,i.jsx)(r.pY,{id:"basic-typeahead-multiple",labelKey:"name",allowNew:!0,multiple:!0,onChange:P,options:S,placeholder:"Choose several tags...",selected:E,className:"text-body"})]}),(0,i.jsxs)(a.Z.Group,{className:"mb-3",controlId:"desc",children:[(0,i.jsx)(a.Z.Label,{children:"Your review"}),(0,i.jsx)(a.Z.Control,{name:"desc",as:"textarea",rows:4,value:T,maxLength:4096,placeholder:"Text of review",onChange:e=>z(e.target.value)})]}),(0,i.jsxs)(a.Z.Group,{className:"mb-4 d-flex flex-column",children:[(0,i.jsx)(a.Z.Label,{children:"Your grade from 0 - 10"}),(0,i.jsx)(s.i,{size:25,iconsCount:10,initialValue:W,onClick:e=>{A(e)}})]}),V&&(0,i.jsx)("p",{className:"text-danger",children:V.message}),(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Z,{variant:"secondary",className:"me-3 mb-3",onClick:e=>b(!0),children:"Preview"}),(0,i.jsx)(o.Z,{type:"submit",variant:"primary",className:"mb-3 shadow-sm",style:{width:"180px"},children:"Submit"}),V&&(0,i.jsx)("p",{className:"text-danger mt-3",children:V.message})]})]})]})]})]})}},1512:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(7437),l=n(9639);function o(){return(0,i.jsx)("div",{className:"w-100 h-100 position-absolute z-2 d-flex justify-content-center align-items-center",children:(0,i.jsxs)("div",{className:"py-4 px-5 bg-primary rounded d-flex justify-content-center align-items-center",children:[(0,i.jsx)(l.Z,{animation:"border",variant:"light"}),"\xa0",(0,i.jsx)("p",{className:"m-0 text-light",children:"Loading... Please wait"})]})})}},2115:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(7437),l=n(2749),o=n(1396),a=n.n(o),s=n(8829),r=n.n(s),c=n(9588);function d(e){var t,n,o,s,d,u,h;let{main:v,data:m,highlight:p}=e,{data:x,status:f}=(0,l.useSession)();return(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)(a(),{href:"/review/".concat(null==m?void 0:m._id),className:"text-decoration-none text-body mt-2 me-3",children:(0,i.jsx)("div",{style:{maxWidth:"150px"},children:(0,i.jsx)("img",{src:null==m?void 0:m.img,alt:"",className:"object-fit-cover w-100 h-auto",style:{minWidth:"70px"}})})}),(0,i.jsxs)("div",{className:"w-75",style:{minWidth:"180px"},children:[(0,i.jsxs)(a(),{href:"/review/".concat(m._id),className:"text-decoration-none text-body",children:[(0,i.jsx)("h2",{children:null==m?void 0:m.titleReview}),(0,i.jsx)("h4",{children:null==m?void 0:m.titleItem}),(0,i.jsx)("p",{children:null==m?void 0:null===(t=m.category)||void 0===t?void 0:t.name}),(0,i.jsx)("p",{children:null==m?void 0:m.tags.map(e=>(0,i.jsx)("span",{className:"rbt-token p-1",children:e+" "}))}),v?(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)(r(),{highlightClassName:"bg-warning",searchWords:[p],autoEscape:!0,textToHighlight:(null==m?void 0:null===(n=m.desc)||void 0===n?void 0:n.substring(0,200))+"..."})}):(0,i.jsx)(c.D,{children:null==m?void 0:m.desc}),(0,i.jsxs)("p",{children:["Rate: ",null==m?void 0:m.rating]})]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsxs)("p",{children:["Review likes: ",null==m?void 0:null===(o=m.likes)||void 0===o?void 0:o.length]}),(null==m?void 0:null===(s=m.author)||void 0===s?void 0:s.name)&&(0,i.jsxs)("p",{children:["Author: \xa0",(0,i.jsx)(a(),{href:(null==m?void 0:null===(d=m.author)||void 0===d?void 0:d._id)===(null==x?void 0:null===(u=x.user)||void 0===u?void 0:u.id)?"/profile":"/profile/".concat(null==m?void 0:null===(h=m.author)||void 0===h?void 0:h._id),className:"text-primary",children:null==m?void 0:m.author.name})]})]})]})]}),(0,i.jsx)("hr",{className:"w-100"})]})}},4033:function(e,t,n){e.exports=n(8165)},9639:function(e,t,n){"use strict";var i=n(4440),l=n.n(i),o=n(2265),a=n(7127),s=n(7437);let r=o.forwardRef(({bsPrefix:e,variant:t,animation:n="border",size:i,as:o="div",className:r,...c},d)=>{e=(0,a.vE)(e,"spinner");let u=`${e}-${n}`;return(0,s.jsx)(o,{ref:d,...c,className:l()(r,u,i&&`${u}-${i}`,t&&`text-${t}`)})});r.displayName="Spinner",t.Z=r},9576:function(e,t,n){"use strict";var i=n(7437),l=n(2265),o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};function a(e,t,n){if(n||2==arguments.length)for(var i,l=0,o=t.length;l<o;l++)!i&&l in t||(i||(i=Array.prototype.slice.call(t,0,l)),i[l]=t[l]);return e.concat(i||Array.prototype.slice.call(t))}function s(e){var t=e.size,n=void 0===t?25:t,l=e.SVGstrokeColor,a=e.SVGstorkeWidth,s=e.SVGclassName,r=e.SVGstyle;return i.jsx("svg",o({className:void 0===s?"star-svg":s,style:r,stroke:void 0===l?"currentColor":l,fill:"currentColor",strokeWidth:void 0===a?0:a,viewBox:"0 0 24 24",width:n,height:n,xmlns:"http://www.w3.org/2000/svg"},{children:i.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}))}function r(e,t){switch(t.type){case"PointerMove":return o(o({},e),{hoverValue:t.payload,hoverIndex:t.index});case"PointerLeave":return o(o({},e),{ratingValue:e.ratingValue,hoverIndex:0,hoverValue:null});case"MouseClick":return o(o({},e),{valueIndex:e.hoverIndex,ratingValue:t.payload});default:return e}}function c(){return"undefined"!=typeof window&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||"undefined"!=typeof navigator&&navigator.maxTouchPoints>0}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===n&&i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}(".style-module_starRatingWrap__q-lJC{display:inline-block;touch-action:none}.style-module_simpleStarRating__nWUxf{display:inline-block;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.style-module_fillIcons__6---A{display:inline-block;overflow:hidden;position:absolute;top:0;white-space:nowrap}.style-module_emptyIcons__Bg-FZ{display:inline-block}.style-module_tooltip__tKc3i{background-color:#333;border-radius:5px;color:#fff;display:inline-block;padding:5px 15px;vertical-align:middle}"),t.i=function(e){var t,n,d=e.onClick,u=e.onPointerMove,h=e.onPointerEnter,v=e.onPointerLeave,m=e.initialValue,p=void 0===m?0:m,x=e.iconsCount,f=void 0===x?5:x,g=e.size,y=void 0===g?40:g,j=e.readonly,w=void 0!==j&&j,b=e.rtl,N=void 0!==b&&b,C=e.customIcons,S=void 0===C?[]:C,_=e.allowFraction,k=void 0!==_&&_,Z=e.style,V=e.className,G=void 0===V?"react-simple-star-rating":V,I=e.transition,L=void 0!==I&&I,R=e.allowHover,M=void 0===R||R,E=e.disableFillHover,P=void 0!==E&&E,W=e.fillIcon,A=void 0===W?null:W,T=e.fillColor,z=void 0===T?"#ffbc0b":T,F=e.fillColorArray,O=void 0===F?[]:F,B=e.fillStyle,$=e.fillClassName,D=void 0===$?"filled-icons":$,H=e.emptyIcon,U=void 0===H?null:H,Y=e.emptyColor,K=e.emptyStyle,q=e.emptyClassName,J=void 0===q?"empty-icons":q,X=e.allowTitleTag,Q=e.showTooltip,ee=e.tooltipDefaultText,et=e.tooltipArray,en=void 0===et?[]:et,ei=e.tooltipStyle,el=e.tooltipClassName,eo=void 0===el?"react-simple-star-rating-tooltip":el,ea=e.SVGclassName,es=void 0===ea?"star-svg":ea,er=e.titleSeparator,ec=void 0===er?"out of":er,ed=e.SVGstyle,eu=e.SVGstorkeWidth,eh=void 0===eu?0:eu,ev=e.SVGstrokeColor,em=void 0===ev?"currentColor":ev,ep=l.useReducer(r,{hoverIndex:0,valueIndex:0,ratingValue:p,hoverValue:null}),ex=ep[0],ef=ex.ratingValue,eg=ex.hoverValue,ey=ex.hoverIndex,ej=ex.valueIndex,ew=ep[1];l.useEffect(function(){p&&ew({type:"MouseClick",payload:0})},[p]);var eb=l.useMemo(function(){return k?2*f:f},[k,f]),eN=l.useMemo(function(){return p>eb?0:k||Math.floor(p)===p?Math.round(p/f*100):2*Math.ceil(p)*10},[k,p,f,eb]),eC=l.useMemo(function(){return(k?2*p-1:p-1)||0},[k,p]),eS=l.useCallback(function(e){return f%2!=0?e/2/10:e*f/100},[f]),e_=function(e){for(var t=e.clientX,n=e.currentTarget.children[0].getBoundingClientRect(),i=n.left,l=n.right,o=n.width,a=N?l-t:t-i,s=eb,r=Math.round(o/eb),c=0;c<=eb;c+=1)if(a<=r*c){s=0===c&&a<r?0:c;break}var d=s-1;s>0&&(ew({type:"PointerMove",payload:100*s/eb,index:d}),u&&eg&&u(eS(eg),d,e))},ek=function(e){eg&&(ew({type:"MouseClick",payload:eg}),d&&d(eS(eg),ey,e))},eZ=l.useMemo(function(){if(M){if(P){var e=ef&&ef||eN;return eg&&eg>e?eg:e}return eg&&eg||ef&&ef||eN}return ef&&ef||eN},[M,P,eg,ef,eN]);l.useEffect(function(){en.length>eb&&console.error("tooltipArray Array length is bigger then Icons Count length.")},[en.length,eb]);var eV=l.useCallback(function(e){return eg&&e[ey]||ef&&e[ej]||p&&e[eC]},[eg,ey,ef,ej,p,eC]),eG=l.useMemo(function(){return eg&&eS(eg)||ef&&eS(ef)||p&&eS(eN)},[eg,eS,ef,p,eN]);return i.jsxs("span",o({className:"style-module_starRatingWrap__q-lJC",style:{direction:"".concat(N?"rtl":"ltr")}},{children:[i.jsxs("span",o({className:"".concat("style-module_simpleStarRating__nWUxf"," ").concat(G),style:o({cursor:w?"":"pointer"},Z),onPointerMove:w?void 0:e_,onPointerEnter:w?void 0:function(e){h&&h(e),c()&&e_(e)},onPointerLeave:w?void 0:function(e){c()&&ek(),ew({type:"PointerLeave"}),v&&v(e)},onClick:w?void 0:ek,"aria-hidden":"true"},{children:[i.jsx("span",o({className:"".concat("style-module_emptyIcons__Bg-FZ"," ").concat(J),style:o({color:void 0===Y?"#cccccc":Y},K)},{children:a([],Array(f),!0).map(function(e,t){var n;return i.jsx(l.Fragment,{children:(null===(n=S[t])||void 0===n?void 0:n.icon)||U||i.jsx(s,{SVGclassName:es,SVGstyle:ed,SVGstorkeWidth:eh,SVGstrokeColor:em,size:y})},t)})})),i.jsx("span",o({className:"".concat("style-module_fillIcons__6---A"," ").concat(D),style:o(((t={})[N?"right":"left"]=0,t.color=eV(O)||z,t.transition=L?"width .2s ease, color .2s ease":"",t.width="".concat(eZ,"%"),t),B),title:void 0===X||X?"".concat(eG," ").concat(ec," ").concat(f):void 0},{children:a([],Array(f),!0).map(function(e,t){var n;return i.jsx(l.Fragment,{children:(null===(n=S[t])||void 0===n?void 0:n.icon)||A||i.jsx(s,{SVGclassName:es,SVGstyle:ed,SVGstorkeWidth:eh,SVGstrokeColor:em,size:y})},t)})}))]})),void 0!==Q&&Q&&i.jsx("span",o({className:"".concat("style-module_tooltip__tKc3i"," ").concat(eo),style:o(((n={})[N?"marginRight":"marginLeft"]=20,n),ei)},{children:(en.length>0?eV(en):eG)||(void 0===ee?"Your Rate":ee)}))]}))}}},function(e){e.O(0,[504,749,222,883,471,195,588,971,596,744],function(){return e(e.s=7724)}),_N_E=e.O()}]);