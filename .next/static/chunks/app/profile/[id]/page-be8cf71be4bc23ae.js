(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{8897:function(e,i,l){Promise.resolve().then(l.bind(l,2297))},2297:function(e,i,l){"use strict";l.r(i),l.d(i,{default:function(){return v}});var n=l(7437),s=l(1279),d=l(2759),r=l(2749),t=l(6525),o=l(9222),a=l(4033);l(2115);var c=l(6526);function v(e){var i,l,v,u,h,x,m;let{params:j}=e,{id:p}=j,{data:f,status:N}=(0,r.useSession)(),g=(0,a.useRouter)();p===(null==f?void 0:f.user.id)&&g.push("/profile");let{data:w,error:y,isLoading:b}=(0,t.ZP)("/api/profile/".concat(p),async()=>{let e=await o.Z.get("/api/profile/".concat(p));return e.data},{refreshInterval:100});if(b)return(0,n.jsx)("p",{children:"Loading..."});if(y)return console.log(y),(0,n.jsx)("p",{children:"Something went wrong. Try to reload page"});let _=[];return null===(i=w[1])||void 0===i||i.filter(e=>{e.likes.length>0&&_.push(...e.likes)}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"row",style:{marginTop:"80px"},children:[(0,n.jsxs)("div",{className:"col col-md-3 mb-4",children:[(0,n.jsxs)("h3",{className:"mb-4",children:[null===(l=w[0])||void 0===l?void 0:l.name,"'s profile"]}),(0,n.jsxs)("div",{className:"p-3 shadow rounded",children:[(0,n.jsx)("p",{children:null===(v=w[0])||void 0===v?void 0:v.name}),(0,n.jsx)("p",{children:null===(u=w[0])||void 0===u?void 0:u.email}),(0,n.jsxs)("p",{children:[(0,n.jsxs)("strong",{children:[" ",null===(h=w[1])||void 0===h?void 0:h.length," "]})," reviews"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(s.G,{icon:d.m6i}),"\xa0",(0,n.jsx)("strong",{children:_.length}),"\xa0likes"]})]})]}),(0,n.jsxs)("div",{className:"col",style:{minWidth:"70%"},children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)("h3",{children:[null===(x=w[0])||void 0===x?void 0:x.name," reviews"]})}),0===w[1].length&&(0,n.jsx)("p",{children:"There are no reviews here yet"}),null===(m=w[1])||void 0===m?void 0:m.map(e=>(0,n.jsx)(c.Z,{reviewData:e,id:p}))]})]})})}},6526:function(e,i,l){"use strict";l.d(i,{Z:function(){return v}});var n=l(7437),s=l(9222),d=l(2749),r=l(1396),t=l.n(r),o=l(2265),a=l(4850),c=l(9588);function v(e){var i,l;let{reviewData:r,id:v}=e,{data:u,status:h}=(0,d.useSession)(),[x,m]=(0,o.useState)(JSON.parse(JSON.stringify(null==r?void 0:r.tags)));return(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)(t(),{href:"/review/".concat(null==r?void 0:r._id),className:"col text-decoration-none text-body d-flex ",children:[(0,n.jsx)("div",{className:"mt-2 me-3",style:{maxWidth:"150px"},children:(0,n.jsx)("img",{src:null==r?void 0:r.img,alt:"",className:"object-fit-cover w-100 h-auto",style:{minWidth:"70px"}})}),(0,n.jsxs)("div",{style:{minWidth:"180px"},children:[(0,n.jsx)("h2",{children:null==r?void 0:r.titleReview}),(0,n.jsx)("h4",{children:null==r?void 0:r.titleItem}),(0,n.jsx)("p",{children:null==r?void 0:null===(i=r.category)||void 0===i?void 0:i.name}),(0,n.jsx)("p",{children:null==x?void 0:x.map(e=>{let i=JSON.parse(e);return i.name+" "})}),(0,n.jsx)(c.D,{children:(null==r?void 0:null===(l=r.desc)||void 0===l?void 0:l.substring(0,200))+"..."}),(0,n.jsxs)("p",{children:["Rate: ",null==r?void 0:r.rating]}),(0,n.jsx)("div",{className:"d-flex justify-content-between",children:(0,n.jsxs)("p",{children:["Review likes: ",null==r?void 0:r.likes.length]})})]})]}),(v===(null==u?void 0:u.user.id)||(null==u?void 0:u.user.admin))&&(0,n.jsxs)(a.Z,{className:"col col-auto",children:[(0,n.jsx)(a.Z.Toggle,{variant:"secondary",id:"dropdown-basic",children:"More actions"}),(0,n.jsxs)(a.Z.Menu,{children:[(0,n.jsx)(a.Z.Item,{href:"/review/edit/".concat(null==r?void 0:r._id),children:"Edit"}),(0,n.jsx)(a.Z.Divider,{}),(0,n.jsx)(a.Z.Item,{className:"text-danger",onClick:()=>s.Z.delete("/api/review/delete/".concat(null==r?void 0:r._id)),children:"Delete"})]})]})]})}),(0,n.jsx)("hr",{className:"w-100"})]},null==r?void 0:r._id)}},2115:function(e,i,l){"use strict";l.d(i,{Z:function(){return a}});var n=l(7437),s=l(2749),d=l(1396),r=l.n(d),t=l(2265),o=l(9588);function a(e){var i,l,d,a,c,v,u;let{main:h,reviewData:x}=e,[m,j]=(0,t.useState)(JSON.parse(JSON.stringify(null==x?void 0:x.tags))),{data:p,status:f}=(0,s.useSession)();return(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsxs)("div",{className:"d-flex",children:[(0,n.jsx)(r(),{href:"/review/".concat(null==x?void 0:x._id),className:"text-decoration-none text-body mt-2 me-3",children:(0,n.jsx)("div",{style:{maxWidth:"150px"},children:(0,n.jsx)("img",{src:null==x?void 0:x.img,alt:"",className:"object-fit-cover w-100 h-auto",style:{minWidth:"70px"}})})}),(0,n.jsxs)("div",{className:"w-75",style:{minWidth:"180px"},children:[(0,n.jsxs)(r(),{href:"/review/".concat(x._id),className:"text-decoration-none text-body",children:[(0,n.jsx)("h2",{children:null==x?void 0:x.titleReview}),(0,n.jsx)("h4",{children:null==x?void 0:x.titleItem}),(0,n.jsx)("p",{children:null==x?void 0:null===(i=x.category)||void 0===i?void 0:i.name}),(0,n.jsx)("p",{children:null==m?void 0:m.map(e=>{let i=JSON.parse(e);return i.name+" "})}),h?(0,n.jsx)(o.D,{children:(null==x?void 0:null===(l=x.desc)||void 0===l?void 0:l.substring(0,200))+"..."}):(0,n.jsx)(o.D,{children:null==x?void 0:x.desc}),(0,n.jsxs)("p",{children:["Rate: ",null==x?void 0:x.rating]})]}),(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsxs)("p",{children:["Review likes: ",null==x?void 0:null===(d=x.likes)||void 0===d?void 0:d.length]}),(null==x?void 0:null===(a=x.author)||void 0===a?void 0:a.name)&&(0,n.jsxs)("p",{children:["Author: \xa0",(0,n.jsx)(r(),{href:(null==x?void 0:null===(c=x.author)||void 0===c?void 0:c._id)===(null==p?void 0:null===(v=p.user)||void 0===v?void 0:v.id)?"/profile":"/profile/".concat(null==x?void 0:null===(u=x.author)||void 0===u?void 0:u._id),className:"text-primary",children:null==x?void 0:x.author.name})]})]})]})]}),(0,n.jsx)("hr",{className:"w-100"})]},x._id)}},4033:function(e,i,l){e.exports=l(8165)}},function(e){e.O(0,[676,726,222,749,588,175,162,333,850,971,596,744],function(){return e(e.s=8897)}),_N_E=e.O()}]);